/*! flixel v1.0.0 | (c) 2014 Ratalaika Games. */
!function(a,b){for(var c=b(),d=0;d<c.length;d+=2){var e=c[d+1],f=function(){return c[d]};"function"==typeof define&&define.amd?define(f):"object"==typeof exports?module.exports=f():a[e]=f()}}(this,function(){function a(a){function b(){}return b.prototype=a,new b}var b=function(b,c){b.prototype=a(c.prototype),b.prototype.constructor=b,b.parent=c.prototype},c=function(a){for(var b=(new Date).getTime(),c=0;1e7>c&&!((new Date).getTime()-b>a);c++);},d=(new Date).getTime(),e=function(){var a=new Date;return a.getTime()-d},f=function(a){return Math.floor(a)},g=function(a){if(a>=0)return Math.floor(a);var b=4294967295;return b-=Math.floor(Math.abs(a))-1};if(String.prototype.pad=function(a,b,c){b=void 0===b||null===b?" ":b;for(var d=a-this.length,e="";d>0;)e+=b,d--;switch(c){case"left":return e+this;case"right":return this+e}},!window.console){window.console={};for(var h=["log","info","warn","error","debug","trace","dir","group","groupCollapsed","groupEnd","time","timeEnd","profile","profileEnd","dirxml","assert","count","markTimeline","timeStamp","clear"],i=0;i<h.length;i++)window.console[h[i]]||(window.console[h[i]]=function(a){window.external.notify&&window.external.notify(a)})}var j=j||{VERSION:"1.0.0",AUTO:0,CANVAS:1,WEBGL:2};j.data=function(){},j.plugin=function(){},j.plugin.powertools=function(){},j.plugin.store=function(){},j.plugin.tmx=function(){},j.plugin.tweens=function(){},j.plugin.tweens.misc=function(){},j.plugin.tweens.motion=function(){},j.plugin.tweens.sound=function(){},j.plugin.tweens.util=function(){},j.system=function(){},j.system.atlas=function(){},j.system.debug=function(){},j.system.input=function(){},j.system.input.pads=function(){},j.system.replay=function(){};var k=function(a,b,c,d,e,f){this.a=isNaN(a)?1:a,this.b=isNaN(b)?0:b,this.c=isNaN(c)?0:c,this.d=isNaN(d)?1:d,this.tx=isNaN(e)?0:e,this.ty=isNaN(f)?0:f,this.u=0,this.v=0,this.w=1};k.prototype.identity=function(){this.a=1,this.c=0,this.tx=0,this.b=0,this.d=1,this.ty=0,this.u=0,this.v=0,this.w=1},k.prototype.rotate=function(a){var b=Math.sin(a),c=Math.cos(a),d=this.a,e=this.b,f=this.c,g=this.d,h=this.tx,i=this.ty;this.a=d*c-e*b,this.b=d*b+e*c,this.c=f*c-g*b,this.d=f*b+g*c,this.tx=h*c-i*b,this.ty=h*b+i*c},k.prototype.scale=function(a,b){this.a=this.a*a,this.d=this.d*b,this.tx=this.tx*a,this.ty=this.ty*b},k.prototype.translate=function(a,b){this.tx+=a,this.ty+=b},k.prototype.clone=function(){return new k(this.a,this.b,this.c,this.d,this.tx,this.ty)},k.prototype.concat=function(a){this.a=this.a*a.a+this.b*a.c,this.b=this.a*a.b+this.b*a.d,this.c=this.c*a.a+this.d*a.c,this.d=this.c*a.b+this.d*a.d,this.tx=this.tx*a.a+this.ty*a.c+a.tx,this.ty=this.tx*a.b+this.ty*a.d+a.ty},k.prototype.createBox=function(a,b,c,d,e){c=isNaN(c)?0:c,d=isNaN(d)?0:d,e=isNaN(e)?0:e,this.identity(),this.rotate(c),this.scale(a,b),this.translate(d,e)},k.prototype.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"};var l=function(a,b,c,d,e,f,g,h){this.redMultiplier=isNaN(a)?1:a,this.greenMultiplier=isNaN(b)?1:b,this.blueMultiplier=isNaN(c)?1:c,this.alphaMultiplier=isNaN(d)?1:d,this.redOffset=isNaN(e)?0:e,this.greenOffset=isNaN(f)?0:f,this.blueOffset=isNaN(g)?0:g,this.alphaOffset=isNaN(h)?0:h},m=function(a,b,c,d){c=void 0===c?!0:c,d=void 0===d?4294967295:d,this.transparent=c,this.width=a,this.height=b,this._data=Array(),this._canvas=document.createElement("canvas"),this._canvas.width=this.width,this._canvas.height=this.height,this.context=this._canvas.getContext("2d"),this.context.save(),this.context.fillStyle=m.makeRGBA(d),this.context.fillRect(0,0,this.width,this.height),this.context.restore()};m.prototype.getPixel=function(a,b){var c=this.context.getImageData(a,b,1,1).data;return c[0]<<16|c[1]<<8|c[2]},m.prototype.copyPixels=function(a,b,c,d,e,f,g){g&&this.context.clearRect(c.x,c.y,b.width,b.height),this.context.drawImage(a._canvas,b.x,b.y,b.width,b.height,c.x,c.y,b.width,b.height)},m.prototype.setPixel=function(a,b,c){this.context.fillStyle=m.makeRGBA(c),this.context.fillRect(a,b,1,1)},m.prototype.fillRect=function(a,b){this.context.save(),this.context.clearRect(a.x,a.y,a.width,a.height),this.context.fillStyle=m.makeRGBA(b),this.context.fillRect(a.x,a.y,a.width,a.height),this.context.restore()},m.prototype.colorTransform=function(a,b){for(var c,d,e,f,g=b,h=this.context.getImageData(a.x,a.y,a.width,a.height),i=0;i<h.data.length;i+=4)c=h.data[i]*g.redMultiplier+g.redOffset,d=h.data[i+1]*g.greenMultiplier+g.greenOffset,e=h.data[i+2]*g.blueMultiplier+g.blueOffset,f=h.data[i+3]*g.alphaMultiplier+g.alphaOffset,c=c>255?255:c,c=0>c?0:c,d=d>255?255:d,d=0>d?0:d,e=e>255?255:e,e=0>e?0:e,f=f>255?255:f,f=0>f?0:f,h.data[i]=c,h.data[i+1]=d,h.data[i+2]=e,h.data[i+3]=f;this.context.putImageData(h,a.x,a.y)},m.prototype.draw=function(a,b,c,d,e){this.context.save(),void 0!==b&&null!==b&&this.context.setTransform(b.a,b.b,b.c,b.d,b.tx,b.ty),void 0!==e&&null!==e?this.context.drawImage(a._canvas,e.x,e.y,e.width,e.height,0,0,e.width,e.height):this.context.drawImage(a._canvas,0,0),this.context.restore()},m.makeRGBA=function(a,b){var c=a.toString(16).pad(8,"0","left"),d=j.FlxU.roundWithDec(parseInt(c.substr(0,2),16)/255,1),e=parseInt(c.substr(2,2),16),f=parseInt(c.substr(4,2),16),g=parseInt(c.substr(6,2),16);return d=void 0===b||null===b?d:b,"rgba("+e+","+f+","+g+","+d+")"},m.prototype.clone=function(){var a=new m(this.width,this.height,this.transparent,0);return a.draw(this),a},m.fromImage=function(a){var b=new m(a.width,a.height,!0,0);return b.context.drawImage(a,0,0),b};var n=function(){};n.create=function(a,b){a=a||256,b=b||256;var c=document.createElement("canvas");return c.width=a,c.height=b,c.style.display="block",c},n.getOffset=function(a,b){b=b||new j.FlxPoint;var c=a.getBoundingClientRect(),d=a.clientTop||document.body.clientTop||0,e=a.clientLeft||document.body.clientLeft||0,f=window.pageYOffset||a.scrollTop||document.body.scrollTop,g=window.pageXOffset||a.scrollLeft||document.body.scrollLeft;return b.x=c.left+g-e,b.y=c.top+f-d,b},n.getAspectRatio=function(a){return a.width/a.height},n.setBackgroundColor=function(a,b){return b=b||"rgb(0,0,0)",a.style.backgroundColor=b,a},n.setTouchAction=function(a,b){return b=b||"none",a.style.msTouchAction=b,a.style["ms-touch-action"]=b,a.style["touch-action"]=b,a},n.setUserSelect=function(a,b){return b=b||"none",a.style["-webkit-touch-callout"]=b,a.style["-webkit-user-select"]=b,a.style["-khtml-user-select"]=b,a.style["-moz-user-select"]=b,a.style["-ms-user-select"]=b,a.style["user-select"]=b,a.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",a},n.addToDOM=function(a,b,c){c=void 0===c?!0:c;var d=null;return b&&("string"==typeof b?d=document.getElementById(b):"object"==typeof b&&1===b.nodeType&&(d=b),c&&(d.style.overflow="hidden")),d||(d=document.body),d.appendChild(a),a},n.setTransform=function(a,b,c,d,e,f,g){return a.setTransform(d,f,g,e,b,c),a},n.setSmoothingEnabled=function(a,b){return a.imageSmoothingEnabled=b,a.mozImageSmoothingEnabled=b,a.oImageSmoothingEnabled=b,a.webkitImageSmoothingEnabled=b,a.msImageSmoothingEnabled=b,a},n.setImageRenderingCrisp=function(a){return a.style["image-rendering"]="crisp-edges",a.style["image-rendering"]="-moz-crisp-edges",a.style["image-rendering"]="-webkit-optimize-contrast",a.style.msInterpolationMode="nearest-neighbor",a},n.setImageRenderingBicubic=function(a){return a.style["image-rendering"]="auto",a.style.msInterpolationMode="bicubic",a};var o=function(){this.checkAudio(),this.checkBrowser(),this.checkCSS3D(),this.checkDevice(),this.checkFeatures(),this.checkOS()};o.prototype.patchAndroidClearRectBug=!1,o.prototype.desktop=!1,o.prototype.iOS=!1,o.prototype.android=!1,o.prototype.chromeOS=!1,o.prototype.linux=!1,o.prototype.macOS=!1,o.prototype.windows=!1,o.prototype.firefoxOS=!1,o.prototype.cocoonJS=!1,o.prototype.canvas=!1,o.prototype.file=!1,o.prototype.fileSystem=!1,o.prototype.localStorage=!1,o.prototype.webGL=!1,o.prototype.worker=!1,o.prototype.touch=!1,o.prototype.mspointer=!1,o.prototype.css3D=!1,o.prototype.pointerLock=!1,o.prototype.arora=!1,o.prototype.chrome=!1,o.prototype.epiphany=!1,o.prototype.firefox=!1,o.prototype.ie=!1,o.prototype.ieVersion=0,o.prototype.mobileSafari=!1,o.prototype.midori=!1,o.prototype.opera=!1,o.prototype.safari=!1,o.prototype.webApp=!1,o.prototype.audioData=!1,o.prototype.webAudio=!1,o.prototype.ogg=!1,o.prototype.opus=!1,o.prototype.mp3=!1,o.prototype.wav=!1,o.prototype.m4a=!1,o.prototype.webm=!1,o.prototype.iPhone=!1,o.prototype.iPhone4=!1,o.prototype.iPad=!1,o.prototype.windowsPhone=!1,o.prototype.pixelRatio=0,o.prototype.isMobile=!1,o.prototype.localStorage=!1,o.prototype.checkOS=function(){var a=navigator.userAgent;/Android/.test(a)?this.android=!0:/CrOS/.test(a)?this.chromeOS=!0:/iP[ao]d|iPhone/i.test(a)?this.iOS=!0:/Linux/.test(a)?this.linux=!0:/Mac OS/.test(a)?this.macOS=!0:/Windows/.test(a)?this.windows=!0:/Mobile;.*Firefox\/(\d+)/.test(a)?this.firefoxOS=!0:/Windows Phone/i.test(a)&&(this.windowsPhone=!0),this.windows||this.macOS||this.linux?this.desktop=!0:this.isMobile=this.android||this.iOS||this.firefoxOS||this.windowsPhone||!1},o.prototype.checkFeatures=function(){this.canvas=!!window.CanvasRenderingContext2D;try{this.localStorage=!!localStorage.getItem}catch(a){this.localStorage=!1}this.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),this.fileSystem=!!window.requestFileSystem,this.webGL=function(){try{var a=document.createElement("canvas");return!!window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}(),this.webGL=null===this.webGL||this.webGL===!1?!1:!0,this.worker=!!window.Worker,("ontouchstart"in document.documentElement||window.navigator.msPointerEnabled)&&(this.touch=!0),window.navigator.msPointerEnabled&&(this.mspointer=!0),this.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document;try{this.localStorage=!!window.localStorage}catch(b){this.localStorage=!1}},o.prototype.checkBrowser=function(){var a=navigator.userAgent;/Arora/.test(a)?this.arora=!0:/Chrome/.test(a)?this.chrome=!0:/Epiphany/.test(a)?this.epiphany=!0:/Firefox/.test(a)?this.firefox=!0:/Mobile Safari/.test(a)?this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(a)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1)):/Midori/.test(a)?this.midori=!0:/Opera/.test(a)?this.opera=!0:/Safari/.test(a)&&(this.safari=!0),navigator.standalone&&(this.webApp=!0),navigator.isCocoonJS&&(this.cocoonJS=!0)},o.prototype.checkAudio=function(){this.audioData=!!window.Audio,this.webAudio=!(!window.webkitAudioContext&&!window.AudioContext);var a=document.createElement("audio");try{var b=!!a.canPlayType;b&&(a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.ogg=!0),a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")&&(this.opus=!0),a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.mp3=!0),a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.wav=!0),(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))&&(this.m4a=!0),a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(this.webm=!0))}catch(c){}},o.prototype.checkDevice=function(){this.pixelRatio=window.devicePixelRatio||1,this.iPhone=-1!=navigator.userAgent.toLowerCase().indexOf("iphone"),this.iPhone4=2==this.pixelRatio&&this.iPhone,this.iPad=-1!=navigator.userAgent.toLowerCase().indexOf("ipad")},o.prototype.checkCSS3D=function(){var a=document.createElement("p"),b=!1,c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};null!==document.body&&document.body.insertBefore(a,null);for(var d in c)void 0!==a.style[d]&&(a.style[d]="translate3d(1px,1px,1px)",b=window.getComputedStyle(a).getPropertyValue(c[d]));null!==document.body&&document.body.removeChild(a),this.css3D=void 0!==b&&b!==!1&&b.length>0&&"none"!==b},o.prototype.canPlayAudio=function(a){return"mp3"==a&&this.mp3?!1:"ogg"==a&&(this.ogg||this.opus)?!1:"m4a"==a&&this.m4a?!0:"wav"==a&&this.wav?!0:"webm"==a&&this.webm?!0:"any"==a?this.canPlayAudio("mp3")||this.canPlayAudio("ogg")||this.canPlayAudio("m4a")||this.canPlayAudio("wav")||this.canPlayAudio("webm"):!1},o.prototype.isConsoleOpen=function(){return window.console&&window.console.firebug?!0:window.console?(console.profile(),console.profileEnd(),console.clear&&console.clear(),console.profiles.length>0):!1},o.prototype.getStorage=function(a){switch(a=a||"local"){case"local":return}j.FlxG.log("Storage type "+a+" not supported.","Device")};var p=function(){this.images=[],this._text=[],this._sounds=[]};p.prototype.images=null,p.prototype._text=null,p.prototype._sounds=null,p.prototype.getText=function(a){return this._text[a]?this._text[a].text:null},p.prototype.addText=function(a,b){this._text[a]={text:b}},p.prototype.addSound=function(a,b,c,d,e){d=void 0===d?!0:d,e=void 0===e?!1:e;var f=!1;e&&(f=!0),this._sounds[a]={url:b,data:c,isDecoding:!1,decoded:f,webAudio:d,audioTag:e}},p.prototype.updateSound=function(a,b,c){this._sounds[a]&&(this._sounds[a][b]=c)},p.prototype.decodedSound=function(a,b){this._sounds[a].data=b,this._sounds[a].decoded=!0,this._sounds[a].isDecoding=!1},p.prototype.getSound=function(a){return this._sounds[a]?this._sounds[a]:null},p.prototype.getSoundData=function(a){return this._sounds[a]?this._sounds[a].data:null},p.prototype.isSoundDecoded=function(a){return this._sounds[a]?this._sounds[a].decoded:void 0},p.prototype.isSoundReady=function(a){return this._sounds[a]&&this._sounds[a].decoded&&j.FlxG.soundManager.touchLocked===!1};var q=function(a,b,c){this.key=a,this.info=b,this.type=c},r=function(){this.resourceList=[],this.resourceCount=0,this.loadCount=0,this.onAssetLoaded=null,this.onAllLoaded=null};r.prototype.cache=null,r.prototype.resourceList=null,r.prototype.resourceCount=0,r.prototype.loadCount=0,r.prototype.onResourceLoaded=null,r.prototype.onAllLoaded=null,r.prototype._xmlHttpRequest=new XMLHttpRequest,r.prototype._curFile=0,r.prototype._start=0,r.prototype.loading=!1,r.prototype.getPercentage=function(){return 100*this.loadCount/this.resourceCount},r.prototype.getAudioURL=function(a){var b;"string"==typeof a&&(a=[a]);for(var c=0;c<a.length;c++)if(b=a[c].toLowerCase(),b=b.substr((Math.max(0,b.lastIndexOf("."))||1/0)+1),j.FlxG.device.canPlayAudio(b))return a[c];return null},r.prototype.addImage=function(a,b){var c={url:b};this.resourceList.push(new q(a,c,"image")),this.resourceCount++},r.prototype.addAtlas=function(a,b,c,d,e){var f={packFileUrl:c,atlasId:d,atlasImageUrl:b,content:e};this.resourceList.push(new q(a,f,"atlas")),this.resourceCount++},r.prototype.addText=function(a,b){var c={url:b};this.resourceList.push(new q(a,c,"text")),this.resourceCount++},r.prototype.addAudio=function(a,b,c){c=void 0===c?!0:c;var d={url:b,buffer:null,autoDecode:c};this.resourceList.push(new q(a,d,"audio")),this.resourceCount++},r.prototype.start=function(){if(void 0===j.FlxG.getGame()||null===j.FlxG.getGame())throw new Error("Loader: Do not call start direclty!");console.log("Loader started, we are going to load "+this.resourceCount+" resources."),this._start=e(),this.loading=!0,this._curFile=0,this.loadCount=0,this.loadFile()},r.prototype.loadFile=function(){var a=this,b=this.resourceList[this._curFile];if(b instanceof q)switch(b.type){case"image":b.image=new Image,b.image.relatedResource=b,b.image.index=this._curFile,b.image.onload=function(){return a.imageLoaded(b.key)},b.image.onerror=function(){return a.fileError(b.key)},b.image.src=b.info.url;break;case"atlas":var c=b.info.packFileUrl;b.info.content?(b.info.packText=b.info.content,b.info.atlasImage=new Image,b.info.atlasImage.relatedResource=b,b.info.atlasImage.index=this._curFile,b.info.atlasImage.onload=function(){return a.atlasLoaded(b.key)},b.info.atlasImage.onerror=function(){return a.fileError(b.key)},b.info.atlasImage.src=b.info.atlasImageUrl):(this._xmlHttpRequest.open("GET",c,!0),this._xmlHttpRequest.responseType="text",this._xmlHttpRequest.onload=function(){return a.atlasTextCompleted(b.key)},this._xmlHttpRequest.onerror=function(){return a.fileError(b.key)},this._xmlHttpRequest.send());break;case"audio":c=this.getAudioURL(b.info.url),null!==c?(b.info.finalUrl=c,j.FlxG.soundManager.usingWebAudio?(this._xmlHttpRequest.open("GET",c,!0),this._xmlHttpRequest.responseType="arraybuffer",this._xmlHttpRequest.onload=function(){return a.audioCompleted(b.key)},this._xmlHttpRequest.onerror=function(){return a.fileError(b.key)},this._xmlHttpRequest.send()):j.FlxG.soundManager.usingAudioTag&&(j.FlxG.soundManager.touchLocked?(b.data=new Audio,b.data.name=b.key,b.data.preload="auto",b.data.src=c,this.fileComplete(b.key)):(b.data=new Audio,b.data.name=b.key,b.data.onerror=function(){return a.fileError(b.key)},b.data.preload="auto",b.data.src=c,b.data.addEventListener("canplaythrough",a.audioComplete(b.key),!1),b.data.load()))):this.fileError(b.key);break;case"text":c=b.info.url,this._xmlHttpRequest.open("GET",c,!0),this._xmlHttpRequest.responseType="text",this._xmlHttpRequest.onload=function(){return a.textCompleted(b.key)},this._xmlHttpRequest.onerror=function(){return a.fileError(b.key)},this._xmlHttpRequest.send()}},r.prototype.loadNextFile=function(){null!==this.onAssetLoaded&&this.onAssetLoaded(this.resourceList[this._curFile].key),this._curFile++,this.loadCount++,console.log("Loading new file, remaining "+(this.resourceCount-this.loadCount)),this.loadCount>=this.resourceCount?(console.log("All resources loaded in: "+(e()-this._start)),null!==this.onAllLoaded&&this.onAllLoaded()):this.loadFile()},r.prototype.imageLoaded=function(a){var b=this.resourceList[this._curFile];this.cache.images[a]=m.fromImage(b.image),this.loadNextFile()},r.prototype.atlasLoaded=function(){var a=this.resourceList[this._curFile];j.system.atlas.FlxAssetManager.getInstance().loadAtlas(a.info.packText,a.info.atlasImage,a.info.atlasId),this.loadNextFile()},r.prototype.atlasTextCompleted=function(){var a=this,b=this.resourceList[this._curFile];b.info.packText=this._xmlHttpRequest.responseText,b.info.atlasImage=new Image,b.info.atlasImage.relatedResource=b,b.info.atlasImage.index=this._curFile,b.info.atlasImage.onload=function(){return a.atlasLoaded(b.key)},b.info.atlasImage.onerror=function(){return a.fileError(b.key)},b.info.atlasImage.src=b.info.atlasImageUrl},r.prototype.textCompleted=function(a){var b=this.resourceList[this._curFile];b.info.text=this._xmlHttpRequest.responseText,this.cache.addText(a,b.info.text),this.loadNextFile()},r.prototype.fileError=function(a){console.warn("Error while loading: "+a),this.loadNextFile()},r.prototype.audioCompleted=function(a){var b=this.resourceList[this._curFile];if(j.FlxG.soundManager.usingWebAudio){if(b.data=this._xmlHttpRequest.response,this.cache.addSound(b.key,b.info.finalUrl,b.data,!0,!1),b.info.autoDecode){this.cache.updateSound(a,"isDecoding",!0);var c=this,d=b.key;j.FlxG.soundManager.context.decodeAudioData(b.data,function(a){a&&c.cache.decodedSound(d,a)})}}else b.data.removeEventListener("canplaythrough"),this.cache.addSound(b.key,b.url,b.data,!1,!0);this.loadNextFile()};var s=function(a,b){if(this.saveTag=a+"."+b,j.FlxG.device.localStorage===!0)for(var c=JSON.parse(localStorage.getItem(this.saveTag))||[],d=0;d<c.length;d++){var e=c[d];this._data[e]=JSON.parse(localStorage.getItem(this.generateTag(e)))}};s.prototype.saveTag=null,s.prototype._data={},s._instance=null,s.prototype.isReserved=function(a){return"add"===a||"remove"===a||"isReserved"===a||"_data"===a},s.prototype.add=function(a){for(var b=Object.keys(a),c=0;c<b.length;c++){var d=b[c];if(this.isReserved(d))return;this._data[d]=a[d],j.FlxG.device.localStorage===!0&&localStorage.setItem(this.generateTag(d),JSON.stringify(a[d]))}j.FlxG.device.localStorage===!0&&localStorage.setItem(this.saveTag,JSON.stringify(Object.keys(this._data)))},s.prototype.remove=function(a){this.isReserved(a)||"undefined"!=typeof this._data[a]&&(delete this._data[a],j.FlxG.device.localStorage===!0&&(localStorage.removeItem(this.generateTag(a)),localStorage.setItem(this.saveTag,JSON.stringify(Object.keys(this._data)))))},s.prototype.clear=function(){for(var a=JSON.parse(localStorage.getItem(this.saveTag))||[],b=0;b<a.length;b++){var c=a[b];this.remove(c)}},s.prototype.generateTag=function(a){var b=this.saveTag;return void 0!==a&&(b+="."+a),b};var t=function(){if(t._instance)throw new Error("Do not call this constructor directly!!!");if(j.FlxG.device.localStorage===!0)for(var a=JSON.parse(localStorage.getItem(t.storageTag))||[],b=0;b<a.length;b++){var c=a[b];this._localStorages[c]=new s(t.saveTag,c)}};t.saveTag="Flixel.SaveManager",t.storageTag="Flixel.StorageManager",t.prototype._localStorages={},t._instance=null,t.prototype.createLocalStorage=function(a){return this._localStorages[a]||(this._localStorages[a]=new s(t.saveTag,a),localStorage.removeItem(t.storageTag),localStorage.setItem(t.storageTag,JSON.stringify(Object.keys(this._localStorages)))),this._localStorages[a]},t.prototype.removeLocalStorage=function(a){void 0!==this._localStorages[a]&&this._localStorages[a].clear(),localStorage.removeItem(t.storageTag),localStorage.setItem(t.storageTag,JSON.stringify(Object.keys(this._localStorages)))},t.prototype.clear=function(){for(var a=Object.keys(this._localStorages),b=0;b<a.length;b++){var c=a[b];this._localStorages[c].clear()}localStorage.removeItem(t.storageTag)},t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},j.FlxPoint=function(a,b){this.x=a||0,this.y=b||0},j.FlxPoint.TO_RADIANS=1/180*Math.PI,j.FlxPoint.TO_DEGREES=1/Math.PI*180,j.FlxPoint.prototype.x=null,j.FlxPoint.prototype.y=null,j.FlxPoint.prototype.make=function(a,b){return this.x=a||0,this.y=b||0,this},j.FlxPoint.prototype.copyFrom=function(a){return this.x=a.x,this.y=a.y,this},j.FlxPoint.prototype.copyTo=function(a){return a.x=this.x,a.y=this.y,a},j.FlxPoint.prototype.copyFromFlash=function(a){return this.x=a.x,this.y=a.y,this},j.FlxPoint.prototype.copyToFlash=function(a){return a.x=this.x,a.y=this.y,a},j.FlxPoint.prototype.add=function(a,b){return this.x+=a,this.y+=b,this},j.FlxPoint.prototype.addPoint=function(a){return this.x+=a.x,this.y+=a.y,this},j.FlxPoint.prototype.sub=function(a,b){return this.x-=a,this.y-=b,this},j.FlxPoint.prototype.subPoint=function(a){return this.x-=a.x,this.y-=a.y,this},j.FlxPoint.prototype.mul=function(a){return this.x*=a,this.y*=a,this},j.FlxPoint.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},j.FlxPoint.prototype.normalize=function(){var a=this.length();return 0!==a&&(this.x/=a,this.y/=a),this},j.FlxPoint.prototype.normalizeScaled=function(a){var b=this.length();return 0!==b&&(this.x=this.x/b*a,this.y=this.y/b*a),this},j.FlxPoint.prototype.angleXY=function(){var a=Math.atan2(this.y,this.x)*j.FlxPoint.TO_DEGREES;return 0>a&&(a+=360),a},j.FlxPoint.prototype.angle=function(a){var b=this.copyFrom(this);return b.subPoint(a),b.angleXY()},j.FlxPoint.prototype.rotateX=function(a){var b=a*j.FlxPoint.TO_RADIANS,c=Math.cos(b),d=Math.sin(b),e=this.x*c-this.y*d;return this.x=e,this},j.FlxPoint.prototype.rotateY=function(a){var b=a*j.FlxPoint.TO_RADIANS,c=Math.cos(b),d=Math.sin(b),e=this.x*d+this.y*c;return this.y=e,this},j.FlxPoint.prototype.rotate=function(a){var b=a*j.FlxPoint.TO_RADIANS,c=Math.cos(b),d=Math.sin(b);return this.make(this.x*c-this.y*d,this.x*d+this.y*c),this},j.FlxPoint.prototype.distToPoint=function(a){var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)},j.FlxPoint.prototype.distToZero=function(){return this.distToPoint(j.FlxObject.pointZero)},j.FlxPoint.prototype.dist=function(a,b){var c=this.x-a,d=this.y-b;return Math.sqrt(c*c+d*d)},j.FlxPoint.prototype.distSquaredToPoint=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},j.FlxPoint.prototype.distSquared=function(a,b){var c=this.x-a,d=this.y-b;return c*c+d*d},j.FlxPoint.prototype.setFromPoint=function(a){return this.copyFrom(a)},j.FlxPoint.prototype.set=function(a,b){return this.make(a,b)},j.FlxPoint.prototype.print=function(){return"("+this.x+", "+this.y+")"},j.FlxPoint.prototype.equalsToPoint=function(a){return a.x==this.x&&a.y==this.y},j.FlxPoint.prototype.equals=function(a,b){return a==this.x&&b==this.y},j.FlxPoint.prototype.toString=function(){return"FlxPoint"},j.FlxRect=function(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0},j.FlxRect.prototype.x=0,j.FlxRect.prototype.y=0,j.FlxRect.prototype.width=0,j.FlxRect.prototype.height=0,j.FlxRect.prototype.getLeft=function(){return this.x},j.FlxRect.prototype.getRight=function(){return this.x+this.width},j.FlxRect.prototype.getTop=function(){return this.y},j.FlxRect.prototype.getBottom=function(){return this.y+this.height},j.FlxRect.prototype.make=function(a,b,c,d){return this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this},j.FlxRect.prototype.copyFrom=function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},j.FlxRect.prototype.copyTo=function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},j.FlxRect.prototype.copyFromFlash=function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},j.FlxRect.prototype.copyToFlash=function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},j.FlxRect.prototype.overlaps=function(a){return a.x+a.width>this.x&&a.x<this.x+this.width&&a.y+a.height>this.y&&a.y<this.y+this.height},j.FlxRect.prototype.contains=function(a,b){return a>this.x&&a<this.x+this.width&&b>this.y&&b<this.y+this.height},j.FlxRect.prototype.containsPoint=function(a){return this.contains(a.x,a.y)},j.FlxRect.prototype.containsRect=function(a){return this.contains(a.x,a.y)&&this.contains(a.x+a.width,a.y+a.height)},j.FlxRect.prototype.intersection=function(a){var b=this.containsPoint(new j.FlxPoint(a.x,a.y)),c=this.containsPoint(new j.FlxPoint(a.getRight(),a.getBottom()));return b&&c?(new j.FlxRect).copyFrom(a):b?new j.FlxRect(this.x,this.y,this.getRight()-this.x,this.getBottom()-this.y):this.containsBottomRight?new j.FlxRect(this.x,this.y,this.getRight()-this.x,this.getBottom()-this.y):new j.FlxRect},j.FlxRect.prototype.intersects=function(a){return this.containsPoint(new j.FlxPoint(a.x,a.y))||this.containsPoint(new j.FlxPoint(a.getRight(),a.getBottom()))},j.FlxRect.prototype.isEmpty=function(){return 0===this.width&&0===this.height},j.FlxRect.prototype.print=function(){return"(x: "+this.x+", y:"+this.y+", w: "+this.width+", h:"+this.height+")"},j.FlxRect.prototype.offset=function(a,b){this.x+=a,this.y+=b},j.FlxRect.prototype.toString=function(){return"FlxRect"},j.FlxBasic=function(){this.ID=-1,this.exists=!0,this.active=!0,this.visible=!0,this.alive=!0,this.ignoreDrawDebug=!1,this.autoClear=!0},j.FlxBasic.ACTIVECOUNT=0,j.FlxBasic.VISIBLECOUNT=0,j.FlxBasic.prototype.ID=0,j.FlxBasic.prototype.exists=!1,j.FlxBasic.prototype.active=!1,j.FlxBasic.prototype.visible=!1,j.FlxBasic.prototype.alive=!1,j.FlxBasic.prototype.cameras=null,j.FlxBasic.prototype.ignoreDrawDebug=!1,j.FlxBasic.prototype.autoClear=!1,j.FlxBasic.prototype._tween=null,j.FlxBasic.prototype._userData=null,j.FlxBasic.prototype.destroy=function(){this.autoClear&&this.hasTween()&&(this.clearTweens(!0),this._tween=null)},j.FlxBasic.prototype.preUpdate=function(){j.FlxBasic.ACTIVECOUNT++},j.FlxBasic.prototype.update=function(){},j.FlxBasic.prototype.postUpdate=function(){},j.FlxBasic.prototype.draw=function(){var a=j.FlxG.activeCamera;null===this.cameras&&(this.cameras=j.FlxG.cameras),-1!=this.cameras.indexOf(a)&&(j.FlxBasic.VISIBLECOUNT++,j.FlxG.visualDebug&&!this.ignoreDrawDebug&&this.drawDebug(a))},j.FlxBasic.prototype.drawDebug=function(){},j.FlxBasic.prototype.kill=function(){this.alive=!1,this.exists=!1},j.FlxBasic.prototype.revive=function(){this.alive=!0,this.exists=!0},j.FlxBasic.prototype.toString=function(){return"FlxBasic"},j.FlxBasic.prototype.addTween=function(a,b){var c=a;if(null!==c.parent)return j.FlxG.log("Cannot add a FlxTween object more than once."),a;c.parent=this,c.next=this._tween;var d=this._tween;return null!==this._tween&&(d.prev=a),this._tween=a,b&&this._tween.start(),a},j.FlxBasic.prototype.removeTween=function(a,b){var c=a;return c.parent!=this?(j.FlxG.log("Core object does not contain FlxTween."),a):(null!==c.next&&(c.next.prev=c.prev),null!==c.prev?c.prev.next=c.next:this._tween=null===c.next?null:c.next,c.next=c.prev=null,c.parent=null,b&&a.destroy(),a.active=!1,a)},j.FlxBasic.prototype.clearTweens=function(a){a=void 0===a?!1:a;for(var b,c=this._tween;null!==c;)b=c.next,this.removeTween(c,a),c=b},j.FlxBasic.prototype.updateTweens=function(){for(var a,b=this._tween;null!==b;)a=b,a.active&&(a.update(),b.finish&&b.finishTween()),b=b.next},j.FlxBasic.prototype.hasTween=function(){return null!==this._tween},j.FlxBasic.prototype.getUserData=function(){return this._userData},j.FlxBasic.prototype.setUserData=function(a){this._userData=a},j.FlxBasic.prototype.setUserData=function(a){this._userData=a},j.FlxObject=function(a,b,c,d){j.FlxObject.parent.constructor.apply(this),this.x=a||0,this.y=b||0,this.last=new j.FlxPoint(this.x,this.y),this.width=c||0,this.height=d||0,this.mass=1,this.elasticity=0,this.health=1,this.immovable=!1,this.immovableX=!1,this.immovableY=!1,this.moves=!0,this.touching=j.FlxObject.NONE,this.wasTouching=j.FlxObject.NONE,this.allowCollisions=j.FlxObject.ANY,this.velocity=new j.FlxPoint,this.acceleration=new j.FlxPoint,this.drag=new j.FlxPoint,this.maxVelocity=new j.FlxPoint(1e4,1e4),this.steerForce=new j.FlxPoint,this.angle=0,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e4,this.scrollFactor=new j.FlxPoint(1,1),this._flicker=!1,this._flickerTimer=0,this._point=new j.FlxPoint,this._rect=new j.FlxRect,this.path=null,this.pathSpeed=0,this.pathAngle=0,this._seeked=null},b(j.FlxObject,j.FlxBasic),j.FlxObject.LEFT=256,j.FlxObject.RIGHT=4096,j.FlxObject.UP=65536,j.FlxObject.DOWN=1048576,j.FlxObject.NONE=0,j.FlxObject.CEILING=j.FlxObject.UP,j.FlxObject.FLOOR=j.FlxObject.DOWN,j.FlxObject.WALL=j.FlxObject.LEFT|j.FlxObject.RIGHT,j.FlxObject.ANY=j.FlxObject.LEFT|j.FlxObject.RIGHT|j.FlxObject.UP|j.FlxObject.DOWN,j.FlxObject.OVERLAP_BIAS=4,j.FlxObject.PATH_FORWARD=0,j.FlxObject.PATH_BACKWARD=1,j.FlxObject.PATH_LOOP_FORWARD=16,j.FlxObject.PATH_LOOP_BACKWARD=256,j.FlxObject.PATH_YOYO=4096,j.FlxObject.PATH_HORIZONTAL_ONLY=65536,j.FlxObject.PATH_VERTICAL_ONLY=1048576,j.FlxObject.prototype.x=0,j.FlxObject.prototype.y=0,j.FlxObject.prototype.width=0,j.FlxObject.prototype.height=0,j.FlxObject.prototype.immovable=!1,j.FlxObject.prototype.immovableX=!1,j.FlxObject.prototype.immovableY=!1,j.FlxObject.prototype.velocity=null,j.FlxObject.prototype.mass=0,j.FlxObject.prototype.elasticity=0,j.FlxObject.prototype.acceleration=null,j.FlxObject.prototype.drag=null,j.FlxObject.prototype.maxVelocity=null,j.FlxObject.prototype.angle=0,j.FlxObject.prototype.angularVelocity=0,j.FlxObject.prototype.angularAcceleration=0,j.FlxObject.prototype.angularDrag=0,j.FlxObject.prototype.maxAngular=0,j.FlxObject.pointZero=new j.FlxPoint,j.FlxObject.prototype.scrollFactor=null,j.FlxObject.prototype._flicker=0,j.FlxObject.prototype._flickerTimer=0,j.FlxObject.prototype.health=0,j.FlxObject.prototype._point=null,j.FlxObject.prototype._rect=null,j.FlxObject.prototype.moves=!1,j.FlxObject.prototype.touching=0,j.FlxObject.prototype.wasTouching=0,j.FlxObject.prototype.allowCollisions=0,j.FlxObject.prototype.last=null,j.FlxObject.prototype.path=null,j.FlxObject.prototype.pathSpeed=0,j.FlxObject.prototype.pathAngle=0,j.FlxObject.prototype._pathNodeIndex=0,j.FlxObject.prototype._pathMode=0,j.FlxObject.prototype._pathInc=0,j.FlxObject.prototype._pathRotate=null,j.FlxObject.prototype._seeked=null,j.FlxObject.prototype.steerForce=null,j.FlxObject.prototype.destroy=function(){this.velocity=null,this.acceleration=null,this.drag=null,this.maxVelocity=null,this.scrollFactor=null,this._point=null,this._rect=null,this.last=null,this.cameras=null,null!==this.path&&this.path.destroy(),this.path=null,this._seeked=null,j.FlxObject.parent.destroy.apply(this)
},j.FlxObject.prototype.preUpdate=function(){j.FlxBasic.ACTIVECOUNT++,0!==this._flickerTimer&&(this._flicker=!this._flicker,this._flickerTimer>0&&(this._flickerTimer=this._flickerTimer-j.FlxG.elapsed,this._flickerTimer<=0&&(this._flickerTimer=0,this._flicker=!1))),this.last.x=this.x,this.last.y=this.y,null!==this.path&&0!==this.pathSpeed&&null!==this.path.nodes[this._pathNodeIndex]&&this.updatePathMotion(),null!==this._seeked&&this.updateSeekMotion()},j.FlxObject.prototype.postUpdate=function(){this.moves&&this.updateMotion(),this.wasTouching=this.touching,this.touching=j.FlxObject.NONE},j.FlxObject.prototype.updateMotion=function(){var a=0,b=0;b=(j.FlxU.computeVelocity(this.angularVelocity,this.angularAcceleration,this.angularDrag,this.maxAngular)-this.angularVelocity)/2,this.angularVelocity+=b,this.angle+=this.angularVelocity*j.FlxG.elapsed,this.angularVelocity+=b,b=(j.FlxU.computeVelocity(this.velocity.x,this.acceleration.x,this.drag.x,this.maxVelocity.x)-this.velocity.x)/2,this.velocity.x+=b,a=this.velocity.x*j.FlxG.elapsed,this.velocity.x+=b,this.x+=a,b=(j.FlxU.computeVelocity(this.velocity.y,this.acceleration.y,this.drag.y,this.maxVelocity.y)-this.velocity.y)/2,this.velocity.y+=b,a=this.velocity.y*j.FlxG.elapsed,this.velocity.y+=b,this.y+=a},j.FlxObject.prototype.draw=function(){var a=j.FlxG.activeCamera;null===this.cameras&&(this.cameras=j.FlxG.cameras),-1!=this.cameras.indexOf(a)&&this.onScreen(a)&&(j.FlxBasic.VISIBLECOUNT++,j.FlxG.visualDebug&&!this.ignoreDrawDebug&&this.drawDebug(a))},j.FlxObject.prototype.drawDebug=function(a){a=a||j.FlxG.camera;var b=this.x-f(a.scroll.x*this.scrollFactor.x),c=this.y-f(a.scroll.y*this.scrollFactor.y);b=f(b+(b>0?1e-7:-1e-7)),c=f(c+(c>0?1e-7:-1e-7));var d=this.width!=f(this.width)?this.width:this.width-1,e=this.height!=f(this.height)?this.height:this.height-1,g=j.FlxG.flashGfx;g.clear(),g.moveTo(b,c);var h;this.allowCollisions?(this.allowCollisions!=j.FlxObject.ANY&&(h=j.FlxG.PINK),h=this.immovable?j.FlxG.GREEN:j.FlxG.RED):h=j.FlxG.BLUE,g.lineStyle(1,h,.5),g.lineTo(b+d,c),g.lineTo(b+d,c+e),g.lineTo(b,c+e),g.lineTo(b,c),a.buffer.draw(j.FlxG.flashGfxSprite)},j.FlxObject.prototype.followPath=function(a,b,c,d){return null===a||a.nodes.length<=0?(j.FlxG.log("WARNING: Paths need at least one node in them to be followed."),void 0):(this.path=a,this.pathSpeed=Math.abs(b||100),this._pathMode=c||j.FlxObject.PATH_FORWARD,this._pathRotate=void 0===d?!1:d,this._pathMode==j.FlxObject.PATH_BACKWARD||this._pathMode==j.FlxObject.PATH_LOOP_BACKWARD?(this._pathNodeIndex=this.path.nodes.length-1,this._pathInc=-1):(this._pathNodeIndex=0,this._pathInc=1),void 0)},j.FlxObject.prototype.stopFollowingPath=function(a){this.pathSpeed=0,this.velocity.x=0,this.velocity.y=0,a&&null!==this.path&&(this.path.destroy(),this.path=null)},j.FlxObject.prototype.advancePath=function(a){if(a=void 0===a?!0:a){var b=this.path.nodes[this._pathNodeIndex];null!==b&&(0===(this._pathMode&j.FlxObject.PATH_VERTICAL_ONLY)&&(this.x=b.x-.5*this.width),0===(this._pathMode&j.FlxObject.PATH_HORIZONTAL_ONLY)&&(this.y=b.y-.5*this.height))}return this._pathNodeIndex+=this._pathInc,(this._pathMode&j.FlxObject.PATH_BACKWARD)>0?this._pathNodeIndex<0&&(this._pathNodeIndex=0,this.stopFollowingPath(!1)):(this._pathMode&j.FlxObject.PATH_LOOP_FORWARD)>0?this._pathNodeIndex>=this.path.nodes.length&&(this._pathNodeIndex=0):(this._pathMode&j.FlxObject.PATH_LOOP_BACKWARD)>0?this._pathNodeIndex<0&&(this._pathNodeIndex=this.path.nodes.length-1,this._pathNodeIndex<0&&(this._pathNodeIndex=0)):(this._pathMode&j.FlxObject.PATH_YOYO)>0?this._pathInc>0?this._pathNodeIndex>=this.path.nodes.length&&(this._pathNodeIndex=this.path.nodes.length-2,this._pathNodeIndex<0&&(this._pathNodeIndex=0),this._pathInc=-this._pathInc):this._pathNodeIndex<0&&(this._pathNodeIndex=1,this._pathNodeIndex>=this.path.nodes.length&&(this._pathNodeIndex=this.path.nodes.length-1),this._pathNodeIndex<0&&(this._pathNodeIndex=0),this._pathInc=-this._pathInc):this._pathNodeIndex>=this.path.nodes.length&&(this._pathNodeIndex=this.path.nodes.length-1,this.stopFollowingPath(!1)),this.path.nodes[this._pathNodeIndex]},j.FlxObject.prototype.updatePathMotion=function(){this._point.x=this.x+.5*this.width,this._point.y=this.y+.5*this.height;var a=this.path.nodes[this._pathNodeIndex],b=a.x-this._point.x,c=a.y-this._point.y,d=(this._pathMode&j.FlxObject.PATH_HORIZONTAL_ONLY)>0,e=(this._pathMode&j.FlxObject.PATH_VERTICAL_ONLY)>0;d?(b>0?b:-b)<this.pathSpeed*j.FlxG.elapsed&&(a=this.advancePath()):e?(c>0?c:-c)<this.pathSpeed*j.FlxG.elapsed&&(a=this.advancePath()):Math.sqrt(b*b+c*c)<this.pathSpeed*j.FlxG.elapsed&&(a=this.advancePath()),0!==this.pathSpeed&&(this._point.x=this.x+.5*this.width,this._point.y=this.y+.5*this.height,d||this._point.y==a.y?(this.velocity.x=this._point.x<a.x?this.pathSpeed:-this.pathSpeed,this.pathAngle=this.velocity.x<0?-90:90,d||(this.velocity.y=0)):e||this._point.x==a.x?(this.velocity.y=this._point.y<a.y?this.pathSpeed:-this.pathSpeed,this.pathAngle=this.velocity.y<0?0:180,e||(this.velocity.x=0)):(this.pathAngle=j.FlxU.getAngle(this._point,a),j.FlxU.rotatePoint(0,this.pathSpeed,0,0,this.pathAngle,this.velocity)),this._pathRotate&&(this.angularVelocity=0,this.angularAcceleration=0,this.angle=this.pathAngle))},j.FlxObject.prototype.updateSeekMotion=function(){this._point.x=this._seeked.x+f(this._seeked.width/2)-(this.x+f(this.width/2)),this._point.y=this._seeked.y+f(this._seeked.height/2)-(this.x+f(this.height/2))},j.FlxObject.prototype.seek=function(a){this._seeked=a},j.FlxObject.prototype.stopSeek=function(){this._seeked=null},j.FlxObject.prototype.overlaps=function(a,b,c){if(null===a)return!1;if(a instanceof j.FlxGroup){for(var d=!1,e=0,f=a.members;length>e;)this.overlaps(f[e++],b,c)&&(d=!0);return d}if(a instanceof j.FlxTilemap)return a.overlaps(this,b,c);var g=a;if(!b)return g.x+g.width>this.x&&g.x<this.x+this.width&&g.y+g.height>this.y&&g.y<this.y+this.height;c=c||j.FlxG.camera;var h=g.getScreenXY(null,c);return this.getScreenXY(this._point,c),h.x+g.width>this._point.x&&h.x<this._point.x+this.width&&h.y+g.height>this._point.y&&h.y<this._point.y+this.height},j.FlxObject.prototype.overlapsAt=function(a,b,c,d,e){if(c instanceof j.FlxGroup){for(var g=!1,h=0,i=c.members;h<i.length;)this.overlapsAt(a,b,i[h++],d,e)&&(g=!0);return g}if(c instanceof j.FlxTilemap){var k=c;return k.overlapsAt(k.x-(a-this.x),k.y-(b-this.y),this,d,e)}var l=c;if(!d)return l.x+l.width>a&&l.x<a+this.width&&l.y+l.height>b&&l.y<b+this.height;e=e||j.FlxG.camera;var m=l.getScreenXY(null,e);return this._point.x=a-f(e.scroll.x*this.scrollFactor.x),this._point.y=b-f(e.scroll.y*this.scrollFactor.y),this._point.x+=this._point.x>0?1e-7:-1e-7,this._point.y+=this._point.y>0?1e-7:-1e-7,m.x+l.width>this._point.x&&m.x<this._point.x+this.width&&m.y+l.height>this._point.y&&m.y<this._point.y+this.height},j.FlxObject.prototype.overlapsPoint=function(a,b,c){if(!b)return a.x>this.x&&a.x<this.x+this.width&&a.y>this.y&&a.y<this.y+this.height;c=c||j.FlxG.camera;var d=a.x-c.scroll.x,e=a.y-c.scroll.y;return this.getScreenXY(this._point,c),d>this._point.x&&d<this._point.x+this.width&&e>this._point.y&&e<this._point.y+this.height},j.FlxObject.prototype.onScreen=function(a){return a=a||j.FlxG.camera,this.getScreenXY(this._point,a),this._point.x+this.width>0&&this._point.x<a.width&&this._point.y+this.height>0&&this._point.y<a.height},j.FlxObject.prototype.getScreenXY=function(a,b){return null===a&&(a=new j.FlxPoint),b=b||j.FlxG.camera,a.x=this.x-f(b.scroll.x*this.scrollFactor.x),a.y=this.y-f(b.scroll.y*this.scrollFactor.y),a.x+=a.x>0?1e-7:-1e-7,a.y+=a.y>0?1e-7:-1e-7,a},j.FlxObject.prototype.flicker=function(a){this._flickerTimer=a||1,0===this._flickerTimer&&(this._flicker=!1)},j.FlxObject.prototype.getFlickering=function(){return 0!==this._flickerTimer},j.FlxObject.prototype.getSolid=function(){return(this.allowCollisions&j.FlxObject.ANY)>j.FlxObject.NONE},j.FlxObject.prototype.setSolid=function(a){this.allowCollisions=a?j.FlxObject.ANY:j.FlxObject.NONE},j.FlxObject.prototype.getMidpoint=function(a){return null===a&&(a=new j.FlxPoint),a.x=this.x+.5*this.width,a.y=this.y+.5*this.height,a},j.FlxObject.prototype.reset=function(a,b){this.revive(),this.touching=j.FlxObject.NONE,this.wasTouching=j.FlxObject.NONE,this.x=a,this.y=b,this.last.x=this.x,this.last.y=this.y,this.velocity.x=0,this.velocity.y=0},j.FlxObject.prototype.isTouching=function(a){return(this.touching&a)>j.FlxObject.NONE},j.FlxObject.prototype.justTouched=function(a){return(this.touching&a)>j.FlxObject.NONE&&(this.wasTouching&a)<=j.FlxObject.NONE},j.FlxObject.prototype.hurt=function(a){this.health=this.health-a,this.health<=0&&this.kill()},j.FlxObject.separate=function(a,b){var c=j.FlxObject.separateX(a,b),d=j.FlxObject.separateY(a,b);return c||d},j.FlxObject.separateX=function(a,b){var c=a.immovable||a.immovableX,d=b.immovable||a.immovableX;if(c&&d)return!1;if(a instanceof j.FlxTilemap)return a.overlapsWithCallback(b,j.FlxObject.separateX);if(b instanceof j.FlxTilemap)return b.overlapsWithCallback(a,j.FlxObject.separateX,!0);var e=0,f=a.x-a.last.x,g=b.x-b.last.x;if(f!=g){var h=f>0?f:-f,i=g>0?g:-g,k=a.x-(f>0?f:0),l=a.last.y,m=a.width+(f>0?f:-f),n=a.height,o=b.x-(g>0?g:0),p=b.last.y,q=b.width+(g>0?g:-g),r=b.height;if(k+m>o&&o+q>k&&l+n>p&&p+r>l){var s=h+i+j.FlxObject.OVERLAP_BIAS;f>g?(e=a.x+a.width-b.x,!(e>s)&&a.allowCollisions&j.FlxObject.RIGHT&&b.allowCollisions&j.FlxObject.LEFT?(a.touching|=j.FlxObject.RIGHT,b.touching|=j.FlxObject.LEFT):e=0):g>f&&(e=a.x-b.width-b.x,!(-e>s)&&a.allowCollisions&j.FlxObject.LEFT&&b.allowCollisions&j.FlxObject.RIGHT?(a.touching|=j.FlxObject.LEFT,b.touching|=j.FlxObject.RIGHT):e=0)}}if(0!==e){var t=a.velocity.x,u=b.velocity.x;if(c||d)c?d||(b.x+=e,b.velocity.x=t-u*b.elasticity):(a.x=a.x-e,a.velocity.x=u-t*a.elasticity);else{e*=.5,a.x=a.x-e,b.x+=e;var v=Math.sqrt(u*u*b.mass/a.mass)*(u>0?1:-1),w=Math.sqrt(t*t*a.mass/b.mass)*(t>0?1:-1),x=.5*(v+w);v-=x,w-=x,a.velocity.x=x+v*a.elasticity,b.velocity.x=x+w*b.elasticity}return!0}return!1},j.FlxObject.separateY=function(a,b){var c=a.immovable||a.immovableY,d=b.immovable||a.immovableY;if(c&&d)return!1;if(a instanceof j.FlxTilemap)return a.overlapsWithCallback(b,j.FlxObject.separateY);if(b instanceof j.FlxTilemap)return b.overlapsWithCallback(a,j.FlxObject.separateY,!0);var e=0,f=a.y-a.last.y,g=b.y-b.last.y;if(f!=g){var h=f>0?f:-f,i=g>0?g:-g,k=a.x,l=a.y-(f>0?f:0),m=a.width,n=a.height+h,o=b.x,p=b.y-(g>0?g:0),q=b.width,r=b.height+i;if(k+m>o&&o+q>k&&l+n>p&&p+r>l){var s=h+i+j.FlxObject.OVERLAP_BIAS;f>g?(e=a.y+a.height-b.y,!(e>s)&&a.allowCollisions&j.FlxObject.DOWN&&b.allowCollisions&j.FlxObject.UP?(a.touching|=j.FlxObject.DOWN,b.touching|=j.FlxObject.UP):e=0):g>f&&(e=a.y-b.height-b.y,!(-e>s)&&a.allowCollisions&j.FlxObject.UP&&b.allowCollisions&j.FlxObject.DOWN?(a.touching|=j.FlxObject.UP,b.touching|=j.FlxObject.DOWN):e=0)}}if(0!==e){var t=a.velocity.y,u=b.velocity.y;if(c||d)c?d||(b.y+=e,b.velocity.y=t-u*b.elasticity,a.active&&a.moves&&g>f&&(b.x+=a.x-a.last.x)):(a.y=a.y-e,a.velocity.y=u-t*a.elasticity,b.active&&b.moves&&f>g&&(a.x+=b.x-b.last.x));else{e*=.5,a.y=a.y-e,b.y+=e;var v=Math.sqrt(u*u*b.mass/a.mass)*(u>0?1:-1),w=Math.sqrt(t*t*a.mass/b.mass)*(t>0?1:-1),x=.5*(v+w);v-=x,w-=x,a.velocity.y=x+v*a.elasticity,b.velocity.y=x+w*b.elasticity}return!0}return!1},j.FlxObject.prototype.toString=function(){return"FlxObject"},j.FlxPath=function(a){this.nodes=null===a||void 0===a?[]:a,this._point=new j.FlxPoint,this.debugScrollFactor=new j.FlxPoint(1,1),this.debugColor=j.FlxG.WHITE,this.ignoreDrawDebug=!1;var b=j.FlxPath.getManager();null!==b&&b.add(this)},j.FlxPath.prototype.nodes=null,j.FlxPath.prototype.debugColor=0,j.FlxPath.prototype.debugScrollFactor=null,j.FlxPath.prototype.ignoreDrawDebug=!1,j.FlxPath.prototype._point=null,j.FlxPath.prototype.destroy=function(){var a=j.FlxPath.getManager();null!==a&&a.remove(this),this.debugScrollFactor=null,this._point=null,this.nodes=null},j.FlxPath.prototype.add=function(a,b){this.nodes.push(new j.FlxPoint(a,b))},j.FlxPath.prototype.addAt=function(a,b,c){c>this.nodes.length&&(c=this.nodes.length),this.nodes.splice(c,0,new j.FlxPoint(a,b))},j.FlxPath.prototype.addPoint=function(a,b){b?this.nodes.push(a):this.nodes.push(new j.FlxPoint(a.x,a.y))},j.FlxPath.prototype.addPointAt=function(a,b,c){b>this.nodes.length&&(b=this.nodes.length),c?this.nodes.splice(b,0,a):this.nodes.splice(b,0,new j.FlxPoint(a.x,a.y))},j.FlxPath.prototype.remove=function(a){var b=this.nodes.indexOf(a);return b>=0?this.nodes.splice(b,1)[0]:null},j.FlxPath.prototype.removeAt=function(a){return this.nodes.length<=0?null:(a>=this.nodes.length&&(a=this.nodes.length-1),this.nodes.splice(a,1)[0])},j.FlxPath.prototype.head=function(){return this.nodes.length>0?this.nodes[0]:null},j.FlxPath.prototype.tail=function(){return this.nodes.length>0?this.nodes[this.nodes.length-1]:null},j.FlxPath.prototype.drawDebug=function(a){if(!(this.nodes.length<=0)){(null===a||void 0===a)&&(a=j.FlxG.camera);var b=j.FlxG.flashGfx;b.clearRect(0,0,j.FlxG.flashGfxSprite.width,j.FlxG.flashGfxSprite.height);for(var c,d,e=0,g=this.nodes.length;g>e;){b.beginPath(),c=this.nodes[e],this._point.x=c.x-f(a.scroll.x*this.debugScrollFactor.x),this._point.y=c.y-f(a.scroll.y*this.debugScrollFactor.y),this._point.x=f(this._point.x+(this._point.x>0?1e-7:-1e-7)),this._point.y=f(this._point.y+(this._point.y>0?1e-7:-1e-7));var h=2;(0===e||e==g-1)&&(h*=2);var i=j.FlxG.GREEN;g>1&&(0===e?i=j.FlxG.GREEN:e==g-1&&(i=j.FlxG.RED)),b.fillStyle=m.makeRGBA(j.FlxU.addAlphaToColor(i,1)),b.fillRect(this._point.x-.5*h,this._point.y-.5*h,h,h);var k=1;g-1>e?d=this.nodes[e+1]:(d=this.nodes[0],k=.35),b.moveTo(this._point.x,this._point.y),b.lineWidth=1,b.strokeStyle=m.makeRGBA(this.debugColor,k),this._point.x=d.x-f(a.scroll.x*this.debugScrollFactor.x),this._point.y=d.y-f(a.scroll.y*this.debugScrollFactor.y),this._point.x=f(this._point.x+(this._point.x>0?1e-7:-1e-7)),this._point.y=f(this._point.y+(this._point.y>0?1e-7:-1e-7)),b.lineTo(this._point.x,this._point.y),e++,b.stroke()}a.buffer.copyPixels(j.FlxG.flashGfxSprite,new j.FlxRect(0,0,j.FlxG.flashGfxSprite.width,j.FlxG.flashGfxSprite.height),new j.FlxPoint(0,0))}},j.FlxPath.getManager=function(){return j.FlxG.getPlugin(j.plugin.DebugPathDisplay)},j.FlxPath.prototype.toString=function(){return"FlxPath"},j.FlxU=function(){},j.FlxU.PI=3.1415927,j.FlxU.TWO_PI=2*j.FlxU.PI,j.FlxU.HALF_PI=.5*j.FlxU.PI,j.FlxU.openURL=function(a){var b=window.open(a,"_blank");b.focus()},j.FlxU.getCountry=function(){return""},j.FlxU.getHour=function(){var a=new Date;return a.getHours()+":"+a.getMinutes()},j.FlxU.getScoreFormat=function(a,b,c){b=b||5;for(var d=a+"",e=d.length;b>e;e++)d="0"+d;return c?j.FlxU.formatMoney(f(d),!1,!0):d},j.FlxU.abs=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.floor=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.ceil=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.round=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.roundWithDec=function(a,b){var c=Math.pow(10,b);a*=c;var d=Math.round(a);return d/c},j.FlxU.min=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.max=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.bound=function(a,b,c){var d=b>a?b:a;return d>c?c:d},j.FlxU.srand=function(a){return 69621*f(2147483647*a)%2147483647/2147483647},j.FlxU.random=function(a){return void 0===a&&(a=Math.random()),0===a&&(a=Number.MAX_VALUE),a>=1?(a%1===0&&(a/=Math.PI),a%=1):0>a&&(a=a%1+1),0x87fa7ffef00b*a%2147483647/2147483647},j.FlxU.shuffle=function(a,b){for(var c,d,e,f=0;b>f;)c=Math.random()*a.length,d=Math.random()*a.length,e=a[d],a[d]=a[c],a[c]=e,f++;return a},j.FlxU.getRandom=function(a,b,c){if(null!==a&&void 0!==a){var d=c;if((0===d||d>a.length-b)&&(d=a.length-b),d>0)return a[b+g(Math.random()*d)]}return null},j.FlxU.getTicks=function(){return e()},j.FlxU.formatTicks=function(a,b){return(b-a)/1e3+"s"},j.FlxU.makeColor=function(a,b,c,d){return g((255&(d>1?d:255*(d||1)))<<24|(255&a)<<16|(255&b)<<8|255&c)},j.FlxU.addAlphaToColor=function(a,b){var c=j.FlxU.getRGBA(a),d=c[0],e=c[1],h=c[2];return b=void 0===b||null===b?c[3]:b,1>=b&&(b=f(255*b)),g((255&b)<<24|(255&d)<<16|(255&e)<<8|255&h)},j.FlxU.makeColorFromHSB=function(a,b,c,d){var e,f,h;if(0===b)e=c,f=c,h=c;else{360==a&&(a=0);var i=a/60,j=a/60-i,k=c*(1-b),l=c*(1-b*j),m=c*(1-b*(1-j));switch(i){case 0:e=c,f=m,h=k;break;case 1:e=l,f=c,h=k;break;case 2:e=k,f=c,h=m;break;case 3:e=k,f=l,h=c;break;case 4:e=m,f=k,h=c;break;case 5:e=c,f=k,h=l;break;default:e=0,f=0,h=0}}return(255&(d>1?d:255*d))<<24|g(255*e)<<16|g(255*f)<<8|g(255*h)},j.FlxU.getRGBA=function(a,b){return(void 0===b||null===b)&&(b=[]),b[0]=a>>16&255,b[1]=a>>8&255,b[2]=255&a,b[3]=(a>>24&255)/255,b},j.FlxU.getHSB=function(a,b){(null===b||void 0===b)&&(b=[]);var c=Number(a>>16&255)/255,d=Number(a>>8&255)/255,e=Number(255&a)/255,f=c>d?c:d,g=f>e?f:e;f=c>d?d:c;var h=f>e?e:f,i=g-h;return b[2]=g,b[1]=0,b[0]=0,0!==g&&(b[1]=i/g),0!==b[1]&&(c==g?b[0]=(d-e)/i:d==g?b[0]=2+(e-c)/i:e==g&&(b[0]=4+(c-d)/i),b[0]*=60,b[0]<0&&(b[0]+=360)),b[3]=Number(a>>24&255)/255,b},j.FlxU.argbToRgba=function(a){return a<<8|a>>>24},j.FlxU.multiplyColors=function(a,b){var c=g((a>>16&255)*(b>>16&255)*.00392),d=g((a>>8&255)*(b>>8&255)*.00392),e=g((255&a)*(255&b)*.00392),f=g((a>>24&255)*(b>>24&255)*.00392);return j.FlxU.makeColor(c,d,e,f)},j.FlxU.formatTime=function(a,b){var c=f(a/60)+":",d=f(a)%60;return 10>d&&(c+="0"),c+=d,b&&(c+=".",d=100*(a-f(a)),10>d&&(c+="0"),c+=d),c},j.FlxU.formatArray=function(a){if(null===a||void 0===a||a.length<=0)return"";for(var b=a[0].toString(),c=1,d=a.length;d>c;)b+=", "+a[c++].toString();return b},j.FlxU.formatMoney=function(a,b,c){for(var d,e=a,g="",h="",i="";e>0;)g.length>0&&h.length<=0&&(h=c?",":"."),i="",d=e-1e3*f(e/1e3),e/=1e3,e>0&&(100>d&&(i+="0"),10>d&&(i+="0")),g=i+d+h+g;return b&&(e=f(100*a)-100*f(a),g+=(c?".":",")+e,10>e&&(g+="0")),g},j.FlxU.getClassName=function(a){return a.toString()},j.FlxU.compareClassNames=function(a,b){return a.toString()==b.toString()},j.FlxU.getClass=function(){throw new Error("Not implemented in Flixel-JS due to HTML5!!")},j.FlxU.getClassFromObject=function(){throw new Error("Not implemented in Flixel-JS due to HTML5!!")},j.FlxU.computeVelocity=function(a,b,c,d,e){if(d=d||1e3,e=e||j.FlxG.elapsed,0!==b)a+=b*e;else if(0!==c){var f=c*e;a-f>0?a-=f:0>a+f?a+=f:a=0}return 0!==a&&1e4!=d&&(a>d?a=d:-d>a&&(a=-d)),a},j.FlxU.rotatePoint=function(a,b,c,d,e,f){for(var g=0,h=0,i=e*-.017453293;-3.14159265>i;)i+=6.28318531;for(;i>3.14159265;)i-=6.28318531;0>i?(g=1.27323954*i+.405284735*i*i,g=0>g?.225*(g*-g-g)+g:.225*(g*g-g)+g):(g=1.27323954*i-.405284735*i*i,g=0>g?.225*(g*-g-g)+g:.225*(g*g-g)+g),i+=1.57079632,i>3.14159265&&(i-=6.28318531),0>i?(h=1.27323954*i+.405284735*i*i,h=0>h?.225*(h*-h-h)+h:.225*(h*h-h)+h):(h=1.27323954*i-.405284735*i*i,h=0>h?.225*(h*-h-h)+h:.225*(h*h-h)+h);var k=a-c,l=d+b;return null===f&&(f=new j.FlxPoint),f.x=c+h*k-g*l,f.y=d-g*k-h*l,f},j.FlxU.getAngle=function(a,b){var c=b.x-a.x,d=b.y-a.y;if(0===c&&0===d)return 0;var e=.7853981625,f=3*e,g=0>d?-d:d,h=0;return h=c>=0?e-e*((c-g)/(c+g)):f-e*((c+g)/(g-c)),h=57.2957796*(0>d?-h:h),h>90?h-=270:h+=90,h},j.FlxU.getDistance=function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)},j.FlxU.acos=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.asin=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.sin=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.cos=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.sqr=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.sqrt=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.rint=function(a){return a>0?f(a+.5):0>a?-f(-a+.5):0},j.FlxU.exp=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.pow=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.log=function(){throw new Error("Do not use FlxU math stuff, use Math. it's faster")},j.FlxU.fillArray=function(a,b){a=a||0,b=b||10;for(var c=[],d=a;b>d;d++)c[d]=d;return c},j.FlxU.ceilPowerOfTwo=function(a){return a--,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,a++,a},j.FlxU.floorPowerOfTwo=function(a){return j.FlxU.ceilPowerOfTwo(a)>>1},j.FlxU.create2DArray=function(a,b){for(var c=new Array(a),d=0;a>d;d++)c[d]=new Array(b);return c},j.FlxU.prototype.toString=function(){return"FlxU"},j.FlxG=function(){},j.FlxG.LIBRARY_NAME="Flixel",j.FlxG.LIBRARY_MAJOR_VERSION=2,j.FlxG.LIBRARY_MINOR_VERSION=3,j.FlxG.DEBUGGER_STANDARD=0,j.FlxG.DEBUGGER_MICRO=1,j.FlxG.DEBUGGER_BIG=2,j.FlxG.DEBUGGER_TOP=3,j.FlxG.DEBUGGER_LEFT=4,j.FlxG.DEBUGGER_RIGHT=5,j.FlxG.UID=0,j.FlxG.DEVICE_ID=0,j.FlxG.RED=4294901778,j.FlxG.GREEN=4278252069,j.FlxG.BLUE=4278227177,j.FlxG.PINK=4293926655,j.FlxG.WHITE=4294967295,j.FlxG.BLACK=4278190080,j.FlxG._game=null,j.FlxG.paused=!1,j.FlxG.debug=!1,j.FlxG._disablePause=!1,j.FlxG.elapsed=0,j.FlxG.timeScale=0,j.FlxG.width=0,j.FlxG.height=0,j.FlxG.worldBounds=null,j.FlxG.worldDivisions=0,j.FlxG.screenWidth=0,j.FlxG.screenHeight=0,j.FlxG.visualDebug=!1,j.FlxG.mobile=!1,j.FlxG.globalSeed=0,j.FlxG.levels=null,j.FlxG.level=0,j.FlxG.scores=null,j.FlxG.score=0,j.FlxG.saves=null,j.FlxG.save=null,j.FlxG.mouse=null,j.FlxG.touch=null,j.FlxG.keys=null,j.FlxG.music=null,j.FlxG.sounds=null,j.FlxG.volumeHandler=null,j.FlxG.cameras=null,j.FlxG.displayList=null,j.FlxG.camera=null,j.FlxG.useBufferLocking=!1,j.FlxG._cameraRect=null,j.FlxG.plugins=null,j.FlxG.flashGfxSprite=null,j.FlxG.flashGfx=null,j.FlxG._cache=null,j.FlxG.activeCamera=null,j.FlxG._assetManager=null,j.FlxG.tweener=new j.FlxBasic,j.FlxG.stateChange=!1,j.FlxG.stateStack=null,j.FlxG.basicPoint=new j.FlxPoint(1,1),j.FlxG.checkLicense=!1,j.FlxG.withAdmob=!1,j.FlxG.model="",j.FlxG.systemName="",j.FlxG.isInternetActive=!1,j.FlxG.isOuya=!1,j.FlxG.device=null,j.FlxG.soundManager=null,j.FlxG.loaderCache=null,j.FlxG.scaleManager=null,j.FlxG.getLibraryName=function(){return j.FlxG.LIBRARY_NAME+" v"+j.FlxG.LIBRARY_MAJOR_VERSION+"."+j.FlxG.LIBRARY_MINOR_VERSION},j.FlxG.log=function(a,b){b=b||"Flixel",null!==j.FlxG._game&&null!==j.FlxG._game._debugger?null!==a?j.FlxG._game._debugger.log.add(b+": "+(a instanceof Array?j.FlxU.formatArray(a):a.toString())):j.FlxG._game._debugger.log.add(b+": Data is empty -> stackTrace | "+a):null!==a?console.log(b+": "+a):console.log(b+": Data is empty -> stackTrace | "+a)},j.FlxG.printStackTrace=function(){j.FlxG.log("","NOT IMPLEMENTED IN HTLM5")},j.FlxG.setDisablePause=function(a){j.FlxG._disablePause=a},j.FlxG.getDisablePause=function(){return j.FlxG._disablePause},j.FlxG.getPause=function(){return j.FlxG.paused},j.FlxG.getGame=function(){return j.FlxG._game},j.FlxG.setPause=function(a){var b;return j.FlxG._disablePause?(b=j.FlxG.paused,j.FlxG.paused=a,j.FlxG.paused!=b&&(j.FlxG.paused?j.FlxG.pauseAudio():j.FlxG.resumeAudio()),void 0):(b=j.FlxG.paused,j.FlxG.paused=a,j.FlxG.paused!=b&&(j.FlxG.paused?(j.FlxG.pauseAudio(),null!==j.FlxG.getStage()&&j.FlxG.getStage().dispatchEvent(j.plugin.PauseEvent.getEvent(j.plugin.PauseEvent.PAUSE_IN))):(j.FlxG.resumeAudio(),null!==j.FlxG.getStage()&&j.FlxG.getStage().dispatchEvent(j.plugin.PauseEvent.getEvent(j.plugin.PauseEvent.PAUSE_OUT)))),void 0)},j.FlxG.watch=function(a,b,c){null!==j.FlxG._game&&null!==j.FlxG._game._debugger&&j.FlxG._game._debugger.watch.add(a,b,c)},j.FlxG.unwatch=function(a,b){null!==j.FlxG._game&&null!==j.FlxG._game._debugger&&j.FlxG._game._debugger.watch.remove(a,b)},j.FlxG.getFramerate=function(){return 1e3/j.FlxG._game._step},j.FlxG.setFramerate=function(a){j.FlxG._game._step=1e3/a,j.FlxG._game._maxAccumulation<j.FlxG._game._step&&(j.FlxG._game._maxAccumulation=j.FlxG._game._step)},j.FlxG.getFlashFramerate=function(){return null!==j.FlxG._game.stage?j.FlxG._game.stage.frameRate:0},j.FlxG.setFlashFramerate=function(a){j.FlxG._game._flashFramerate=a,null!==j.FlxG._game.stage&&(j.FlxG._game.stage.frameRate=j.FlxG._game._flashFramerate),j.FlxG._game._maxAccumulation=2e3/j.FlxG._game._flashFramerate-1,j.FlxG._game._maxAccumulation<j.FlxG._game._step&&(j.FlxG._game._maxAccumulation=j.FlxG._game._step)},j.FlxG.fullscreen=function(){j.FlxG.scaleManager.isFullScreen()?j.FlxG.scaleManager.stopFullScreen():j.FlxG.scaleManager.startFullScreen()},j.FlxG.random=function(){return j.FlxG.globalSeed=j.FlxU.srand(j.FlxG.globalSeed),j.FlxG.globalSeed},j.FlxG.shuffle=function(a,b){for(var c,d,e,f=0;b>f;)c=j.FlxG.random()*a.length,d=j.FlxG.random()*a.length,e=a[d],a[d]=a[c],a[c]=e,f++;return a},j.FlxG.getRandom=function(a,b,c){if(null!==a){var d=c;if((0===d||d>a.length-b)&&(d=a.length-b),d>0)return a[b+g(j.FlxG.random()*d)]}return null},j.FlxG.loadReplay=function(a,b,c,d,e){j.FlxG._game._replay.load(a),null===b?j.FlxG.resetGame():j.FlxG.switchState(b),j.FlxG._game._replayCancelKeys=c,j.FlxG._game._replayTimer=1e3*d,j.FlxG._game._replayCallback=e,j.FlxG._game._replayRequested=!0},j.FlxG.reloadReplay=function(a){a=void 0===a?!0:a,a?j.FlxG.resetGame():j.FlxG.resetState(),j.FlxG._game._replay.frameCount>0&&(j.FlxG._game._replayRequested=!0)},j.FlxG.stopReplay=function(){j.FlxG._game._replaying=!1,null!==j.FlxG._game._debugger&&j.FlxG._game._debugger.vcr.stopped(),j.FlxG.resetInput()},j.FlxG.recordReplay=function(a){a=void 0===a?!0:a,a?j.FlxG.resetGame():j.FlxG.resetState(),j.FlxG._game._recordingRequested=!0},j.FlxG.stopRecording=function(){return j.FlxG._game._recording=!1,null!==j.FlxG._game._debugger&&j.FlxG._game._debugger.vcr.stopped(),j.FlxG._game._replay.save()},j.FlxG.resetState=function(){j.FlxG._game._requestedState=new(j.FlxU.getClass(j.FlxU.getClassName(j.FlxG._game._state,!1)))},j.FlxG.resetGame=function(){j.FlxG._game._requestedReset=!0},j.FlxG.resetInput=function(){j.FlxG.keys.reset(),j.FlxG.mouse.reset()},j.FlxG.playMusic=function(a,b){j.FlxG.device.canPlayAudio("any")&&(null===j.FlxG.music?j.FlxG.music=new j.FlxSound:j.FlxG.music.active&&j.FlxG.music.stop(),j.FlxG.music.loadEmbedded(a,!0),j.FlxG.music.setVolume(b),j.FlxG.music.survive=!0,j.FlxG.music.play())},j.FlxG.loadSound=function(a,b,c,d,e,f){if(b=void 0===b?1:b,c=void 0===c?!1:c,d=void 0===d?!1:d,e=void 0===e?!1:e,j.FlxG.device.canPlayAudio("any")){if(null===a&&null===f)return j.FlxG.log("WARNING: loadSound() requires either\nan embedded sound or a URL to work."),null;var g=j.FlxG.sounds.recycle(j.FlxSound);return null!==a?g.loadEmbedded(a,c,d):g.loadStream(f,c,d),g.setVolume(b),e&&g.play(),g}},j.FlxG.play=function(a,b,c,d){return j.FlxG.loadSound(a,b,c,d,!0)},j.FlxG.stream=function(a,b,c,d){return j.FlxG.loadSound(null,b,c,d,!0,a)},j.FlxG.getMusicVolume=function(){return j.FlxG.volumeHandler.musicVolume},j.FlxG.getSoundVolume=function(){return j.FlxG.volumeHandler.soundVolume},j.FlxG.setMusicVolume=function(a){0>a?a=0:a>1&&(a=1),j.FlxG.volumeHandler.musicVolume=a,j.FlxG.onChange(j.FlxG.volumeHandler.mute?0:a,j.FlxSound.TYPE_MUSIC)},j.FlxG.setSoundVolume=function(a){0>a?a=0:a>1&&(a=1),j.FlxG.volumeHandler.soundVolume=a,j.FlxG.onChange(j.FlxG.volumeHandler.mute?0:a,j.FlxSound.TYPE_SFX)},j.FlxG.getMute=function(){return j.FlxG.volumeHandler.mute},j.FlxG.setMute=function(a){j.FlxG.volumeHandler.mute=a,a?j.FlxG.onChange(0,j.FlxSound.ALL):(j.FlxG.onChange(j.FlxG.volumeHandler.musicVolume,j.FlxSound.TYPE_MUSIC),j.FlxG.onChange(j.FlxG.volumeHandler.soundVolume,j.FlxSound.TYPE_SFX))},j.FlxG.destroySounds=function(a){a=void 0===a?!0:a,null===j.FlxG.music||!a&&j.FlxG.music.survive||(j.FlxG.music.destroy(),j.FlxG.music=null);for(var b,c=0,d=j.FlxG.sounds.members.length;d>c;)b=j.FlxG.sounds.members[c++],null===b||void 0===b||!a&&b.survive||b.destroy();j.FlxG.sounds.clear()},j.FlxG.updateSounds=function(){null!==j.FlxG.music&&j.FlxG.music.active&&j.FlxG.music.update(),null!==j.FlxG.sounds&&j.FlxG.sounds.active&&j.FlxG.sounds.update()},j.FlxG.pauseAudio=function(){null!==j.FlxG.music&&j.FlxG.music.exists&&j.FlxG.music.active&&j.FlxG.music.pause();for(var a=0,b=null,c=j.FlxG.sounds.length;c>a;)b=j.FlxG.sounds.members[a++],null!==b&&b.exists&&b.active&&b.pause()},j.FlxG.resumeAudio=function(){null!==j.FlxG.music&&j.FlxG.music.exists&&j.FlxG.music.isPaused()&&j.FlxG.music.resume();for(var a,b=0,c=j.FlxG.sounds.length;c>b;)a=j.FlxG.sounds.members[b++],null!==a&&a.exists&&a.resume()},j.FlxG.checkBitmapCache=function(a){return void 0!==j.FlxG._cache[a]&&null!==j.FlxG._cache[a]},j.FlxG.createBitmap=function(a,b,c,d,e){if(d=void 0===d?!1:d,e=void 0===e?null:e,null===e&&(e=a+"x"+b+":"+c,d&&j.FlxG.checkBitmapCache(e))){var f,g=0;do f=e+g++;while(j.FlxG.checkBitmapCache(f));e=f}return j.FlxG.checkBitmapCache(e)||(j.FlxG._cache[e]=new m(a,b,!0,c)),j.FlxG._cache[e]},j.FlxG.addBitmap=function(a,b,c,d){if(b=void 0===c?!1:b,c=void 0===c?!1:c,d=void 0===d?null:d,null===d&&(d=String(a)+(b?"_REVERSE_":""),c&&j.FlxG.checkBitmapCache(d))){var e,f=0;do e=d+f++;while(j.FlxG.checkBitmapCache(e));d=e}if(!j.FlxG.checkBitmapCache(d)){var g=null;if(a instanceof Image){var h=new a;if(null===h)return j.FlxG.log("Error: "+j.FlxU.getClassName(a)+" must be an Image."),j.FlxG.addBitmap(j.data.FlxSystemAsset.ImgDefault,b);g=h.bitmapData}else"string"==typeof a?g=j.FlxG._assetManager.getRegion(a):j.FlxG.log("Graphic has a wrong format: "+a+". Only Image or String allowed","FlxG.addBitmap");if(null===g&&(j.FlxG.log("Graphic was not recogniced: "+a+". Only Image or String allowed","FlxG.addBitmap"),a=j.data.FlxSystemAsset.ImgDefault,g=j.FlxG.addBitmap(a,b)),b){var i=new m(g.width<<1,g.height,!0,0);i.draw(g);var l=new k;l.scale(-1,1),l.translate(i.width,0),i.draw(g,l),g=i}j.FlxG._cache[d]=g}return j.FlxG._cache[d]},j.FlxG.clearBitmapCache=function(){j.FlxG._cache=[]},j.FlxG.getStage=function(){return null!==j.FlxG._game.stage?j.FlxG._game.stage:null},j.FlxG.getState=function(){return j.FlxG._game._state},j.FlxG.getActiveCamera=function(){return j.FlxG.activeCamera},j.FlxG.switchState=function(a){j.FlxG.setState(a,!0)},j.FlxG.setState=function(a,b){b=void 0===b?!0:b,j.FlxG._game._requestedState=a},j.FlxG.setDebuggerLayout=function(a){null!==j.FlxG._game._debugger&&j.FlxG._game._debugger.setLayout(a)},j.FlxG.resetDebuggerLayout=function(){null!==j.FlxG._game._debugger&&j.FlxG._game._debugger.resetLayout()},j.FlxG.addCamera=function(a){return j.FlxG.cameras.push(a),j.FlxG.displayList.push(a),a},j.FlxG.removeCamera=function(a,b){b=void 0===b?!0:b,a&&j.FlxG._game.contains(a._flashSprite)?(j.FlxG.displayList.splice(j.FlxG.cameras.indexOf(a),1),j.FlxG._game.removeChild(a._flashSprite)):j.FlxG.log("Error removing camera, not part of game."),j.FlxG.cameras.splice(j.FlxG.cameras.indexOf(a),1),b&&a.destroy()},j.FlxG.resetCameras=function(a){for(var b,c=0,d=j.FlxG.cameras.length;d>c;)b=j.FlxG.cameras[c++],j.FlxG.displayList.splice(j.FlxG.displayList.indexOf(b),1),b.destroy();j.FlxG.cameras.length=0,void 0===a&&(a=new j.FlxCamera(0,0,j.FlxG.width,j.FlxG.height)),j.FlxG.camera=j.FlxG.addCamera(a)},j.FlxG.flash=function(a,b,c,d){a=a||4294967295,b=b||1,d=d||!1;for(var e=0,f=j.FlxG.cameras.length;f>e;)j.FlxG.cameras[e++].flash(a,b,c,d)},j.FlxG.fade=function(a,b,c,d){a=a||4278190080,b=b||1,d=d||!1;for(var e=0,f=j.FlxG.cameras.length;f>e;)j.FlxG.cameras[e++].fade(a,b,c,d)},j.FlxG.shake=function(a,b,c,d,e){a=a||.5,b=b||.5,d=void 0===d?!0:d,e=e||0;for(var f=0,g=j.FlxG.cameras.length;g>f;)j.FlxG.cameras[f++].shake(a,b,c,d,e)},j.FlxG.getBgColor=function(){return null===j.FlxG.camera?4278190080:j.FlxG.camera.bgColor},j.FlxG.setBgColor=function(a){for(var b=0,c=j.FlxG.cameras.length;c>b;)j.FlxG.cameras[b++].bgColor=a},j.FlxG.overlap=function(a,b,c,d){(null===a||void 0===a)&&(a=j.FlxG.getState()),b===a&&(b=null),j.system.FlxQuadTree.divisions=j.FlxG.worldDivisions;var e=j.system.FlxQuadTree.getNew(j.FlxG.worldBounds.x,j.FlxG.worldBounds.y,j.FlxG.worldBounds.width,j.FlxG.worldBounds.height,null);e.load(a,b,c,d);
var f=e.execute();return e.destroy(),f},j.FlxG.collide=function(a,b,c){return j.FlxG.overlap(a,b,c,j.FlxObject.separate)},j.FlxG.addPlugin=function(a){for(var b=j.FlxG.plugins,c=0,d=b.length;d>c;)if(b[c++].toString()==a.toString())return a;return b.push(a),a},j.FlxG.getPlugin=function(a){for(var b=j.FlxG.plugins,c=0,d=b.length;d>c;){if(b[c]instanceof a)return j.FlxG.plugins[c];c++}return null},j.FlxG.removePlugin=function(a){for(var b=j.FlxG.plugins,c=b.length-1;c>=0;)b[c]==a&&b.splice(c,1),c--;return a},j.FlxG.removePluginType=function(a){for(var b=!1,c=j.FlxG.plugins,d=c.length-1;d>=0;)c[d]instanceof a&&(c.splice(d,1),b=!0),d--;return b},j.FlxG.init=function(a,b,c,d,e){j.FlxG._game=a,j.FlxG.width=b,j.FlxG.height=c,j.FlxG.scaleManager=new u(b,c),j.FlxG.sounds=new j.FlxGroup,j.FlxG.volumeHandler=new j.system.FlxVolumeHandler,j.FlxG.music=null,j.FlxG.stateStack=new j.plugin.FlxStateStack,j.FlxG.stateChange=!1,j.FlxG.clearBitmapCache(),j.FlxG._assetManager=j.system.atlas.FlxAssetManager.getInstance(),j.FlxCamera.defaultZoom=d,j.FlxCamera.defaultScaleMode=e,j.FlxG.cameras=[],j.FlxG.displayList=[],j.FlxG.camera=null,j.FlxG._cameraRect=new j.FlxRect,j.FlxG.useBufferLocking=!1,null===j.FlxG.flashGfxSprite&&(j.FlxG.flashGfxSprite=new m(j.FlxG.width,j.FlxG.height,!0,0),j.FlxG.flashGfx=j.FlxG.flashGfxSprite.context),j.FlxG.plugins=[],j.FlxG.addPlugin(new j.plugin.DebugPathDisplay),j.FlxG.addPlugin(new j.plugin.TimerManager),j.FlxG.addPlugin(j.FlxG.soundManager),j.FlxG.mouse=new j.system.input.Mouse(j.FlxG._game._mouse),j.FlxG.touch=j.FlxG.mouse,j.FlxG.keys=new j.system.input.Keyboard,j.FlxG.mobile=j.FlxG.device.isMobile,j.FlxG.levels=[],j.FlxG.scores=[],j.FlxG.visualDebug=!1},j.FlxG.reset=function(){j.FlxG.clearBitmapCache(),j.FlxG.resetInput(),j.FlxG.destroySounds(!0),j.FlxG.levels.length=0,j.FlxG.scores.length=0,j.FlxG.level=0,j.FlxG.score=0,j.FlxG.paused=!1,j.FlxG.timeScale=1,j.FlxG.elapsed=0,j.FlxG.globalSeed=Math.random(),j.FlxG.worldBounds=new j.FlxRect(-10,-10,j.FlxG.width+20,j.FlxG.height+20),j.FlxG.worldDivisions=6;var a=j.FlxG.getPlugin(j.plugin.DebugPathDisplay);null!==a&&a.clear()},j.FlxG.updateInput=function(){j.FlxG.keys.update(),j.FlxG._game._debuggerUp&&j.FlxG._game._debugger.hasMouse||j.FlxG.mouse.update()},j.FlxG.lockCameras=function(){var a=j.FlxG.activeCamera;a.exists&&a.visible&&(j.FlxG.useBufferLocking&&a.buffer.lock(),a.fill(a.bgColor),a.screen.dirty=!0)},j.FlxG.unlockCameras=function(){var a=j.FlxG.activeCamera;a.exists&&a.visible&&(a.drawFX(),j.FlxG.useBufferLocking&&a.buffer.unlock())},j.FlxG.updateCameras=function(){for(var a,b=j.FlxG.cameras,c=0,d=b.length;d>c;)a=b[c++],void 0!==a&&a.exists&&a.active&&a.update()},j.FlxG.updatePlugins=function(){for(var a,b=j.FlxG.plugins,c=0,d=b.length;d>c;)a=b[c++],a.exists&&a.active&&a.update()},j.FlxG.drawPlugins=function(){for(var a,b=j.FlxG.plugins,c=0,d=b.length;d>c;)a=b[c++],a.exists&&a.visible&&a.draw()},j.FlxG.vibrate=function(a){navigator.vibrate&&navigator.vibrate(a)},j.FlxG.vibratePattern=function(a){navigator.vibrate&&navigator.vibrate(a)},j.FlxG.stopVibrate=function(){navigator.vibrate&&navigator.vibrate(0)},j.FlxG.getPauseGroup=function(){return j.FlxG._game._pause},j.FlxG.previousGameState=function(){var a=null;j.FlxG.stateStack.size()>0&&(a=j.FlxG.stateStack.popState()),0===j.FlxG.stateStack.size()&&j.FlxG.stateStack.setBackKeyMode(j.plugin.FlxStateStack.NORMAL),j.FlxG._game._requestedState=new a,j.FlxG.stateChange=!0},j.FlxG.clearPreviousGameStates=function(){j.FlxG.stateStack.clear()},j.FlxG.exit=function(){j.FlxG.log("EXIT DO NOTHIG IN Flixel-HTML5!!!")},j.FlxG.getString=function(a){return j.FlxLanguagesManager.getInstance().getString(a)},j.FlxG.getTotal=function(){return e()},j.FlxG.inOUYA=function(){return!1},j.FlxG.getAssetManager=function(){return j.FlxG._assetManager},j.FlxG.onChange=function(a,b){switch(b){case j.FlxSound.TYPE_MUSIC:null!==j.FlxG.music&&j.FlxG.music.setVolume(a);break;case j.FlxSound.TYPE_SFX:for(var c=0;c<j.FlxG.sounds.members.length;c++)j.FlxG.sounds.members[c].setVolume(a);break;case j.FlxSound.ALL:null!==j.FlxG.music&&j.FlxG.music.setVolume(a);for(var d=0;d<j.FlxG.sounds.members.length;d++)j.FlxG.sounds.members[d].setVolume(a)}},j.FlxG.prototype.toString=function(){return"FlxG"},j.FlxGroup=function(a){this.members=[],this.length=0,this._maxSize=a||0,this._marker=0,this._sortIndex=null,j.FlxGroup.parent.constructor.apply(this)},b(j.FlxGroup,j.FlxBasic),j.FlxGroup.ASCENDING=-1,j.FlxGroup.DESCENDING=1,j.FlxGroup.prototype.members=null,j.FlxGroup.prototype.length=0,j.FlxGroup.prototype._maxSize=0,j.FlxGroup.prototype._marker=0,j.FlxGroup.prototype._sortIndex=null,j.FlxGroup.prototype._sortOrder=0,j.FlxGroup.prototype._sortCheckIndexExistence=!1,j.FlxGroup.prototype.destroy=function(){if(null!==this.members){for(var a,b=0;b<this.length;)a=this.members[b++],void 0!==a&&null!==a&&a.destroy();this.members.length=0,this.members=null}this.length=0,this._sortIndex=null,j.FlxGroup.parent.destroy.apply(this)},j.FlxGroup.prototype.preUpdate=function(){},j.FlxGroup.prototype.update=function(){for(var a,b=0;b<this.length;)a=this.members[b++],void 0!==a&&a.exists&&a.active&&(a.preUpdate(),a.update(),a.hasTween()&&a.updateTweens(),a.postUpdate());this.hasTween()&&this.updateTweens()},j.FlxGroup.prototype.destroyDead=function(a){if(null!==this.members)for(var b,c=0;c<this.members.length;)b=this.members[c++],void 0===b||b.alive||(this.remove(b,a),b.destroy())},j.FlxGroup.prototype.secureClear=function(){for(var a,b=0;b<this.members.length;)a=this.members[b++],void 0!==a&&(a instanceof j.FlxGroup?(a.secureClear(),a.kill(),a.destroy()):(a.kill(),a.destroy()));this.length=0,this.members.length=0},j.FlxGroup.prototype.draw=function(){for(var a,b=0;b<this.length;)a=this.members[b++],void 0!==a&&a.exists&&a.visible&&a.draw()},j.FlxGroup.prototype.getMaxSize=function(){return this._maxSize},j.FlxGroup.prototype.setMaxSize=function(a){if(this._maxSize=a,this._marker>=this._maxSize&&(this._marker=0),!(0===this._maxSize||null===this.members||this._maxSize>=this.members.length)){for(var b,c=this._maxSize,d=this.members.length;d>c;)b=this.members[c++],void 0!==b&&b.destroy();this.length=this.members.length=this._maxSize}},j.FlxGroup.prototype.add=function(a){if(void 0===a||null===a)return j.FlxG.log("WARNING: Cannot add a `null` or `undefined` object to a FlxGroup."),null;if(this.members.indexOf(a)>=0)return a;for(var b=0,c=this.members.length;c>b;){if(void 0===this.members[b])return this.members[b]=a,b>=this.length&&(this.length=b+1),a;b++}if(this._maxSize>0){if(this.members.length>=this._maxSize)return a;2*this.members.length<=this._maxSize?this.members.length*=2:this.members.length=this._maxSize}else this.members.length*=2;return this.members[b]=a,this.length=b+1,a},j.FlxGroup.prototype.recycle=function(a){var b;return this._maxSize>0?this.length<this._maxSize?null===a?null:this.add(new a):(b=this.members[this._marker++],this._marker>=this._maxSize&&(this._marker=0),b):(b=this.getFirstAvailable(a),null!==b?b:null===a?null:this.add(new a))},j.FlxGroup.prototype.remove=function(a,b){var c=this.members.indexOf(a);return b=b||!1,0>c||c>=this.members.length?null:(b?(this.members.splice(c,1),this.length--):this.members[c]=void 0,a)},j.FlxGroup.prototype.replace=function(a,b){var c=this.members.indexOf(a);return 0>c||c>=this.members.length?null:(this.members[c]=b,b)},j.FlxGroup.prototype.sort=function(a,b,c){this._sortIndex=a||"y",this._sortOrder=b||j.FlxGroup.ASCENDING,this._sortCheckIndexExistence=void 0===c?!0:c,this.members.sort(this.sortHandler)},j.FlxGroup.prototype.setAll=function(a,b,c){c=void 0===c?!0:c;for(var d,e=0;e<this.length;)d=this.members[e++],void 0!==d&&(c&&d instanceof j.FlxGroup?d.setAll(a,b,c):d[a]=b)},j.FlxGroup.prototype.callAll=function(a,b){b=void 0===b?!0:b;for(var c,d=0;d<this.length;)c=this.members[d++],void 0!==c&&(b&&c instanceof j.FlxGroup?c.callAll(a,b):c[a]())},j.FlxGroup.prototype.getFirstAvailable=function(a){for(var b,c=0;c<this.length;)if(b=this.members[c++],null!==b&&!b.exists&&(null===a||b instanceof a))return b;return null},j.FlxGroup.prototype.getFirstNull=function(){for(var a=0,b=this.members.length;b>a;){if(void 0===this.members[a])return a;a++}return-1},j.FlxGroup.prototype.getFirstExtant=function(){for(var a,b=0;b<this.length;)if(a=this.members[b++],void 0!==a&&a.exists)return a;return null},j.FlxGroup.prototype.getFirstAlive=function(){for(var a,b=0;b<this.length;)if(a=this.members[b++],void 0!==a&&a.exists&&a.alive)return a;return null},j.FlxGroup.prototype.getFirstDead=function(){for(var a,b=0;b<this.length;)if(a=this.members[b++],void 0!==a&&!a.alive)return a;return null},j.FlxGroup.prototype.countLiving=function(){for(var a,b=-1,c=0;c<this.length;)a=this.members[c++],void 0!==a&&(0>b&&(b=0),a.exists&&a.alive&&b++);return b},j.FlxGroup.prototype.countDead=function(){for(var a,b=-1,c=0;c<this.length;)a=this.members[c++],void 0!==a&&(0>b&&(b=0),a.alive||b++);return b},j.FlxGroup.prototype.getRandom=function(a,b){return 0!==b&&b||(b=this.length),j.FlxG.getRandom(this.members,a,b)},j.FlxGroup.prototype.clear=function(){this.length=this.members.length=0},j.FlxGroup.prototype.kill=function(){for(var a,b=0;b<this.length;)a=this.members[b++],void 0!==a&&a.exists&&a.kill();j.FlxGroup.parent.kill.apply(this)},j.FlxGroup.prototype.size=function(){return this.length},j.FlxGroup.prototype.sortHandler=function(a,b){if(this._sortCheckIndexExistence===!0){if(!(a&&this._sortIndex in a))return 1;if(!(b&&this._sortIndex in b))return-1}return a[this._sortIndex]<b[this._sortIndex]?this._sortOrder:a[this._sortIndex]>b[this._sortIndex]?-this._sortOrder:0},j.FlxGroup.prototype.toString=function(){return"FlxGroup"},j.FlxState=function(){j.FlxState.parent.constructor.apply(this)},b(j.FlxState,j.FlxGroup),j.FlxState.saveState=!0,j.FlxState.prototype.create=function(){},j.FlxState.prototype.preProcess=function(){},j.FlxState.prototype.collide=function(){j.FlxG.collide(this)},j.FlxState.prototype.postProcess=function(){},j.FlxState.prototype.toString=function(){return"FlxState"},j.FlxGame=function(a,b,c,d,e,f,g,h,i,k){if(void 0===e||null===e)throw new Error("Empty state");if(void 0===a||null===a)throw new Error("Empty canvas");if(void 0===b||null===b)throw new Error("Empty loader");this.cZoom=f||1,this.cGameFramerate=g||60,this.cFlashFramerate=h||30,this.cUseSystemCursor=void 0===i?!0:i,this.cScaleMode=k||j.FlxCamera.NO_SCALE,this.cGameSizeX=c,this.cGameSizeY=d,this.cInitialState=e,this.cCanvasId=a,this.cLoader=b;var l=this;this._onBoot=function(){l.boot()},"complete"===document.readyState||"interactive"===document.readyState?window.setTimeout(this._onBoot,0):(document.addEventListener("DOMContentLoaded",this._onBoot,!1),window.addEventListener("load",this._onBoot,!1))},j.FlxGame.prototype.cCanvasId=null,j.FlxGame.prototype.cLoader=null,j.FlxGame.prototype.cGameSizeX=0,j.FlxGame.prototype.cGameSizeY=0,j.FlxGame.prototype.cInitialState=null,j.FlxGame.prototype.cZoom=0,j.FlxGame.prototype.cGameFramerate=0,j.FlxGame.prototype.cFlashFramerate=0,j.FlxGame.prototype.cUseSystemCursor=!1,j.FlxGame.prototype.cScaleMode=0,j.FlxGame.useSplashScreen=!0,j.FlxGame.prototype.stage=null,j.FlxGame.prototype.loader=null,j.FlxGame.prototype.loadingInterval=0,j.FlxGame.prototype.useSoundHotKeys=!1,j.FlxGame.prototype.useSystemCursor=!1,j.FlxGame.prototype.forceDebugger=!1,j.FlxGame.prototype._state=null,j.FlxGame.prototype._mouse=null,j.FlxGame.prototype._iState=null,j.FlxGame.prototype._created=!1,j.FlxGame.prototype._total=0,j.FlxGame.prototype._accumulator=0,j.FlxGame.prototype._lostFocus=!1,j.FlxGame.prototype._step=0,j.FlxGame.prototype._flashFramerate=0,j.FlxGame.prototype._maxAccumulation=0,j.FlxGame.prototype._requestedState=null,j.FlxGame.prototype._requestedReset=!1,j.FlxGame.prototype._focus=null,j.FlxGame.prototype._soundTray=null,j.FlxGame.prototype._soundTrayTimer=0,j.FlxGame.prototype._soundTrayBars=null,j.FlxGame.prototype._debugger=null,j.FlxGame.prototype._debuggerUp=!1,j.FlxGame.prototype._replay=null,j.FlxGame.prototype._replayRequested=!1,j.FlxGame.prototype._recordingRequested=!1,j.FlxGame.prototype._replaying=!1,j.FlxGame.prototype._recording=!1,j.FlxGame.prototype._replayCancelKeys=null,j.FlxGame.prototype._replayTimer=0,j.FlxGame.prototype._replayCallback=null,j.FlxGame.prototype._pause=null,j.FlxGame.prototype.isBooted=!1,j.FlxGame.prototype.orientationSprite=null,j.FlxGame.prototype.boot=function(){this.isBooted||(document.body?(document.removeEventListener("DOMContentLoaded",this._onBoot),window.removeEventListener("load",this._onBoot),j.FlxG.device=new o,this._lostFocus=!1,this._focus=new m,this._focus.visible=!1,this._soundTray=new m,this._mouse=new m,this.isBooted=!0,this.loader=this.cLoader,j.FlxG.loaderCache=new p,j.FlxG.soundManager=new w,j.FlxG.soundManager.boot(),this.stage=document.getElementById(this.cCanvasId),null!==this.stage&&(j.FlxG.screenWidth=this.stage.width,j.FlxG.screenHeight=this.stage.height),this.stage.style.display="block",this.stage.style["-webkit-full-screen"]="width: 100%; height: 100%",this.stage.style.msTouchAction="none",this.stage.style["ms-touch-action"]="none",this.stage.style["-ms-touch-action"]="none",this.stage.style["-ms-content-zooming"]="none",this.stage.style["touch-action"]="none",this.stage.style["-webkit-touch-callout"]="none",this.stage.style["-webkit-user-select"]="none",this.stage.style["-khtml-user-select"]="none",this.stage.style["-moz-user-select"]="none",this.stage.style["-ms-user-select"]="none",this.stage.style["user-select"]="none",this.stage.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",j.FlxG.init(this,this.cGameSizeX,this.cGameSizeY,this.cZoom,this.cScaleMode),j.FlxG.setFramerate(this.cGameFramerate),j.FlxG.setFlashFramerate(this.cFlashFramerate),this._accumulator=this._step,this._total=0,this._state=null,this.useSoundHotKeys=!0,this.useSystemCursor=this.cUseSystemCursor,this.forceDebugger=!1,this._debuggerUp=!1,this._replay=new j.system.FlxReplay,this._replayRequested=!1,this._recordingRequested=!1,this._replaying=!1,this._recording=!1,j.FlxGame.useSplashScreen?(this._iState=new j.plugin.FlxSplashScreen,j.plugin.FlxSplashScreen.initialGameState=this.cInitialState):this._iState=this.cInitialState,this._requestedState=null,this._requestedReset=!0,this._created=!1,this.create()):window.setTimeout(this._onBoot,20))},j.FlxGame.prototype.showSoundTray=function(a){a=a||!1,this._soundTrayTimer=1,this._soundTray.y=0,this._soundTray.visible=!0;var b=f(10*j.FlxG.getMusicVolume());j.FlxG.getMute()&&(b=0);for(var c=0;c<this._soundTrayBars.length;c++)this._soundTrayBars[c].alpha=b>c?1:.5},j.FlxGame.prototype.handleKeyUp=function(a){if(!this._debuggerUp||!this._debugger.watch.editing){if(!j.FlxG.mobile){if(null!==this._debugger&&(222==a.keyCode||220==a.keyCode||119==a.keyCode))return this._debugger.visible=!this._debugger.visible,this._debuggerUp=this._debugger.visible,void 0;if(this.useSoundHotKeys){var b=a.keyCode;switch(b){case 48:case 96:return j.FlxG.setMute(!j.FlxG.getMute()),j.FlxG.onChange(j.FlxG.getMute()?0:j.FlxG.getMusicVolume(),j.FlxSound.ALL),this.showSoundTray(),void 0;case 109:case 173:return j.FlxG.setMute(!1),j.FlxG.setMusicVolume(j.FlxG.getMusicVolume()-.1),this.showSoundTray(),void 0;case 171:case 107:return j.FlxG.setMute(!1),j.FlxG.setMusicVolume(j.FlxG.getMusicVolume()+.1),this.showSoundTray(),void 0}}}this._replaying||(a.stopPropagation(),a.preventDefault(),j.FlxG.keys.handleKeyUp(a))}},j.FlxGame.prototype.handleKeyDown=function(a){if(!this._debuggerUp||!this._debugger.watch.editing){var b=a.keyCode;if(112!=b&&27!=b||j.FlxG.getDisablePause()||(j.FlxG.getPause()?this.onFocus():this.onFocusLost()),this._replaying&&null!==this._replayCancelKeys&&null===this._debugger&&222!=a.keyCode&&220!=a.keyCode){for(var c,d=0,e=this._replayCancelKeys.length;e>d;)if(c=this._replayCancelKeys[d++],"ANY"==c||j.FlxG.keys.getKeyCode(c)==a.keyCode){null!==this._replayCallback?(this._replayCallback.callback(),this._replayCallback=null):j.FlxG.stopReplay();break}}else a.stopPropagation(),a.preventDefault(),j.FlxG.keys.handleKeyDown(a)}},j.FlxGame.prototype.handleMouseDown=function(a){if(this._debuggerUp){if(this._debugger.hasMouse)return;this._debugger.watch.editing&&this._debugger.watch.submit()}if(this._replaying&&null!==this._replayCancelKeys){for(var b,c=0,d=this._replayCancelKeys.length;d>c;)if(b=this._replayCancelKeys[c++],"MOUSE"==b||"ANY"==b){null!==this._replayCallback?(this._replayCallback.callback(),this._replayCallback=null):j.FlxG.stopReplay();break}}else a.preventDefault(),j.FlxG.mouse.handleMouseDown(a)},j.FlxGame.prototype.handleMouseUp=function(a){this._debuggerUp&&this._debugger.hasMouse||this._replaying||(a.preventDefault(),j.FlxG.mouse.handleMouseUp(a))},j.FlxGame.prototype.handleMouseWheel=function(a){this._debuggerUp&&this._debugger.hasMouse||this._replaying||(a.preventDefault(),j.FlxG.mouse.handleMouseWheel(a))},j.FlxGame.prototype.handleMouseMove=function(a){this._debuggerUp&&this._debugger.hasMouse||this._replaying||j.FlxG.mouse.handleMouseMove(a)},j.FlxGame.prototype.onFocus=function(){j.FlxG.resetInput(),null!==this._focus&&(this._lostFocus=this._focus.visible=!1),j.FlxG.setPause(!1)},j.FlxGame.prototype.onFocusLost=function(){(0!==this.x||0!==this.y)&&(this.x=0,this.y=0),null!==this._focus&&(this._lostFocus=this._focus.visible=!0),j.FlxG.setPause(!0)},j.FlxGame.prototype.onEnterFrameLoading=function(){var a=this.loader.getPercentage(),b=20,c=100,d=Math.floor(a/100*c),e=this.stage.getContext("2d");e.clearRect(0,0,j.FlxG.width,j.FlxG.height),e.fillStyle="#202020",e.fillRect(0,0,j.FlxG.width,j.FlxG.height),e.fillStyle="black",e.fillRect(j.FlxG.width/2-c/2,j.FlxG.height/2-b/2,c,b),e.fillStyle="#55aa00",e.fillRect(j.FlxG.width/2-c/2,j.FlxG.height/2-b/2,d,b),e.font="40px sans-serif",e.fillStyle="#FFFFFF",e.fillText("Loading...",j.FlxG.width/2-e.measureText("Loading...").width/2,j.FlxG.height-60)},j.FlxGame.prototype.onEnterFrame=function(){var a=e(),b=a-this._total;if(this._total=a,this.updateSoundTray(b),this._lostFocus)this._pause.visible&&j.FlxG.getPause()&&(j.FlxBasic.VISIBLECOUNT=0,this.draw());else{if(null!==this._debugger&&this._debugger.vcr.paused)this._debugger.vcr.stepRequested&&(this._debugger.vcr.stepRequested=!1,this.step());else for(this._accumulator+=b,this._accumulator>this._maxAccumulation&&(this._accumulator=this._maxAccumulation);this._accumulator>=this._step;)this.step(),this._accumulator=this._accumulator-this._step;j.FlxBasic.VISIBLECOUNT=0,this.draw(),this._debuggerUp&&(this._debugger.perf.flash(b),this._debugger.perf.visibleObjects(j.FlxBasic.VISIBLECOUNT),this._debugger.perf.update(),this._debugger.watch.update())}},j.FlxGame.prototype.switchState=function(){j.FlxG.resetCameras(),j.FlxG.resetInput(),j.FlxG.destroySounds(),j.FlxG.clearBitmapCache(),null!==this._debugger&&this._debugger.watch.removeAll();var a=j.plugin.FlxTimer.getManager();null!==a&&a.clear(),null!==this._state&&(this._state.destroy(),this._pause.secureClear(),this._state=null),this._state=this._requestedState,this._state.create()},j.FlxGame.prototype.step=function(){this._requestedReset&&(this._requestedReset=!1,this._requestedState=new this._iState.constructor,this._replayTimer=0,this._replayCancelKeys=null,j.FlxG.reset()),this._recordingRequested?(this._recordingRequested=!1,this._replay.create(j.FlxG.globalSeed),this._recording=!0,null!==this._debugger&&(this._debugger.vcr.recording(),j.FlxG.log("Flixel: starting new flixel gameplay record."))):this._replayRequested&&(this._replayRequested=!1,this._replay.rewind(),j.FlxG.globalSeed=this._replay.seed,null!==this._debugger&&this._debugger.vcr.playing(),this._replaying=!0),this._state!=this._requestedState&&this.switchState(),j.FlxBasic.ACTIVECOUNT=0,this._replaying?(this._replay.playNextFrame(),this._replayTimer>0&&(this._replayTimer-=this._step,this._replayTimer<=0&&(null!==this._replayCallback?(this._replayCallback.callback(),this._replayCallback=null):j.FlxG.stopReplay())),this._replaying&&this._replay.finished&&(j.FlxG.stopReplay(),null!==this._replayCallback&&(this._replayCallback.callback(),this._replayCallback=null)),null!==this._debugger&&this._debugger.vcr.updateRuntime(this._step)):j.FlxG.updateInput(),this._recording&&(this._replay.recordFrame(),null!==this._debugger&&this._debugger.vcr.updateRuntime(this._step)),this.update(),j.FlxG.mouse.wheel=0,this._debuggerUp&&this._debugger.perf.activeObjects(j.FlxBasic.ACTIVECOUNT)},j.FlxGame.prototype.updateSoundTray=function(a){if(null!==this._soundTray)if(this._soundTrayTimer>0)this._soundTrayTimer-=a/1e3;else if(this._soundTray.y>-this._soundTray.height&&(this._soundTray.y-=a/1e3*j.FlxG.height*2,this._soundTray.y<=-this._soundTray.height)){this._soundTray.visible=!1;var b=new j.FlxSave;b.bind("Flixel")&&(null===b.data.sound&&(b.data.sound={}),b.data.sound.mute=j.FlxG.getMute(),b.data.sound.musicVolume=j.FlxG.getMusicVolume(),b.data.sound.soundVolume=j.FlxG.getSoundVolume(),b.close())}},j.FlxGame.prototype.update=function(){var a=e();return j.FlxG.elapsed=j.FlxG.timeScale*(this._step/1e3),j.FlxG.getPause()?(this._pause.update(),void 0):this.orientationSprite&&this.orientationSprite.visible===!0?(this.orientationSprite.update(),void 0):(j.FlxG.updateSounds(),this._state.preProcess(),j.FlxG.updatePlugins(),this._state.update(),j.FlxG.updateCameras(),j.FlxG.keys.justPressed("F2")&&(j.FlxG.debug||this.forceDebugger)&&(j.FlxG.visualDebug=!j.FlxG.visualDebug),this._debuggerUp&&this._debugger.perf.flixelUpdate(e()-a),this._state.postProcess(),void 0)},j.FlxGame.prototype.draw=function(){if(!j.FlxG.getPause()||!j.FlxG.debug){var a=e(),b=0,c=j.FlxG.displayList.length,d=this.stage.getContext("2d");for(d.clearRect(0,0,j.FlxG.width,j.FlxG.height);c>b;)j.FlxG.activeCamera=j.FlxG.displayList[b++],j.FlxG.lockCameras(),this._state.draw(),j.FlxG.getPause()&&this._pause.size()>0&&this._pause.draw(),this.orientationSprite&&this.orientationSprite.visible===!0&&this.orientationSprite.draw(),j.FlxG.unlockCameras(),j.FlxG.drawPlugins(),d.drawImage(j.FlxG.activeCamera.buffer._canvas,0,0,j.FlxG.activeCamera.width,j.FlxG.activeCamera.height,j.FlxG.activeCamera.x,j.FlxG.activeCamera.y,j.FlxG.activeCamera.width,j.FlxG.activeCamera.height);this._debuggerUp&&this._debugger.perf.flixelDraw(e()-a)}},j.FlxGame.prototype.create=function(){this._total=e(),n.getOffset(this.stage,j.FlxG.mouse.offset),window.addEventListener("mousedown",this.handleMouseDown.bind(this),!0),window.addEventListener("mouseup",this.handleMouseUp.bind(this),!0),window.addEventListener("mousemove",this.handleMouseMove.bind(this),!0),window.addEventListener("mousewheel",this.handleMouseWheel.bind(this),!0),window.addEventListener("DOMMouseScroll",this.handleMouseWheel.bind(this),!0),window.addEventListener("keydown",this.handleKeyDown.bind(this),!1),window.addEventListener("keyup",this.handleKeyUp.bind(this),!1),window.addEventListener("blur",this.onFocusLost.bind(this),!1),window.addEventListener("focus",this.onFocus.bind(this),!1),this.createFocusScreen(),this.mouseX=-1,this.mouseY=-1,j.FlxG.mobile?(window.addEventListener("touchstart",this.handleMouseDown.bind(this),!0),window.addEventListener("touchend",this.handleMouseUp.bind(this),!0),window.addEventListener("touchmove",this.handleMouseMove.bind(this),!0),window.addEventListener("MSPointerMove",this.handleMouseMove.bind(this),!0),window.addEventListener("MSPointerDown",this.handleMouseDown.bind(this),!0),window.addEventListener("MSPointerUp",this.handleMouseUp.bind(this),!0),window.addEventListener("pointerMove",this.handleMouseMove.bind(this),!0),window.addEventListener("pointerDown",this.handleMouseDown.bind(this),!0),window.addEventListener("pointerUp",this.handleMouseUp.bind(this),!0)):(j.FlxG.debug||this.forceDebugger,this.createSoundTray()),this._pause=new j.plugin.FlxPause,this.framerate=60;var a=this;this.loader.onAllLoaded=function(){clearInterval(a.loadingInterval),setInterval(a.onEnterFrame.bind(a),1e3*(1/a.framerate))},this.loadingInterval=setInterval(this.onEnterFrameLoading.bind(this),1e3*(1/this.framerate)),this.loader.cache=j.FlxG.loaderCache,this.loader.start()},j.FlxGame.prototype.createSoundTray=function(){},j.FlxGame.prototype.createFocusScreen=function(){},j.FlxGame.prototype.toString=function(){return"FlxGame"},j.FlxSprite=function(a,b,c){a=a||0,b=b||0,j.FlxSprite.parent.constructor.apply(this,[a,b]),this._flashPoint=new j.FlxPoint,this._flashRect=new j.FlxRect,this._flashRect2=new j.FlxRect,this._flashPointZero=new j.FlxPoint,this.offset=new j.FlxPoint,this.origin=new j.FlxPoint,this.scale=new j.FlxPoint(1,1),this._alpha=1,this._color=16777215,this.blend=null,this.antialiasing=!1,this.cameras=null,this.finished=!1,this._facing=j.FlxObject.RIGHT,this._animations=[],this._flipped=0,this._curAnim=null,this._curFrame=0,this._curIndex=0,this._frameTimer=0,this._matrix=new k,this._callback=null,(null===c||void 0===c)&&(c=j.data.FlxSystemAsset.ImgDefault),this.loadGraphic(c)},b(j.FlxSprite,j.FlxObject),j.FlxSprite.prototype.origin=null,j.FlxSprite.prototype.offset=null,j.FlxSprite.prototype.scale=null,j.FlxSprite.prototype.blend=null,j.FlxSprite.prototype.antialiasing=!1,j.FlxSprite.prototype.finished=!1,j.FlxSprite.prototype.frameWidth=0,j.FlxSprite.prototype.frameHeight=0,j.FlxSprite.prototype.frames=0,j.FlxSprite.prototype.framePixels=null,j.FlxSprite.prototype.dirty=!1,j.FlxSprite.prototype._animations=null,j.FlxSprite.prototype._flipped=0,j.FlxSprite.prototype._curAnim=null,j.FlxSprite.prototype._curFrame=0,j.FlxSprite.prototype._curIndex=0,j.FlxSprite.prototype._frameTimer=0,j.FlxSprite.prototype._callback=null,j.FlxSprite.prototype._facing=0,j.FlxSprite.prototype._alpha=0,j.FlxSprite.prototype._color=0,j.FlxSprite.prototype._bakedRotation=0,j.FlxSprite.prototype._pixels=null,j.FlxSprite.prototype._flashPoint=null,j.FlxSprite.prototype._flashRect=null,j.FlxSprite.prototype._flashRect2=null,j.FlxSprite.prototype._flashPointZero=null,j.FlxSprite.prototype._colorTransform=null,j.FlxSprite.prototype._matrix=null,j.FlxSprite.prototype.offsetX=0,j.FlxSprite.prototype.offsetY=0,j.FlxSprite.prototype.destroy=function(){if(null!==this._animations&&void 0!==this._animations){for(var a,b=0,c=this._animations.length;c>b;)a=this._animations[b++],null!==a&&a.destroy();this._animations=null}this._flashPoint=null,this._flashRect=null,this._flashRect2=null,this._flashPointZero=null,this.offset=null,this.origin=null,this.scale=null,this._curAnim=null,this._matrix=null,this._callback=null,this.framePixels=null,j.FlxSprite.parent.destroy.apply(this)},j.FlxSprite.prototype.scaleSprite=function(a,b){this.scale.x=a,this.scale.y=b,1==this.scale.x&&1==this.scale.y?this.setPixels(this._pixels):(this.offset.x+=Math.floor(this.width*-(this.scale.x-1)/2),this.offset.y+=Math.floor(this.height*-(this.scale.y-1)/2),this.width*=this.scale.x,this.height*=this.scale.y)},j.FlxSprite.prototype.loadGraphic=function(a,b,c,d,e,f,g,h){return b=void 0===b?!1:b,c=void 0===c?!1:c,f=void 0===f?!1:f,d=d||0,e=e||0,g=g||0,h=h||0,null===a&&(a=j.data.FlxSystemAsset.ImgDefault),this._bakedRotation=0,this._pixels=j.FlxG.addBitmap(a,c,f),this._flipped=c?this._pixels.width>>1:0,0===d&&(d=b?this._pixels.height:this._flipped>0?.5*this._pixels.width:this._pixels.width),this.width=this.frameWidth=d,0===e&&(e=b?this.width:this._pixels.height),this.height=this.frameHeight=e,this.offsetX=g,this.offsetY=h,this.resetHelpers(),this},j.FlxSprite.prototype.loadRotatedGraphic=function(a,b,c,d,e){b=void 0===b?16:b,c=void 0===c?-1:c,d=void 0===d?!1:d,e=void 0===e?!1:e;var f=Math.sqrt(b),h=j.FlxG.addBitmap(a);if(c>=0){var i=h;h=new m(i.height,i.height);var k=c*h.width,l=0,n=i.width;k>=n&&(l=g(k/n)*h.height,k%=n),this._flashRect.x=k,this._flashRect.y=l,this._flashRect.width=h.width,this._flashRect.height=h.height,h.copyPixels(i,this._flashRect,this._flashPointZero,null,null,!1,!0)}var o=h.width;h.height>o&&(o=h.height),e&&(o*=1.5);var p=Math.ceil(b/f);this.width=o*p,this.height=o*f;var q=String(a)+":"+c+":"+this.width+"x"+this.height,r=j.FlxG.checkBitmapCache(q);if(this._pixels=j.FlxG.createBitmap(this.width,this.height,0,!0,q),this.width=this.frameWidth=this._pixels.width,this.height=this.frameHeight=this._pixels.height,this._bakedRotation=360/b,!r)for(var s,t=0,u=0,v=g(.5*h.width),w=g(.5*h.height),x=g(.5*o),y=g(.5*o);f>t;){for(s=0;p>s;)this._matrix.identity(),this._matrix.translate(-v,-w),this._matrix.rotate(.017453293*u),this._matrix.translate(o*s+x,y),u+=this._bakedRotation,this._pixels.draw(h,this._matrix,null,null,null,d),s++;y+=o,t++}return this.frameWidth=this.frameHeight=this.width=this.height=o,this.resetHelpers(),e&&(this.width=h.width,this.height=h.height,this.centerOffsets()),this},j.FlxSprite.prototype.makeGraphic=function(a,b,c,d,e){return c=c||4294967295,d=void 0===d?!1:d,this._bakedRotation=0,this._pixels=j.FlxG.createBitmap(a,b,c,d,e),this.width=this.frameWidth=this._pixels.width,this.height=this.frameHeight=this._pixels.height,this.resetHelpers(),this},j.FlxSprite.prototype.resetHelpers=function(){this._flashRect.x=0,this._flashRect.y=0,this._flashRect.width=this.frameWidth,this._flashRect.height=this.frameHeight,this._flashRect2.x=0,this._flashRect2.y=0,this._flashRect2.width=this._pixels.width,this._flashRect2.height=this._pixels.height,(null===this.framePixels||this.framePixels.width!=this.width||this.framePixels.height!=this.height)&&(this.framePixels=new m(this.width,this.height)),this.origin.make(.5*this.frameWidth,.5*this.frameHeight),this.framePixels.copyPixels(this._pixels,this._flashRect,this._flashPointZero,null,null,!1,!0),this.frames=this._flashRect2.width/this._flashRect.width*(this._flashRect2.height/this._flashRect.height),null!==this._colorTransform&&this.framePixels.colorTransform(this._flashRect,this._colorTransform),this._curIndex=0},j.FlxSprite.prototype.postUpdate=function(){j.FlxSprite.parent.postUpdate.apply(this),this.updateAnimation()},j.FlxSprite.prototype.draw=function(){if(!this._flicker){this.dirty&&this.calcFrame();var a=j.FlxG.activeCamera;null===this.cameras&&(this.cameras=j.FlxG.cameras),-1!=this.cameras.indexOf(a)&&this.onScreen(a)&&(this._point.x=this.x-f(a.scroll.x*this.scrollFactor.x)-this.offset.x,this._point.y=this.y-f(a.scroll.y*this.scrollFactor.y)-this.offset.y,this._point.x+=this._point.x>0?1e-7:-1e-7,this._point.y+=this._point.y>0?1e-7:-1e-7,(0===this.angle||this._bakedRotation>0)&&1==this.scale.x&&1==this.scale.y&&null===this.blend?(this._flashPoint.x=this._point.x,this._flashPoint.y=this._point.y,a.buffer.copyPixels(this.framePixels,this._flashRect,this._flashPoint,null,null,!0,!1)):(this._matrix.identity(),this._matrix.translate(-this.origin.x,-this.origin.y),this._matrix.scale(this.scale.x,this.scale.y),0!==this.angle&&this._bakedRotation<=0&&this._matrix.rotate(.017453293*this.angle),this._matrix.translate(this._point.x+this.origin.x,this._point.y+this.origin.y),a.buffer.draw(this.framePixels,this._matrix,null,this.blend,null,this.antialiasing)),j.FlxBasic.VISIBLECOUNT++,j.FlxG.visualDebug&&!this.ignoreDrawDebug&&this.drawDebug(a))}},j.FlxSprite.prototype.stamp=function(a,b,c,d){b=b||0,c=c||0,a.drawFrame();var e=a.framePixels;return(0===a.angle||a._bakedRotation>0)&&1==a.scale.x&&1==a.scale.y&&null===a.blend?(this._flashPoint.x=b,this._flashPoint.y=c,this._flashRect2.x=null===d?0:d.x,this._flashRect2.y=null===d?0:d.y,this._flashRect2.width=null===d?e.width:d.width,this._flashRect2.height=null===d?e.height:d.height,this._pixels.copyPixels(e,this._flashRect2,this._flashPoint,null,null,!0,!1),this._flashRect2.width=this._pixels.width,this._flashRect2.height=this._pixels.height,this.calcFrame(),void 0):(this._matrix.identity(),this._matrix.translate(-a.origin.x,-a.origin.y),this._matrix.scale(a.scale.x,a.scale.y),0!==a.angle&&this._matrix.rotate(.017453293*a.angle),this._matrix.translate(b+a.origin.x,c+a.origin.y),this._pixels.draw(e,this._matrix,null,a.blend,null,a.antialiasing),this.calcFrame(),void 0)},j.FlxSprite.prototype.drawLine=function(a,b,c,d,e,g){g=g||1;var h=j.FlxG.flashGfx;h.clear(),h.moveTo(a,b);var i=f(e>>24&255)/255;
0>=i&&(i=1),h.lineStyle(g,e,i),h.lineTo(c,d),this._pixels.draw(j.FlxG.flashGfxSprite),this.dirty=!0},j.FlxSprite.prototype.fill=function(){this._pixels.fillRect(this._flashRect2,this.Color),this._pixels!=this.framePixels&&(this.dirty=!0)},j.FlxSprite.prototype.updateAnimation=function(){if(this._bakedRotation>0){var a=this._curIndex,b=this.angle%360;0>b&&(b+=360),this._curIndex=g(b/this._bakedRotation+.5),a!=this._curIndex&&(this.dirty=!0)}else if(null!==this._curAnim&&this._curAnim.delay>0&&(this._curAnim.looped||!this.finished))for(this._frameTimer+=j.FlxG.elapsed;this._frameTimer>this._curAnim.delay;)this._frameTimer=this._frameTimer-this._curAnim.delay,this._curFrame==this._curAnim.frames.length-1?(this._curAnim.looped&&(this._curFrame=0),this.finished=!0):this._curFrame++,this._curIndex=this._curAnim.frames[this._curFrame],this.dirty=!0;this.dirty&&this.calcFrame()},j.FlxSprite.prototype.drawFrame=function(a){(a||this.dirty)&&this.calcFrame()},j.FlxSprite.prototype.addAnimation=function(a,b,c,d){c=c||0,d=void 0===d?!0:d,this._animations.push(new j.system.FlxAnim(a,b,c,d))},j.FlxSprite.prototype.addAnimationCallback=function(a){this._callback=a},j.FlxSprite.prototype.play=function(a,b){if((b||null===this._curAnim||a!=this._curAnim.name||!this._curAnim.looped&&this.finished)&&null!==this._animations&&void 0!==this._animations){this._curFrame=0,this._curIndex=0,this._frameTimer=0;for(var c=0,d=this._animations.length;d>c;){if(this._animations[c].name==a)return this._curAnim=this._animations[c],this.finished=this._curAnim.delay<=0?!0:!1,this._curIndex=this._curAnim.frames[this._curFrame],this.dirty=!0,void 0;c++}j.FlxG.log('WARNING: No animation called "'+a+'"')}},j.FlxSprite.prototype.randomFrame=function(){this._curAnim=null,this._curIndex=f(j.FlxG.random()*(this._pixels.width/this.frameWidth)),this.dirty=!0},j.FlxSprite.prototype.setOriginToCorner=function(){this.origin.x=this.origin.y=0},j.FlxSprite.prototype.centerOffsets=function(a){this.offset.x=.5*(this.frameWidth-this.width),this.offset.y=.5*(this.frameHeight-this.height),a&&(this.x+=this.offset.x,this.y+=this.offset.y)},j.FlxSprite.prototype.replaceColor=function(a,b,c){var d=null;c&&(d=[]);for(var e,f=0,g=this._pixels.height,h=this._pixels.width;g>f;){for(e=0;h>e;)this._pixels.getPixel32(e,f)==a&&(this._pixels.setPixel32(e,f,b),c&&d.push(new j.FlxPoint(e,f)),this.dirty=!0),e++;f++}return d},j.FlxSprite.prototype.getPixels=function(){return this._pixels},j.FlxSprite.prototype.setPixels=function(a,b,c){b=b||0,c=c||0,this._pixels=a,this.width=this.frameWidth=0===b?this._pixels.width:b,this.height=this.frameHeight=0===c?this._pixels.height:c,this.resetHelpers()},j.FlxSprite.prototype.getFacing=function(){return this._facing},j.FlxSprite.prototype.setFacing=function(a){this._facing!=a&&(this.dirty=!0),this._facing=a},j.FlxSprite.prototype.getAlpha=function(){return this._alpha},j.FlxSprite.prototype.setAlpha=function(a){a>1&&(a=1),0>a&&(a=0),a!=this._alpha&&(this._alpha=a,this._colorTransform=1!=this._alpha||16777215!==this._color?new l(.00392*(this._color>>16),.00392*(this._color>>8&255),.00392*(255&this._color),this._alpha):null,this.dirty=!0)},j.FlxSprite.prototype.getColor=function(){return this._color},j.FlxSprite.prototype.setColor=function(a){a&=16777215,this._color!=a&&(this._color=a,this._colorTransform=1!=this._alpha||16777215!==this._color?new l(.00392*(this._color>>16),.00392*(this._color>>8&255),.00392*(255&this._color),this._alpha):null,this.dirty=!0)},j.FlxSprite.prototype.getFrame=function(){return this._curIndex},j.FlxSprite.prototype.setFrame=function(a){this._curAnim=null,this._curIndex=a,this.dirty=!0},j.FlxSprite.prototype.onScreen=function(a){if(null===a&&(a=j.FlxG.camera),this.getScreenXY(this._point,a),this._point.x=this._point.x-this.offset.x,this._point.y=this._point.y-this.offset.y,(0===this.angle||this._bakedRotation>0)&&1==this.scale.x&&1==this.scale.y)return this._point.x+this.frameWidth>0&&this._point.x<a.width&&this._point.y+this.frameHeight>0&&this._point.y<a.height;var b=this.frameWidth/2,c=this.frameHeight/2,d=this.scale.x>0?this.scale.x:-this.scale.x,e=this.scale.y>0?this.scale.y:-this.scale.y,f=Math.sqrt(b*b+c*c)*(d>=e?d:e);return this._point.x+=b,this._point.y+=c,this._point.x+f>0&&this._point.x-f<a.width&&this._point.y+f>0&&this._point.y-f<a.height},j.FlxSprite.prototype.pixelsOverlapPoint=function(a,b,c){return b=b||255,null===c&&(c=j.FlxG.camera),this.getScreenXY(this._point,c),this._point.x=this._point.x-this.offset.x,this._point.y=this._point.y-this.offset.y,this._flashPoint.x=a.x-c.scroll.x-this._point.x,this._flashPoint.y=a.y-c.scroll.y-this._point.y,this.framePixels.hitTest(this._flashPointZero,b,this._flashPoint)},j.FlxSprite.prototype.calcFrame=function(){var a=g(this._curIndex*this.frameWidth),b=0,c=this._flipped?this._flipped:this._pixels.width;a>=c&&(b=g(a/c)*this.frameHeight,a%=c),this._flipped&&this._facing==j.FlxObject.LEFT&&(a=(this._flipped<<1)-a-this.frameWidth),this._flashRect.x=a,this._flashRect.y=b,this.framePixels.copyPixels(this._pixels,this._flashRect,this._flashPointZero,null,null,!1,!0),this._flashRect.x=this._flashRect.y=0,null!==this._colorTransform&&this.framePixels.colorTransform(this._flashRect,this._colorTransform),null!==this._callback&&this._callback(null!==this._curAnim?this._curAnim.name:null,this._curFrame,this._curIndex),this.dirty=!1},j.FlxSprite.prototype.clearAngle=function(){this.angle=0},j.FlxSprite.prototype.toString=function(){return"FlxSprite"},j.FlxButton=function(a,b,c,d){j.FlxButton.parent.constructor.apply(this,[a,b]),null!==c&&(this.label=new j.FlxText(0,0,80,c),this.label.setFormat(null,10,3355443,"center"),this.labelOffset=new j.FlxPoint(-1,3)),this.loadGraphic(j.data.FlxSystemAsset.ImgDefaultButton,!0,!1,80,20),this.onUp=d,this.onDown=null,this.onOut=null,this.onOver=null,this.soundOver=null,this.soundOut=null,this.soundDown=null,this.soundUp=null,this.status=j.FlxButton.NORMAL,this._onToggle=!1,this._pressed=!1,this._initialized=!1,this.changeAlpha=!0,this.changeFrame=!0},b(j.FlxButton,j.FlxSprite),j.FlxButton.NORMAL=0,j.FlxButton.HIGHLIGHT=1,j.FlxButton.PRESSED=2,j.FlxButton.prototype.label=null,j.FlxButton.prototype.labelOffset=null,j.FlxButton.prototype.onUp=null,j.FlxButton.prototype.onDown=null,j.FlxButton.prototype.onOver=null,j.FlxButton.prototype.onOut=null,j.FlxButton.prototype.status=0,j.FlxButton.prototype.soundOver=null,j.FlxButton.prototype.soundOut=null,j.FlxButton.prototype.soundDown=null,j.FlxButton.prototype.soundUp=null,j.FlxButton.prototype._onToggle=!1,j.FlxButton.prototype._pressed=!1,j.FlxButton.prototype._initialized=!1,j.FlxButton.prototype.changeAlpha=!1,j.FlxButton.prototype.changeFrame=!1,j.FlxButton.prototype.destroy=function(){j.FlxG.mobile?(window.removeEventListener("touchend",this.handleMouseUp.bind(this)),window.removeEventListener("MSPointerDown",this.handleMouseUp.bind(this)),window.removeEventListener("pointerDown",this.handleMouseUp.bind(this))):window.removeEventListener("mouseup",this.handleMouseUp.bind(this)),null!==this.label&&(this.label.destroy(),this.label=null),this.onUp=null,this.onDown=null,this.onOut=null,this.onOver=null,null!==this.soundOver&&this.soundOver.destroy(),null!==this.soundOut&&this.soundOut.destroy(),null!==this.soundDown&&this.soundDown.destroy(),null!==this.soundUp&&this.soundUp.destroy(),j.FlxButton.parent.destroy.apply(this)},j.FlxButton.prototype.preUpdate=function(){j.FlxButton.parent.preUpdate.apply(this),this._initialized||(j.FlxG.mobile?(window.addEventListener("touchend",this.handleMouseUp.bind(this)),window.addEventListener("MSPointerDown",this.handleMouseUp.bind(this)),window.addEventListener("pointerDown",this.handleMouseUp.bind(this))):window.addEventListener("mouseup",this.handleMouseUp.bind(this)),this._initialized=!0)},j.FlxButton.prototype.update=function(){if(this.updateButton(),null!==this.label&&this.changeAlpha)switch(this.getFrame()){case j.FlxButton.HIGHLIGHT:this.label.setAlpha(1);break;case j.FlxButton.PRESSED:this.label.setAlpha(.5),this.label.y++;break;default:case j.FlxButton.NORMAL:this.label.setAlpha(.8)}},j.FlxButton.prototype.updateButton=function(){if(this.status==j.FlxButton.PRESSED&&(this.status=j.FlxButton.NORMAL),j.FlxG.mouse.getVisible()){null===this.cameras&&(this.cameras=j.FlxG.cameras);for(var a,b=0,c=this.cameras.length,d=0,e=j.FlxG.mouse.activePointers+1,f=!0;c>b;)for(a=this.cameras[b++];e>d;)j.FlxG.mouse.getWorldPosition(a,this._point,d),this.overlapsPoint(this._point,!0,a)&&(f=!1,j.FlxG.mouse.pressed(d)&&(this.status=j.FlxButton.PRESSED,j.FlxG.mouse.justPressed(d)&&(null!==this.onDown&&this.onDown.callback(),null!==this.soundDown&&this.soundDown.play(!0))),this.status==j.FlxButton.NORMAL&&(this.status=j.FlxButton.HIGHLIGHT,null!==this.onOver&&this.onOver.callback(),null!==this.soundOver&&this.soundOver.play(!0))),++d;f&&(this.status!=j.FlxButton.NORMAL&&(null!==this.onOut&&this.onOut(),null!==this.soundOut&&this.soundOut.play(!0)),this.status=j.FlxButton.NORMAL)}null!==this.label&&(this.label.x=this.x,this.label.y=this.y),null!==this.labelOffset&&(this.label.x+=this.labelOffset.x,this.label.y+=this.labelOffset.y),this.changeFrame&&(this.status==j.FlxButton.HIGHLIGHT&&(this._onToggle||j.FlxG.mobile)?this.setFrame(j.FlxButton.NORMAL):this.setFrame(this.status))},j.FlxButton.prototype.draw=function(){j.FlxButton.parent.draw.apply(this),null!==this.label&&(this.label.scrollFactor=this.scrollFactor,this.label.cameras=this.cameras,this.label.draw())},j.FlxButton.prototype.resetHelpers=function(){j.FlxButton.parent.resetHelpers.apply(this),null!==this.label&&(this.label.width=this.width,this.label.dirty=!0)},j.FlxButton.prototype.setSounds=function(a,b,c,d,e,f,g,h){null!==a&&(this.soundOver=j.FlxG.loadSound(a,b||1)),null!==c&&(this.soundOut=j.FlxG.loadSound(c,d||1)),null!==e&&(this.soundDown=j.FlxG.loadSound(e,f||1)),null!==g&&(this.soundUp=j.FlxG.loadSound(g,h||1))},j.FlxButton.prototype.getOn=function(){return this._onToggle},j.FlxButton.prototype.setOn=function(a){this._onToggle=a},j.FlxButton.prototype.handleMouseUp=function(){this.exists&&this.visible&&this.active&&this.status==j.FlxButton.PRESSED&&(null!==this.onUp&&this.onUp(),null!==this.soundUp&&this.soundUp.play(!0))},j.FlxButton.prototype.toString=function(){return"FlxButton"},j.FlxCamera=function(a,b,c,d,e,f){e=void 0===e?0:e,f=void 0===f?j.FlxCamera.NO_SCALE:f,j.FlxCamera.parent.constructor.apply(this),this.x=a,this.y=b,this.width=c,this.height=d,this.target=null,this.deadzone=null,this.scroll=new j.FlxPoint,this._point=new j.FlxPoint,this.bounds=null,this.screen=new j.FlxSprite,this.screen.makeGraphic(this.width,this.height,0,!0),this.screen.setOriginToCorner(),this.buffer=this.screen.getPixels(),this.bgColor=j.FlxG.getBgColor(),this._color=16777215,this._alpha=1,this.setZoom(e),this._flashOffsetX=.5*this.width*this.getZoom(),this._flashOffsetY=.5*this.height*this.getZoom(),this._flashRect=new j.FlxRect(0,0,this.width,this.height),this._flashPoint=new j.FlxPoint,this._fxFlashColor=0,this._fxFlashDuration=0,this._fxFlashComplete=null,this._fxFlashAlpha=0,this._fxFadeColor=0,this._fxFadeDuration=0,this._fxFadeComplete=null,this._fxFadeAlpha=0,this._fxShakeIntensity=0,this._fxShakeDuration=0,this._fxShakeComplete=null,this._fxShakeOffset=new j.FlxPoint,this._fxShakeDirection=0,this._fill=new m(this.width,this.height,!0,0),this._style=-1},b(j.FlxCamera,j.FlxBasic),j.FlxCamera.STYLE_LOCKON=0,j.FlxCamera.STYLE_PLATFORMER=1,j.FlxCamera.STYLE_TOPDOWN=2,j.FlxCamera.STYLE_TOPDOWN_TIGHT=3,j.FlxCamera.STYLE_SCREEN_BY_SCREEN=4,j.FlxCamera.STYLE_NO_DEAD_ZONE=5,j.FlxCamera.SHAKE_BOTH_AXES=0,j.FlxCamera.SHAKE_HORIZONTAL_ONLY=1,j.FlxCamera.SHAKE_VERTICAL_ONLY=2,j.FlxCamera.NO_SCALE=0,j.FlxCamera.FILL_X=1,j.FlxCamera.FILL_Y=2,j.FlxCamera.STRETCH=3,j.FlxCamera.EXACT_FIT=4,j.FlxCamera.defaultZoom=0,j.FlxCamera.defaultScaleMode=0,j.FlxCamera.prototype.x=0,j.FlxCamera.prototype.y=0,j.FlxCamera.prototype.width=0,j.FlxCamera.prototype.height=0,j.FlxCamera.prototype.target=null,j.FlxCamera.prototype.deadzone=null,j.FlxCamera.prototype.bounds=null,j.FlxCamera.prototype.scroll=null,j.FlxCamera.prototype.buffer=null,j.FlxCamera.prototype.screen=null,j.FlxCamera.prototype.bgColor=0,j.FlxCamera.prototype._zoom=0,j.FlxCamera.prototype._scaleMode=0,j.FlxCamera.prototype._screenScaleFactorX=1,j.FlxCamera.prototype._screenScaleFactorY=1,j.FlxCamera.prototype.viewportWidth=0,j.FlxCamera.prototype.viewportHeight=0,j.FlxCamera.prototype._point=null,j.FlxCamera.prototype._color=0,j.FlxCamera.prototype._flashOffsetX=0,j.FlxCamera.prototype._flashOffsetY=0,j.FlxCamera.prototype._flashRect=null,j.FlxCamera.prototype._flashPoint=null,j.FlxCamera.prototype._fxFlashColor=0,j.FlxCamera.prototype._fxFlashDuration=0,j.FlxCamera.prototype._fxFlashComplete=null,j.FlxCamera.prototype._fxFlashAlpha=0,j.FlxCamera.prototype._fxFadeColor=0,j.FlxCamera.prototype._fxFadeDuration=0,j.FlxCamera.prototype._fxFadeComplete=null,j.FlxCamera.prototype._fxFadeAlpha=0,j.FlxCamera.prototype._fxShakeIntensity=0,j.FlxCamera.prototype._fxShakeDuration=0,j.FlxCamera.prototype._fxShakeComplete=null,j.FlxCamera.prototype._fxShakeOffset=null,j.FlxCamera.prototype._fxShakeDirection=0,j.FlxCamera.prototype._fill=null,j.FlxCamera.prototype._angle=0,j.FlxCamera.prototype._alpha=0,j.FlxCamera.prototype._style=0,j.FlxCamera.prototype.destroy=function(){null!==this.screen&&this.screen.destroy(),this.screen=null,this.target=null,this.scroll=null,this.deadzone=null,this.bounds=null,this.buffer=null,this._flashRect=null,this._flashPoint=null,this._fxFlashComplete=null,this._fxFadeComplete=null,this._fxShakeComplete=null,this._fxShakeOffset=null,this._fill=null,j.FlxCamera.parent.destroy.apply(this)},j.FlxCamera.prototype.update=function(){if(null!==this.target)if(null===this.deadzone)this.focusOn(this.target.getMidpoint(this._point));else{var a=0,b=Math.ceil(this.target.x+(this.target.x>0?1e-7:-1e-7)),c=Math.ceil(this.target.y+(this.target.y>0?1e-7:-1e-7));this._style==j.FlxCamera.STYLE_SCREEN_BY_SCREEN?(b>this.scroll.x+this.width?this.scroll.x+=this.width:b<this.scroll.x&&(this.scroll.x-=this.width),c>this.scroll.y+this.height?this.scroll.y+=this.height:c<this.scroll.y&&(this.scroll.y-=this.height)):(a=b-this.deadzone.x,this.scroll.x>a&&(this.scroll.x=a),a=b+this.target.width-this.deadzone.x-this.deadzone.width,this.scroll.x<a&&(this.scroll.x=a),a=c-this.deadzone.y,this.scroll.y>a&&(this.scroll.y=a),a=c+this.target.height-this.deadzone.y-this.deadzone.height,this.scroll.y<a&&(this.scroll.y=a))}if(null!==this.bounds){var d=0,e=0;this.getZoom()>1&&(d=this.width*(this.getZoom()-1)/(2*this.getZoom()),e=this.height*(this.getZoom()-1)/(2*this.getZoom())),this.scroll.x<this.bounds.getLeft()-d&&(this.scroll.x=this.bounds.getLeft()-d),this.scroll.x>this.bounds.getRight()-this.width+d&&(this.scroll.x=this.bounds.getRight()-this.width+d),this.scroll.y<this.bounds.getTop()-e&&(this.scroll.y=this.bounds.getTop()-e),this.scroll.y>this.bounds.getBottom()-this.height+e&&(this.scroll.y=this.bounds.getBottom()-this.height+e)}this._fxFlashAlpha>0&&(this._fxFlashAlpha-=j.FlxG.elapsed/this._fxFlashDuration,this._fxFlashAlpha<=0&&null!==this._fxFlashComplete&&this._fxFlashComplete()),this._fxFadeAlpha>0&&this._fxFadeAlpha<1&&(this._fxFadeAlpha+=j.FlxG.elapsed/this._fxFadeDuration,this._fxFadeAlpha>=1&&(this._fxFadeAlpha=1,null!==this._fxFadeComplete&&this._fxFadeComplete())),this._fxShakeDuration>0&&(this._fxShakeDuration-=j.FlxG.elapsed,this._fxShakeDuration<=0?(this._fxShakeOffset.make(),null!==this._fxShakeComplete&&this._fxShakeComplete()):((this._fxShakeDirection==j.FlxCamera.SHAKE_BOTH_AXES||this._fxShakeDirection==j.FlxCamera.SHAKE_HORIZONTAL_ONLY)&&(this._fxShakeOffset.x=(j.FlxG.random()*this._fxShakeIntensity*this.width*2-this._fxShakeIntensity*this.width)*this._zoom),(this._fxShakeDirection==j.FlxCamera.SHAKE_BOTH_AXES||this._fxShakeDirection==j.FlxCamera.SHAKE_VERTICAL_ONLY)&&(this._fxShakeOffset.y=(j.FlxG.random()*this._fxShakeIntensity*this.height*2-this._fxShakeIntensity*this.height)*this._zoom)))},j.FlxCamera.prototype.follow=function(a,b,c){this._style=void 0===b?j.FlxCamera.STYLE_LOCKON:b,this.target=a;var d,e=0,f=0;switch(b){case j.FlxCamera.STYLE_PLATFORMER:e=this.width/8+(null!==c?c.x:0),f=this.height/3+(null!==c?c.y:0),this.deadzone=new j.FlxRect((this.width-e)/2,(this.height-f)/2-.25*f,e,f);break;case j.FlxCamera.STYLE_TOPDOWN:d=Math.max(this.width,this.height)/4,this.deadzone=new j.FlxRect((this.width-d)/2,(this.height-d)/2,d,d);break;case j.FlxCamera.STYLE_TOPDOWN_TIGHT:d=Math.max(this.width,this.height)/8,this.deadzone=new j.FlxRect((this.width-d)/2,(this.height-d)/2,d,d);break;case j.FlxCamera.STYLE_LOCKON:null!==this.target&&(e=this.target.width+(null!==c?c.x:0),f=this.target.height+(null!==c?c.y:0)),this.deadzone=new j.FlxRect((this.width-e)/2,(this.height-f)/2-.25*f,e,f);break;case j.FlxCamera.STYLE_SCREEN_BY_SCREEN:this.deadzone=new j.FlxRect(0,0,this.width,this.height);break;default:this.deadzone=null}},j.FlxCamera.prototype.focusOn=function(a){a.x+=a.x>0?1e-7:-1e-7,a.y+=a.y>0?1e-7:-1e-7,this.scroll.make(a.x-.5*this.width,a.y-.5*this.height)},j.FlxCamera.prototype.setBounds=function(a,b,c,d,e){a=a||0,b=b||0,c=c||0,d=d||0,null===this.bounds&&(this.bounds=new j.FlxRect),this.bounds.make(a,b,c,d),e&&j.FlxG.worldBounds.copyFrom(this.bounds),this.update()},j.FlxCamera.prototype.flash=function(a,b,c,d){a=a||4294967295,b=b||1,d=void 0===d?!1:d,!d&&this._fxFlashAlpha>0||(this._fxFlashColor=a,0>=b&&(b=Number.MIN_VALUE),this._fxFlashDuration=b,this._fxFlashComplete=c,this._fxFlashAlpha=1)},j.FlxCamera.prototype.fade=function(a,b,c,d){a=a||4278190080,b=b||1,d=void 0===d?!1:d,!d&&this._fxFadeAlpha>0||(this._fxFadeColor=a,0>=b&&(b=Number.MIN_VALUE),this._fxFadeDuration=b,this._fxFadeComplete=c,this._fxFadeAlpha=Number.MIN_VALUE)},j.FlxCamera.prototype.shake=function(a,b,c,d,e){a=a||.05,b=b||.5,d=void 0===d?!0:d,e=e||j.FlxCamera.SHAKE_BOTH_AXES,(d||0===this._fxShakeOffset.x&&0===this._fxShakeOffset.y)&&(this._fxShakeIntensity=a,this._fxShakeDuration=b,this._fxShakeComplete=c,this._fxShakeDirection=e,this._fxShakeOffset.make())},j.FlxCamera.prototype.stopFX=function(){this._fxFlashAlpha=0,this._fxFadeAlpha=0,this._fxShakeDuration=0,this.x=this.x+.5*this.width,this.y=this.y+.5*this.height},j.FlxCamera.prototype.copyFrom=function(a){return null===a.bounds?this.bounds=null:(null===this.bounds&&(this.bounds=new j.FlxRect),this.bounds.copyFrom(a.bounds)),this.target=a.target,null!==this.target&&(null===a.deadzone?this.deadzone=null:(null===this.deadzone&&(this.deadzone=new j.FlxRect),this.deadzone.copyFrom(a.deadzone))),this},j.FlxCamera.prototype.getZoom=function(){return this._zoom},j.FlxCamera.prototype.setZoom=function(a){this._zoom=0===a?j.FlxCamera.defaultZoom:a,this.setScale(this._zoom,this._zoom)},j.FlxCamera.prototype.getScaleMode=function(){return this._scaleMode},j.FlxCamera.prototype.setScaleMode=function(a){this._scaleMode=0===a?j.FlxCamera.defaultScaleMode:a,this.setScale(this._zoom,this._zoom)},j.FlxCamera.prototype.getAlpha=function(){return this._alpha},j.FlxCamera.prototype.setAlpha=function(a){this._alpha=a},j.FlxCamera.prototype.getAngle=function(){return this._angle},j.FlxCamera.prototype.setAngle=function(a){this._angle=a},j.FlxCamera.prototype.getColor=function(){return this._color},j.FlxCamera.prototype.setColor=function(a){this._color=a},j.FlxCamera.prototype.getScale=function(){return this._point.make(this._scaleX,this._scaleY)},j.FlxCamera.prototype.setScale=function(a,b){this._scaleX=a,this._scaleY=b},j.FlxCamera.prototype.fill=function(a,b){b=void 0===b?!0:b;var c=j.FlxU.multiplyColors(a,this._color);this._fill.fillRect(this._flashRect,c),this.buffer.copyPixels(this._fill,this._flashRect,this._flashPoint,null,null,b)},j.FlxCamera.prototype.drawFX=function(){var a;this._fxFlashAlpha>0&&(a=this._fxFlashColor>>24,this.fill((g((0>=a?255:a)*this._fxFlashAlpha)<<24)+(16777215&this._fxFlashColor))),this._fxFadeAlpha>0&&(a=this._fxFadeColor>>24,this.fill((g((0>=a?255:a)*this._fxFadeAlpha)<<24)+(16777215&this._fxFadeColor))),(0!==this._fxShakeOffset.x||0!==this._fxShakeOffset.y)&&(this.x=this.x+this._flashOffsetX+this._fxShakeOffset.x,this.y=this.y+this._flashOffsetY+this._fxShakeOffset.y)},j.FlxCamera.prototype.toString=function(){return"FlxCamera"},j.FlxParticle=function(){j.FlxParticle.parent.constructor.apply(this),this.lifespan=0,this.friction=500},b(j.FlxParticle,j.FlxSprite),j.FlxParticle.prototype.lifespan=0,j.FlxParticle.prototype.friction=0,j.FlxParticle.prototype.update=function(){this.lifespan<=0||(this.lifespan-=j.FlxG.elapsed,this.lifespan<=0&&this.kill(),this.touching&&0!==this.angularVelocity&&(this.angularVelocity=-this.angularVelocity),this.acceleration.y>0&&(this.touching&j.FlxObject.FLOOR?(this.drag.x=this.friction,this.wasTouching&j.FlxObject.FLOOR||(this.velocity.y<10*-this.elasticity?0!==this.angularVelocity&&(this.angularVelocity*=-this.elasticity):(this.velocity.y=0,this.angularVelocity=0))):this.drag.x=0))},j.FlxParticle.prototype.onEmit=function(){},j.FlxParticle.prototype.toString=function(){return"FlxParticle"},j.FlxEmitter=function(a,b,c){j.FlxEmitter.parent.constructor.apply(this,[c]),this.x=a,this.y=b,this.width=0,this.height=0,this.minParticleSpeed=new j.FlxPoint(-100,-100),this.maxParticleSpeed=new j.FlxPoint(100,100),this.minRotation=-360,this.maxRotation=360,this.gravity=0,this._particleClass=new j.FlxParticle,this.particleDrag=new j.FlxPoint,this.frequency=.1,this.lifespan=3,this.bounce=0,this._quantity=0,this._counter=0,this._explode=!0,this.on=!1,this._point=new j.FlxPoint,this._waitForKill=!1},b(j.FlxEmitter,j.FlxGroup),j.FlxEmitter.prototype.x=0,j.FlxEmitter.prototype.y=0,j.FlxEmitter.prototype.width=0,j.FlxEmitter.prototype.height=0,j.FlxEmitter.prototype.minParticleSpeed=null,j.FlxEmitter.prototype.maxParticleSpeed=null,j.FlxEmitter.prototype.particleDrag=null,j.FlxEmitter.prototype.minRotation=0,j.FlxEmitter.prototype.maxRotation=0,j.FlxEmitter.prototype.gravity=0,j.FlxEmitter.prototype.on=!1,j.FlxEmitter.prototype.frequency=0,j.FlxEmitter.prototype.lifespan=0,j.FlxEmitter.prototype.bounce=0,j.FlxEmitter.prototype._particleClass=null,j.FlxEmitter.prototype._quantity=0,j.FlxEmitter.prototype._explode=!1,j.FlxEmitter.prototype._timer=0,j.FlxEmitter.prototype._counter=0,j.FlxEmitter.prototype._point=null,j.FlxEmitter.prototype._waitForKill=!1,j.FlxEmitter.prototype.destroy=function(){this.minParticleSpeed=null,this.maxParticleSpeed=null,this.particleDrag=null,this._particleClass=null,this._point=null,j.FlxEmitter.parent.destroy.apply(this)},j.FlxEmitter.prototype.makeParticles=function(a,b,c,d,e){c=c||16,e=e||.8,this._maxSize=b||50;var f=1;if(d){var g=new j.FlxSprite;g.loadGraphic(a,!0),f=g.frames,g.destroy()}for(var h=0,i=null,k=0;b>k;)i=new this._particleClass.constructor,d?(h=j.FlxG.random()*f,c>0?i.loadRotatedGraphic(a,c,h):(i.loadGraphic(a,!0),i.setFrame(h))):c>0?i.loadRotatedGraphic(a,c):i.loadGraphic(a),e>0?(i.width*=e,i.height*=e,i.centerOffsets()):i.allowCollisions=j.FlxObject.NONE,i.exists=!1,this.add(i),k++;return this},j.FlxEmitter.prototype.update=function(){if(this.on)if(this._explode){this.on=!1,this._waitForKill=!0;var a=0,b=this._quantity;for((0>=b||b>this.length)&&(b=this.length);b>a;)this.emitParticle(),a++;this._quantity=0}else if(this.frequency<=0)this.emitParticle(),this._quantity>0&&++this._counter>=this._quantity&&(this.on=!1,this._waitForKill=!0,this._quantity=0);else for(this._timer+=j.FlxG.elapsed;this.frequency>0&&this._timer>this.frequency&&this.on;)this._timer-=this.frequency,this.emitParticle(),this._quantity>0&&++this._counter>=this._quantity&&(this.on=!1,this._waitForKill=!0,this._quantity=0);j.FlxEmitter.parent.update.apply(this)},j.FlxEmitter.prototype.kill=function(){this.on=!1,this._waitForKill=!1,j.FlxEmitter.parent.kill.apply(this)},j.FlxEmitter.prototype.start=function(a,b,c,d){a=void 0===a?!0:a,b=b||0,c=c||.1,d=d||0,this.revive(),this.visible=!0,this.on=!0,this._explode=a,this.lifespan=b,this.frequency=c,this._quantity+=d,this._counter=0,this._timer=0,this._waitForKill=!1},j.FlxEmitter.prototype.emitParticle=function(){var a=this.recycle(this._particleClass);a.lifespan=this.lifespan,a.elasticity=this.bounce,a.reset(this.x-(a.width>>1)+j.FlxG.random()*this.width,this.y-(a.height>>1)+j.FlxG.random()*this.height),a.visible=!0,a.velocity.x=this.minParticleSpeed.x!=this.maxParticleSpeed.x?this.minParticleSpeed.x+j.FlxG.random()*(this.maxParticleSpeed.x-this.minParticleSpeed.x):this.minParticleSpeed.x,a.velocity.y=this.minParticleSpeed.y!=this.maxParticleSpeed.y?this.minParticleSpeed.y+j.FlxG.random()*(this.maxParticleSpeed.y-this.minParticleSpeed.y):this.minParticleSpeed.y,a.acceleration.y=this.gravity,a.angularVelocity=this.minRotation!=this.maxRotation?this.minRotation+j.FlxG.random()*(this.maxRotation-this.minRotation):this.minRotation,0!==a.angularVelocity&&(a.angle=360*j.FlxG.random()-180),a.drag.x=this.particleDrag.x,a.drag.y=this.particleDrag.y,a.onEmit()},j.FlxEmitter.prototype.getParticleClass=function(){return this._particleClass},j.FlxEmitter.prototype.setParticleClass=function(a){var b=new a.constructor;b instanceof j.FlxParticle?this._particleClass=a:j.FlxG.log("ERROR: "+j.FlxU.getClassName(b,!0)+" must extend FlxParticle in order to be used in a FlxEmitter.")},j.FlxEmitter.prototype.setSize=function(a,b){this.width=a,this.height=b},j.FlxEmitter.prototype.setXSpeed=function(a,b){this.minParticleSpeed.x=a||0,this.maxParticleSpeed.x=b||0},j.FlxEmitter.prototype.setYSpeed=function(a,b){this.minParticleSpeed.y=a||0,this.maxParticleSpeed.y=b||0},j.FlxEmitter.prototype.setRotation=function(a,b){this.minRotation=a||0,this.maxRotation=b||0},j.FlxEmitter.prototype.at=function(a){a.getMidpoint(this._point),this.x=this._point.x-(this.width>>1),this.y=this._point.y-(this.height>>1)},j.FlxEmitter.prototype.toString=function(){return"FlxEmitter"},j.FlxTileblock=function(a,b,c,d){j.FlxTileblock.parent.constructor.apply(this,[a,b]),this.makeGraphic(c,d,j.FlxG.RED,!0),this.active=!1,this.immovable=!0,this.moves=!1},b(j.FlxTileblock,j.FlxSprite),j.FlxTileblock.prototype.loadTiles=function(a,b,c,d){if(null===a)return this;b=b||0,c=c||0,d=d||0;var e=(new j.FlxSprite).loadGraphic(a,!0,!1,b,c),f=e.width,h=e.height,i=e.frames+d,k=!1;this.width%e.width!==0&&(this.width=g(this.width/f+1)*f,k=!0),this.height%e.height!==0&&(this.height=g(this.height/h+1)*h,k=!0),k?this.makeGraphic(this.width,this.height,0,!0):this.fill(0);for(var l,m,n=0,o=0,p=this.width/f,q=this.height/h;q>n;){for(m=0,l=0;p>l;)j.FlxG.random()*i>d&&(e.randomFrame(),e.drawFrame(),this.stamp(e,m,o)),m+=f,l++;o+=h,n++}return this},j.FlxTileblock.prototype.toString=function(){return"FlxTileblock"},j.FlxTilemap=function(){j.FlxTilemap.parent.constructor.apply(this),this.auto=j.FlxTilemap.OFF,this.widthInTiles=0,this.heightInTiles=0,this.totalTiles=0,this._buffers=[],this._flashPoint=new j.FlxPoint,this._flashRect=null,this._data=null,this._tileWidth=0,this._tileHeight=0,this._rects=null,this._tiles=null,this._tileObjects=null,this.immovable=!0,this.moves=!1,this.cameras=null,this._debugTileNotSolid=null,this._debugTilePartial=null,this._debugTileSolid=null,this._debugRect=null,this._lastVisualDebug=j.FlxG.visualDebug,this._startingIndex=0},b(j.FlxTilemap,j.FlxObject),j.FlxTilemap.OFF=0,j.FlxTilemap.AUTO=1,j.FlxTilemap.ALT=2,j.FlxTilemap.prototype.auto=0,j.FlxTilemap.prototype.widthInTiles=0,j.FlxTilemap.prototype.heightInTiles=0,j.FlxTilemap.prototype.totalTiles=0,j.FlxTilemap.prototype._flashPoint=null,j.FlxTilemap.prototype._flashRect=null,j.FlxTilemap.prototype._tiles=null,j.FlxTilemap.prototype._buffers=null,j.FlxTilemap.prototype._data=null,j.FlxTilemap.prototype._rects=null,j.FlxTilemap.prototype._tileWidth=0,j.FlxTilemap.prototype._tileHeight=0,j.FlxTilemap.prototype._tileObjects=null,j.FlxTilemap.prototype._debugTileNotSolid=null,j.FlxTilemap.prototype._debugTilePartial=null,j.FlxTilemap.prototype._debugTileSolid=null,j.FlxTilemap.prototype._debugRect=null,j.FlxTilemap.prototype._lastVisualDebug=!1,j.FlxTilemap.prototype._startingIndex=0,j.FlxTilemap.prototype.offsetX=0,j.FlxTilemap.prototype.offsetY=0,j.FlxTilemap.prototype.destroy=function(){this._flashPoint=null,this._flashRect=null,this._tiles=null;var a=0,b=0;if(null!==this._tileObjects){for(a=0,b=this._tileObjects.length;b>a;)this._tileObjects[a++].destroy();this._tileObjects=null}if(null!==this._buffers){for(a=0,b=this._buffers.length;b>a;)this._buffers[a++].destroy();this._buffers=null}this._data=null,this._rects=null,this._debugTileNotSolid=null,this._debugTilePartial=null,this._debugTileSolid=null,this._debugRect=null,j.FlxTilemap.parent.destroy.apply(this)},j.FlxTilemap.prototype.loadMap=function(a,b,c,d,e,f,h,i,k,l){c=c||0,d=d||0,f=f||0,h=void 0===h?1:h,i=void 0===i?1:i,k=k||0,l=l||0,e=void 0===e?j.FlxTilemap.OFF:e,this.auto=e,this._startingIndex=0>=f?0:f,this.offsetX=k,this.offsetY=l;var m,n=a.split("\n");this.heightInTiles=n.length,this._data=[];for(var o,p=0;p<this.heightInTiles;)if(m=n[p++].split(","),m.length<=1)this.heightInTiles=this.heightInTiles-1;else for(0===this.widthInTiles&&(this.widthInTiles=m.length),o=0;o<this.widthInTiles;)this._data.push(g(m[o++]));var q;if(this.totalTiles=this.widthInTiles*this.heightInTiles,this.auto>j.FlxTilemap.OFF)for(this._startingIndex=1,h=1,i=1,q=0;q<this.totalTiles;)this.autoTile(q++);this._tiles=j.FlxG.addBitmap(b),this._tileWidth=c,0===this._tileWidth&&(this._tileWidth=this._tiles.height),this._tileHeight=d,0===this._tileHeight&&(this._tileHeight=this._tileWidth),q=0;var r=this._tiles.width/(this._tileWidth+this.offsetX)*(this._tiles.height/(this._tileHeight+this.offsetY))+this._startingIndex;for(this._tileObjects=new Array(r);r>q;)this._tileObjects[q]=new j.system.FlxTile(this,q,this._tileWidth,this._tileHeight,q>=h,q>=i?this.allowCollisions:j.FlxObject.NONE),q++;for(this._debugTileNotSolid=this.makeDebugTile(j.FlxG.BLUE),this._debugTilePartial=this.makeDebugTile(j.FlxG.PINK),this._debugTileSolid=this.makeDebugTile(j.FlxG.GREEN),this._debugRect=new j.FlxRect(0,0,this._tileWidth,this._tileHeight),this.width=this.widthInTiles*this._tileWidth,this.height=this.heightInTiles*this._tileHeight,this._rects=new Array(this.totalTiles),q=0;q<this.totalTiles;)this.updateTile(q++);return this},j.FlxTilemap.prototype.makeDebugTile=function(a){var b=new m(this._tileWidth,this._tileHeight,!0,0),c=j.FlxG.flashGfx;return c.clearRect(0,0,j.FlxG.flashGfxSprite.width,j.FlxG.flashGfxSprite.height),c.lineStyle=m.makeRGBA(a),c.beginPath(),c.moveTo(0,0),c.lineTo(this._tileWidth-1,0),c.lineTo(this._tileWidth-1,this._tileHeight-1),c.lineTo(0,this._tileHeight-1),c.lineTo(0,0),c.stroke(),b.copyPixels(j.FlxG.flashGfxSprite,new j.FlxRect(0,0,this._tileWidth,this._tileHeight),new j.FlxPoint(0,0)),b},j.FlxTilemap.prototype.update=function(){this._lastVisualDebug!=j.FlxG.visualDebug&&(this._lastVisualDebug=j.FlxG.visualDebug,this.setDirty())},j.FlxTilemap.prototype.drawTilemap=function(a,b){a.fill(),this._point.x=f(b.scroll.x*this.scrollFactor.x)-this.x,this._point.y=f(b.scroll.y*this.scrollFactor.y)-this.y;var c=f((this._point.x+(this._point.x>0?1e-7:-1e-7))/this._tileWidth),d=f((this._point.y+(this._point.y>0?1e-7:-1e-7))/this._tileHeight),e=a.rows,g=a.columns;0>c&&(c=0),c>this.widthInTiles-g&&(c=this.widthInTiles-g),0>d&&(d=0),d>this.heightInTiles-e&&(d=this.heightInTiles-e);var h=d*this.widthInTiles+c;this._flashPoint.y=0;for(var i,k,l,m,n=0;e>n;){for(k=h,i=0,this._flashPoint.x=0;g>i;)this._flashRect=this._rects[k],null!==this._flashRect&&(a.getPixels().copyPixels(this._tiles,this._flashRect,this._flashPoint,null,null,!0),j.FlxG.visualDebug&&!this.ignoreDrawDebug&&(l=this._tileObjects[this._data[k]],null!==l&&(m=l.allowCollisions<=j.FlxObject.NONE?this._debugTileNotSolid:l.allowCollisions!=j.FlxObject.ANY?this._debugTilePartial:this._debugTileSolid,this._flashPoint.x+=l.offset.x,this._flashPoint.y+=l.offset.y,a.getPixels().copyPixels(m,this._debugRect,this._flashPoint,null,null,!0),this._flashPoint.x-=l.offset.x,this._flashPoint.y-=l.offset.y))),this._flashPoint.x+=this._tileWidth,i++,k++;
h+=this.widthInTiles,this._flashPoint.y+=this._tileHeight,n++}a.x=c*this._tileWidth,a.y=d*this._tileHeight},j.FlxTilemap.prototype.draw=function(){if(0===this._flickerTimer||(this._flicker=!this._flicker,!this.flicker)){var a=j.FlxG.activeCamera;if((null===this.cameras||void 0===this.cameras)&&(this.cameras=j.FlxG.cameras),-1!=this.cameras.indexOf(a)){var b,c=this.cameras.indexOf(a);(null===this._buffers[c]||void 0===this._buffers[c])&&(this._buffers[c]=new j.system.FlxTilemapBuffer(this._tileWidth,this._tileHeight,this.widthInTiles,this.heightInTiles,a)),b=this._buffers[c++],b.dirty||(this._point.x=this.x-f(a.scroll.x*this.scrollFactor.x)+b.x,this._point.y=this.y-f(a.scroll.y*this.scrollFactor.y)+b.y,b.dirty=this._point.x>0||this._point.y>0||this._point.x+b.width<a.width||this._point.y+b.height<a.height),b.dirty&&(this.drawTilemap(b,a),b.dirty=!1),j.FlxG.keys.justPressed("Q")&&console.log(this._flashPoint.x),this._flashPoint.x=this.x-f(a.scroll.x*this.scrollFactor.x)+b.x,this._flashPoint.y=this.y-f(a.scroll.y*this.scrollFactor.y)+b.y,this._flashPoint.x+=this._flashPoint.x>0?1e-7:-1e-7,this._flashPoint.y+=this._flashPoint.y>0?1e-7:-1e-7,b.draw(a,this._flashPoint),j.FlxBasic.VISIBLECOUNT++}}},j.FlxTilemap.prototype.getData=function(a){if(a=void 0===a?!1:a,!a)return this._data;for(var b=0,c=this._data.length,d=new Array(c);c>b;)d[b]=this._tileObjects[this._data[b]].allowCollisions>0?1:0,b++;return d},j.FlxTilemap.prototype.setDirty=function(a){a=void 0===a?!0:a;for(var b=0,c=this._buffers.length;c>b;)this._buffers[b++].dirty=a},j.FlxTilemap.prototype.findPath=function(a,b,c,d,e){c=void 0===c?!0:c,d=void 0===d?!1:d,e=void 0===e?!0:e;var g=f((a.y-this.y)/this._tileHeight)*this.widthInTiles+f((a.x-this.x)/this._tileWidth),h=f((b.y-this.y)/this._tileHeight)*this.widthInTiles+f((b.x-this.x)/this._tileWidth);if(this._tileObjects[this._data[g]].allowCollisions>0||this._tileObjects[this._data[h]].allowCollisions>0)return null;var i=this.computePathDistance(g,h,e);if(null===i)return null;var k=[];this.walkPath(i,h,k);var l;l=k[k.length-1],l.x=a.x,l.y=a.y,l=k[0],l.x=b.x,l.y=b.y,c&&this.simplifyPath(k),d&&this.raySimplifyPath(k);for(var m=new j.FlxPath,n=k.length-1;n>=0;)l=k[n--],null!==l&&m.addPoint(l,!0);return m},j.FlxTilemap.prototype.simplifyPath=function(a){for(var b,c,d,e=a[0],f=1,g=a.length-1;g>f;)d=a[f],b=(d.x-e.x)/(d.y-e.y),c=(d.x-a[f+1].x)/(d.y-a[f+1].y),e.x==a[f+1].x||e.y==a[f+1].y||b==c?a[f]=null:e=d,f++},j.FlxTilemap.prototype.raySimplifyPath=function(a){for(var b,c=a[0],d=-1,e=1,f=a.length;f>e;)b=a[e++],null!==b&&(this.ray(c,b,this._point)?d>=0&&(a[d]=null):c=a[d],d=e-1)},j.FlxTilemap.prototype.computePathDistance=function(a,b,c){for(var d=this.widthInTiles*this.heightInTiles,e=new Array(d),f=0;d>f;)e[f]=this._tileObjects[this._data[f]].allowCollisions?-2:-1,f++;e[a]=0;var g,h=1;g=[],g.push(a);for(var i,j,k,l,m,n,o,p=!1;g.length>0;){for(i=g,g=[],f=0,o=i.length;o>f;){if(j=i[f++],j==b){p=!0,g.length=0;break}k=j%this.widthInTiles>0,l=j%this.widthInTiles<this.widthInTiles-1,m=j/this.widthInTiles>0,n=j/this.widthInTiles<this.heightInTiles-1;var q;m&&(q=j-this.widthInTiles,-1==e[q]&&(e[q]=h,g.push(q))),l&&(q=j+1,-1==e[q]&&(e[q]=h,g.push(q))),n&&(q=j+this.widthInTiles,-1==e[q]&&(e[q]=h,g.push(q))),k&&(q=j-1,-1==e[q]&&(e[q]=h,g.push(q))),m&&l&&(q=j-this.widthInTiles+1,c&&-1==e[q]&&e[j-this.widthInTiles]>=-1&&e[j+1]>=-1?(e[q]=h,g.push(q)):c||-1!=e[q]||(e[q]=h,g.push(q))),l&&n&&(q=j+this.widthInTiles+1,c&&-1==e[q]&&e[j+this.widthInTiles]>=-1&&e[j+1]>=-1?(e[q]=h,g.push(q)):c||-1!=e[q]||(e[q]=h,g.push(q))),k&&n&&(q=j+this.widthInTiles-1,c&&-1==e[q]&&e[j+this.widthInTiles]>=-1&&e[j-1]>=-1?(e[q]=h,g.push(q)):c||-1!=e[q]||(e[q]=h,g.push(q))),m&&k&&(q=j-this.widthInTiles-1,c&&-1==e[q]&&e[j-this.widthInTiles]>=-1&&e[j-1]>=-1?(e[q]=h,g.push(q)):c||-1!=e[q]||(e[q]=h,g.push(q)))}h++}return p||(e=null),e},j.FlxTilemap.prototype.walkPath=function(a,b,c){if(c.push(new j.FlxPoint(this.x+g(b%this.widthInTiles)*this._tileWidth+.5*this._tileWidth,this.y+g(b/this.widthInTiles)*this._tileHeight+.5*this._tileHeight)),0!==a[b]){var d,e=b%this.widthInTiles>0,f=b%this.widthInTiles<this.widthInTiles-1,h=b/this.widthInTiles>0,i=b/this.widthInTiles<this.heightInTiles-1,k=a[b];return h&&(d=b-this.widthInTiles,a[d]>=0&&a[d]<k)?(this.walkPath(a,d,c),void 0):f&&(d=b+1,a[d]>=0&&a[d]<k)?(this.walkPath(a,d,c),void 0):i&&(d=b+this.widthInTiles,a[d]>=0&&a[d]<k)?(this.walkPath(a,d,c),void 0):e&&(d=b-1,a[d]>=0&&a[d]<k)?(this.walkPath(a,d,c),void 0):h&&f&&(d=b-this.widthInTiles+1,a[d]>=0&&a[d]<k)?(this.walkPath(a,d,c),void 0):f&&i&&(d=b+this.widthInTiles+1,a[d]>=0&&a[d]<k)?(this.walkPath(a,d,c),void 0):e&&i&&(d=b+this.widthInTiles-1,a[d]>=0&&a[d]<k)?(this.walkPath(a,d,c),void 0):h&&e&&(d=b-this.widthInTiles-1,a[d]>=0&&a[d]<k)?(this.walkPath(a,d,c),void 0):void 0}},j.FlxTilemap.prototype.overlaps=function(a,b,c){if(b=void 0===b?!1:b,a instanceof j.FlxGroup){for(var d,e=!1,f=0,g=a.members;length>f;)d=g[f++],d instanceof j.FlxObject?this.overlapsWithCallback(d)&&(e=!0):this.overlaps(d,b,c)&&(e=!0);return e}return a instanceof j.FlxObject?this.overlapsWithCallback(a):!1},j.FlxTilemap.prototype.overlapsAt=function(a,b,c,d,e){if(d=void 0===d?!1:d,c instanceof j.FlxGroup){for(var f,g=!1,h=0,i=c.members;length>h;)f=i[h++],f instanceof j.FlxObject?(this._point.x=a,this._point.y=b,this.overlapsWithCallback(f,null,!1,this._point)&&(g=!0)):this.overlapsAt(a,b,f,d,e)&&(g=!0);return g}return c instanceof j.FlxObject?(this._point.x=a,this._point.y=b,this.overlapsWithCallback(c,null,!1,this._point)):!1},j.FlxTilemap.prototype.overlapsWithCallback=function(a,b,c,d){c=void 0===c?!1:c,d=void 0===d?null:d;var e=!1,f=this.x,g=this.y;null!==d&&(f=d.x,g=d.y);var h=Math.floor((a.x-f)/this._tileWidth),i=Math.floor((a.y-g)/this._tileHeight),j=h+Math.ceil(a.width/this._tileWidth)+1,k=i+Math.ceil(a.height/this._tileHeight)+1;0>h&&(h=0),0>i&&(i=0),j>this.widthInTiles&&(j=this.widthInTiles),k>this.heightInTiles&&(k=this.heightInTiles);for(var l,m,n,o=i*this.widthInTiles,p=i,q=f-this.last.x,r=g-this.last.y;k>p;){for(l=h;j>l;)n=!1,m=this._tileObjects[this._data[o+l]],m.allowCollisions?(m.x=f+l*this._tileWidth+m.offset.x,m.y=g+p*this._tileHeight+m.offset.y,m.last.x=m.x-q,m.last.y=m.y-r,n=null!==b?c?b(a,m):b(m,a):a.x+a.width>m.x&&a.x<m.x+m.width&&a.y+a.height>m.y&&a.y<m.y+m.height,n&&(null!==m.callback&&(null===m.filter||a instanceof m.filter)&&(m.mapIndex=o+l,m.callback(m,a)),e=!0)):null!==m.callback&&(null===m.filter||a instanceof m.filter)&&(m.mapIndex=o+l,m.callback(m,a)),l++;o+=this.widthInTiles,p++}return e},j.FlxTilemap.prototype.overlapsPoint=function(a,b,c){return(b=void 0===b?!1:b)?(null===c&&(c=j.FlxG.camera),a.x=a.x-c.scroll.x,a.y=a.y-c.scroll.y,this.getScreenXY(this._point,c),this._tileObjects[this._data[g(g((a.y-this._point.y)/this._tileHeight)*this.widthInTiles+(a.x-this._point.x)/this._tileWidth)]].allowCollisions>0):this._tileObjects[this._data[g(g((a.y-this.y)/this._tileHeight)*this.widthInTiles+(a.x-this.x)/this._tileWidth)]].allowCollisions>0},j.FlxTilemap.prototype.getTile=function(a,b){return this._data[b*this.widthInTiles+a]},j.FlxTilemap.prototype.getTileByIndex=function(a){return this._data[a]},j.FlxTilemap.prototype.getTileInstances=function(a){for(var b=null,c=0,d=this.widthInTiles*this.heightInTiles;d>c;)this._data[c]==a&&(null===b&&(b=[]),b.push(c)),c++;return b},j.FlxTilemap.prototype.getTileCoords=function(a,b){b=void 0===b?!0:b;for(var c,d=null,e=0,f=this.widthInTiles*this.heightInTiles;f>e;)this._data[e]==a&&(c=new j.FlxPoint(this.x+g(e%this.widthInTiles)*this._tileWidth,this.y+g(e/this.widthInTiles)*this._tileHeight),b&&(c.x+=.5*this._tileWidth,c.y+=.5*this._tileHeight),null===d&&(d=[]),d.push(c)),e++;return d},j.FlxTilemap.prototype.setTile=function(a,b,c,d){return a>=this.widthInTiles||b>=this.heightInTiles?!1:(d=void 0===d?!0:d,this.setTileByIndex(b*this.widthInTiles+a,c,d))},j.FlxTilemap.prototype.setTileByIndex=function(a,b,c){if(c=void 0===c?!0:c,a>=this._data.length)return!1;var d=!0;if(this._data[a]=b,!c)return d;if(this.setDirty(),this.auto==j.FlxTilemap.OFF)return this.updateTile(a),d;for(var e,g=f(a/this.widthInTiles)-1,h=g+3,i=a%this.widthInTiles-1,k=i+3;h>g;){for(i=k-3;k>i;)g>=0&&g<this.heightInTiles&&i>=0&&i<this.widthInTiles&&(e=g*this.widthInTiles+i,this.autoTile(e),this.updateTile(e)),i++;g++}return d},j.FlxTilemap.prototype.setTileProperties=function(a,b,c,d,e){b=b||4369,e=e||1,0>=e&&(e=1);for(var f,g=a,h=a+e;h>g;)f=this._tileObjects[g++],f.allowCollisions=b,f.callback=c,f.filter=d},j.FlxTilemap.prototype.follow=function(a,b,c){b=b||0,c=void 0===c?!0:c,null===a&&(a=j.FlxG.camera),a.setBounds(this.x+b*this._tileWidth,this.y+b*this._tileHeight,this.width-b*this._tileWidth*2,this.height-b*this._tileHeight*2,c)},j.FlxTilemap.prototype.getBounds=function(a){return null===a&&(a=new j.FlxRect),a.make(this.x,this.y,this.width,this.height)},j.FlxTilemap.prototype.ray=function(a,b,c,d){d=d||1;var e=this._tileWidth;this._tileHeight<this._tileWidth&&(e=this._tileHeight),e/=d;for(var f,g,h=b.x-a.x,i=b.y-a.y,j=Math.sqrt(h*h+i*i),k=Math.ceil(j/e),l=h/k,m=i/k,n=a.x-l-this.x,o=a.y-m-this.y,p=0;k>p;)if(n+=l,o+=m,0>n||n>this.width||0>o||o>this.height)p++;else{if(f=n/this._tileWidth,g=o/this._tileHeight,this._tileObjects[this._data[g*this.widthInTiles+f]].allowCollisions){f*=this._tileWidth,g*=this._tileHeight;var q,r=0,s=0,t=n-l,u=o-m;return q=f,0>h&&(q+=this._tileWidth),r=q,s=u+m*((q-t)/l),s>g&&s<g+this._tileHeight?(null!==c&&(c.x=r,c.y=s),!1):(q=g,0>i&&(q+=this._tileHeight),r=t+l*((q-u)/m),s=q,r>f&&r<f+this._tileWidth?(null!==c&&(c.x=r,c.y=s),!1):!0)}p++}return!0},j.FlxTilemap.prototype.rayHit=function(a,b,c){c=c||1;var d=null,e=this._tileWidth;this._tileHeight<this._tileWidth&&(e=this._tileHeight),e/=c;for(var f,g,h=b.x-a.x,i=b.y-a.y,k=Math.sqrt(h*h+i*i),l=Math.ceil(k/e),m=h/l,n=i/l,o=a.x-m-this.x,p=a.y-n-this.y,q=0;l>q;)if(o+=m,p+=n,0>o||o>this.width||0>p||p>this.height)q++;else{if(f=o/this._tileWidth,g=p/this._tileHeight,this._tileObjects[this._data[g*this.widthInTiles+f]].allowCollisions){f*=this._tileWidth,g*=this._tileHeight;var r,s=0,t=0,u=o-m,v=p-n;return r=f,0>h&&(r+=this._tileWidth),s=r,t=v+n*((r-u)/m),t>g&&t<g+this._tileHeight?(null!==d&&(d.x=s,d.y=t),d):(r=g,0>i&&(r+=this._tileHeight),s=u+m*((r-v)/n),t=r,s>f&&s<f+this._tileWidth?(null===d&&(d=new j.FlxPoint),d.x=s,d.y=t,d):null)}q++}return null},j.FlxTilemap.arrayToCSV=function(a,b,c){c=void 0===c?!1:c;for(var d,e,f=0,g="",h=a.length/b;h>f;){for(d=0;b>d;)e=a[f*b+d],c&&(0===e?e=1:1==e&&(e=0)),g+=0===d?0===f?e:"\n"+e:", "+e,d++;f++}return g},j.FlxTilemap.tiledmapToCSV=function(a,b,c){var d=null;if(d="string"==typeof b?a.getLayer(b):a.getLayers()[f(b)],null===d||void 0===d)throw new Error("FlxTilemap: Layer "+b+" do not exist in map!");var e=16777215,g=0;c&&(g=c.firstGID,e=c.numTiles-1);for(var h="",i=0;i<d.tileGIDs.length;i++){for(var j=d.tileGIDs[i],k="",l=0,m=0;m<j.length;m++)l=j[m],l-=g,(0>l||l>e)&&(l=0),h+=k,k=l+",";h+=l+"\n"}return h},j.FlxTilemap.bitmapToCSV=function(a,b,c,d){if(b=void 0===b?!1:b,c=c||1,c>1){var e=a;a=new m(a.width*c,a.height*c);var f=new k;f.scale(c,c),a.draw(e,f)}for(var g,h,i=0,j="",l=a.width,n=a.height;n>i;){for(g=0;l>g;)h=a.getPixel(g,i),h=null!==d?d.indexOf(h):b&&h>0||!b&&0===h?1:0,j+=0===g?0===i?h:"\n"+h:", "+h,g++;i++}return j},j.FlxTilemap.imageToCSV=function(a,b,c){var d=m.fromImage(a);return b=void 0===b?!1:b,c=c||1,this.bitmapToCSV(d,b,c)},j.FlxTilemap.prototype.autoTile=function(a){0!==this._data[a]&&(this._data[a]=0,(a-this.widthInTiles<0||this._data[a-this.widthInTiles]>0)&&(this._data[a]+=1),(a%this.widthInTiles>=this.widthInTiles-1||this._data[a+1]>0)&&(this._data[a]+=2),(a+this.widthInTiles>=this.totalTiles||this._data[a+this.widthInTiles]>0)&&(this._data[a]+=4),(a%this.widthInTiles<=0||this._data[a-1]>0)&&(this._data[a]+=8),this.auto==j.FlxTilemap.ALT&&15==this._data[a]&&(a%this.widthInTiles>0&&a+this.widthInTiles<this.totalTiles&&this._data[a+this.widthInTiles-1]<=0&&(this._data[a]=1),a%this.widthInTiles>0&&a-this.widthInTiles>=0&&this._data[a-this.widthInTiles-1]<=0&&(this._data[a]=2),a%this.widthInTiles<this.widthInTiles-1&&a-this.widthInTiles>=0&&this._data[a-this.widthInTiles+1]<=0&&(this._data[a]=4),a%this.widthInTiles<this.widthInTiles-1&&a+this.widthInTiles<this.totalTiles&&this._data[a+this.widthInTiles+1]<=0&&(this._data[a]=8)),this._data[a]+=1)},j.FlxTilemap.prototype.updateTile=function(a){var b=this._tileObjects[this._data[a]];if(null===b||void 0===b||!b.visible)return this._rects[a]=null,void 0;var c=(this._data[a]-this._startingIndex)*(this._tileWidth+this.offsetX),d=0;c>=this._tiles.width&&(d=g(c/this._tiles.width)*(this._tileHeight+this.offsetY),c%=this._tiles.width),this._rects[a]=new j.FlxRect(c,d,this._tileWidth,this._tileHeight)},j.FlxTilemap.prototype.getTileCollision=function(a){var b=null;return this._data[a]<this._tileObjects.size&&(b=this._tileObjects[this._data[a]]),null!==b&&b.visible?b.allowCollisions:j.FlxObject.NONE},j.FlxTilemap.prototype.tileToFlxSprite=function(a,b,c){var d=a+b*this.widthInTiles,e=this._tileObjects[this._data[d]],f=null;if(null!==e&&void 0!==e&&e.visible){var h=(this._data[d]-this._startingIndex)*this._tileWidth,i=0;h>=this._tiles.width&&(i=g(h/this._tiles.width)*this._tileHeight,h%=this._tiles.width),f=new j.FlxRect(h,i,this._tileWidth,this._tileHeight)}else;var k=new j.FlxSprite;return k.makeGraphic(this._tileWidth,this._tileHeight,0,!0),k.x=a*this._tileWidth+this.x,k.y=b*this._tileHeight+this.y,null!==f&&k.getPixels().copyPixels(this._tiles,f,new j.FlxPoint),k.dirty=!0,c>=0&&this.setTile(a,b,c),k},j.FlxTilemap.prototype.getTileWidth=function(){return this._tileWidth},j.FlxTilemap.prototype.getTileHeight=function(){return this._tileHeight},j.FlxTilemap.prototype.getTileObject=function(a){return this._tileObjects[a]},j.FlxTilemap.prototype.toString=function(){return"FlxTilemap"},j.FlxText=function(a,b,c,d,e){j.FlxText.parent.constructor.apply(this,[a,b]),(null===d||void 0===d)&&(d=""),this.width=c,this._embedFonts=void 0===e?!0:e,this._text=d,this._font="sans-serif",this._size=12,this._color=j.FlxG.WHITE,this._alignment="left",this._shadow=0,this.allowCollisions=j.FlxObject.NONE,this.moves=!1,this.calcFrame()},b(j.FlxText,j.FlxSprite),j.FlxText.prototype._alignment=null,j.FlxText.prototype._text=null,j.FlxText.prototype._shadow=0,j.FlxText.prototype._shadowX=0,j.FlxText.prototype._shadowY=0,j.FlxText.prototype._embedFonts=!1,j.FlxText.prototype._font=null,j.FlxText.prototype._size=0,j.FlxText.prototype.destroy=function(){this._alignment=null,this._text=null,this._font=null,j.FlxText.parent.destroy.apply(this)},j.FlxText.prototype.setFormat=function(a,b,c,d,e,f,g){return this._font=a||"sans-serif",this._size=b||10,this._color=c||16777215,this._alignment=d||"left",this._shadow=0|e,this._shadowX=f||1,this._shadowY=g||1,this.calcFrame(),this},j.FlxText.prototype.getText=function(){return this._textField.text},j.FlxText.prototype.setText=function(a){var b=this._text;this._text=a,this._text!=b&&this.calcFrame()},j.FlxText.prototype.getSize=function(){return this._size},j.FlxText.prototype.setSize=function(a){var b=this._size;this._size=a,this._size!=b&&this.calcFrame()},j.FlxText.prototype.getColor=function(){return this._color},j.FlxText.prototype.setColor=function(a){var b=this._color;this._color=a,this._color!=b&&this.calcFrame()},j.FlxText.prototype.getFont=function(){return this._font},j.FlxText.prototype.setFont=function(a){var b=this._font;this._font=a,this._font!=b&&this.calcFrame()},j.FlxText.prototype.getAlignment=function(){return this._alignment},j.FlxText.prototype.setAlignment=function(a){var b=this._alignment;this._alignment=a,this._alignment!=b&&this.calcFrame()},j.FlxText.prototype.getShadowSizeX=function(){return this._shadowX},j.FlxText.prototype.setShadowSize=function(a,b){this._shadowX=a,this._shadowY=b},j.FlxText.prototype.setShadowSizeXY=function(a){this._shadowX=a,this._shadowY=a},j.FlxText.prototype.setShadowX=function(a){this._shadowX=a},j.FlxText.prototype.setShadowY=function(a){this._shadowY=a},j.FlxText.prototype.setShadow=function(a,b,c){this._shadow=a,this._shadowX=b||1,this._shadowY=c||1,this.calcFrame()},j.FlxText.prototype.getShadowColor=function(){return this._shadow},j.FlxText.prototype.calcFrame=function(){this.dirty=!1;var a=this._text.split("\n").length>1,b=a?this._text.split("\n").length:this._text.length*this._size/this.width;b=b>1?f(b):1,this.height=f(b*this._size),this.height+=4,this._pixels=new m(this.width+this._shadowX,this.height+this._shadowY,!0,0),this.frameHeight=this.height+this._shadowY,this.frameWidth=this.width+this._shadowX,this._flashRect.x=0,this._flashRect.y=0,this._flashRect.width=this.frameWidth,this._flashRect.height=this.frameHeight;var c=0;"left"==this._alignment||"start"==this._alignment?c=0:"right"==this._alignment||"end"==this._alignment?c=this.width-f(this._pixels.context.measureText(this._text).width)-3:"center"==this._alignment&&(c=this.width/2-f(this._pixels.context.measureText(this._text).width/2));for(var d=this._text.split("\n"),e=0,g=this.height/d.length,h=0;h<d.length;h++){var i=d[h];this._shadow>0&&(this._pixels.context.font=this._size+"px "+this._font,this._pixels.context.fillStyle=m.makeRGBA(this._shadow,this._alpha),this._pixels.context.fillText(i,this._shadowX+c,this._shadowY+g+3+e)),this._pixels.context.font=this._size+"px "+this._font,this._pixels.context.fillStyle=m.makeRGBA(this._color,this._alpha),this._pixels.context.fillText(i,c,g/2+3+e),e+=this._size}(null===this.framePixels||this.framePixels.width!=this._pixels.width||this.framePixels.height!=this._pixels.height)&&(this.framePixels=new m(this._pixels.width,this._pixels.height,!0,0)),this.framePixels.copyPixels(this._pixels,this._flashRect,this._flashPointZero,null,null,!1,!0)},j.FlxText.prototype.toString=function(){return"FlxText"},j.data.FlxSystemAsset=function(){},j.data.FlxSystemAsset.systemFont=null,j.data.FlxSystemAsset.ImgAuto="com/ratalaika/flixel/data/pack.txt:autotiles",j.data.FlxSystemAsset.ImgAutoAlt="com/ratalaika/flixel/data/pack.txt:autotiles_alt",j.data.FlxSystemAsset.poweredBy="com/ratalaika/flixel/data/pack.txt:poweredby",j.data.FlxSystemAsset.ImgDefault="com/ratalaika/flixel/data/pack.txt:default",j.data.FlxSystemAsset.ImgDefaultButton="com/ratalaika/flixel/data/pack.txt:button",j.data.FlxSystemAsset.ImgButtonA="com/ratalaika/flixel/data/pack.txt:button_a",j.data.FlxSystemAsset.ImgButtonB="com/ratalaika/flixel/data/pack.txt:button_b",j.data.FlxSystemAsset.ImgButtonC="com/ratalaika/flixel/data/pack.txt:button_c",j.data.FlxSystemAsset.ImgButtonY="com/ratalaika/flixel/data/pack.txt:button_y",j.data.FlxSystemAsset.ImgButtonX="com/ratalaika/flixel/data/pack.txt:button_x",j.data.FlxSystemAsset.ImgButtonLeft="com/ratalaika/flixel/data/pack.txt:button_left",j.data.FlxSystemAsset.ImgButtonUp="com/ratalaika/flixel/data/pack.txt:button_up",j.data.FlxSystemAsset.ImgButtonRight="com/ratalaika/flixel/data/pack.txt:button_right",j.data.FlxSystemAsset.ImgButtonDown="com/ratalaika/flixel/data/pack.txt:button_down",j.data.FlxSystemAsset.ImgCenter="com/ratalaika/flixel/data/pack.txt:dpad_center",j.data.FlxSystemAsset.dpad=new Array(5),j.data.FlxSystemAsset.dpad[0]="com/ratalaika/flixel/data/pack.txt:dpad_up",j.data.FlxSystemAsset.dpad[1]="com/ratalaika/flixel/data/pack.txt:dpad_down",j.data.FlxSystemAsset.dpad[2]="com/ratalaika/flixel/data/pack.txt:dpad_left",j.data.FlxSystemAsset.dpad[3]="com/ratalaika/flixel/data/pack.txt:dpad_right",j.data.FlxSystemAsset.dpad[4]="com/ratalaika/flixel/data/pack.txt:dpad_base",j.data.FlxSystemAsset.gpad=new Array(4),j.data.FlxSystemAsset.gpad[0]="com/ratalaika/flixel/data/pack.txt:gpad_up",j.data.FlxSystemAsset.gpad[1]="com/ratalaika/flixel/data/pack.txt:gpad_down",j.data.FlxSystemAsset.gpad[2]="com/ratalaika/flixel/data/pack.txt:gpad_left",j.data.FlxSystemAsset.gpad[3]="com/ratalaika/flixel/data/pack.txt:gpad_right",j.data.FlxSystemAsset.ImgControlBase="com/ratalaika/flixel/data/pack.txt:base",j.data.FlxSystemAsset.ImgControlKnob="com/ratalaika/flixel/data/pack.txt:stick";var u=function(a,b){this.width=a,this.height=b,this.orientation=window.orientation?window.orientation:window.outerWidth>window.outerHeight?90:0;var c=this;window.addEventListener("orientationchange",function(a){return c.checkOrientation(a)},!1),window.addEventListener("resize",function(a){return c.checkResize(a)},!1),document.addEventListener("webkitfullscreenchange",function(a){return c.fullScreenChange(a)},!1),document.addEventListener("mozfullscreenchange",function(a){return c.fullScreenChange(a)},!1),document.addEventListener("fullscreenchange",function(a){return c.fullScreenChange(a)},!1)};u.prototype.width=0,u.prototype.height=0,u.prototype.minWidth=null,u.prototype.maxWidth=null,u.prototype.minHeight=null,u.prototype.maxHeight=null,u.prototype._startHeight=0,u.prototype.forceLandscape=!1,u.prototype.forcePortrait=!1,u.prototype.incorrectOrientation=!1,u.prototype.pageAlignHorizontally=!1,u.prototype.pageAlignVertically=!1,u.prototype._width=0,u.prototype._height=0,u.prototype.maxIterations=5,u.prototype.orientationSprite=null,u.prototype.enterLandscape=null,u.prototype.enterPortrait=null,u.prototype.enterIncorrectOrientation=null,u.prototype.leaveIncorrectOrientation=null,u.prototype.hasResized=null,u.prototype.scaleFactor=new j.FlxPoint(1,1),u.prototype.scaleFactorInversed=new j.FlxPoint(1,1),u.prototype.margin=new j.FlxPoint(0,0),u.prototype.aspectRatio=0,u.prototype.event=null,u.prototype.startFullScreen=function(a){if(!this.isFullScreen()){"undefined"!=typeof a&&n.setSmoothingEnabled(j.FlxG.getStage().getContext("2d"),a);var b=j.FlxG.getStage();this._width=this.width,this._height=this.height,console.log("startFullScreen",this._width,this._height),b.requestFullScreen?b.requestFullScreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullScreen&&b.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}},u.prototype.stopFullScreen=function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},u.prototype.fullScreenChange=function(a){this.event=a,this.isFullScreen()?(j.FlxG.getStage().style.width="100%",j.FlxG.getStage().style.height="100%",this.setMaximum(),j.FlxG.mouse.scale.make(j.FlxG.width/this.width,j.FlxG.height/this.height),this.aspectRatio=this.width/this.height,this.scaleFactor.x=j.FlxG.width/this.width,this.scaleFactor.y=j.FlxG.height/this.height):(j.FlxG.getStage().style.width=j.FlxG.width+"px",j.FlxG.getStage().style.height=j.FlxG.height+"px",this.width=this._width,this.height=this._height,j.FlxG.mouse.scale.make(j.FlxG.width/this.width,j.FlxG.height/this.height),this.aspectRatio=this.width/this.height,this.scaleFactor.x=j.FlxG.width/this.width,this.scaleFactor.y=j.FlxG.height/this.height)},u.prototype.forceOrientation=function(a,b,c){"undefined"==typeof b&&(b=!1),this.forceLandscape=a,this.forcePortrait=b,"undefined"!=typeof c&&(j.FlxG.getGame().orientationSprite=new j.FlxSprite(0,0,c),j.FlxG.getGame().orientationSprite.x=j.FlxG.width/2,j.FlxG.getGame().orientationSprite.y=j.FlxG.height/2,this.checkOrientationState(),j.FlxG.getGame().orientationSprite.visible=this.incorrectOrientation?!0:!1)},u.prototype.checkOrientationState=function(){this.incorrectOrientation?(this.forceLandscape&&window.innerWidth>window.innerHeight||this.forcePortrait&&window.innerHeight>window.innerWidth)&&(j.FlxG.setPause(!1),this.incorrectOrientation=!1,this.leaveIncorrectOrientation&&this.leaveIncorrectOrientation(),j.FlxG.getGame().orientationSprite&&(j.FlxG.getGame().orientationSprite.visible=!1),this.refresh()):(this.forceLandscape&&window.innerWidth<window.innerHeight||this.forcePortrait&&window.innerHeight<window.innerWidth)&&(j.FlxG.setPause(!0),this.incorrectOrientation=!0,this.enterIncorrectOrientation&&this.enterIncorrectOrientation(),j.FlxG.getGame().orientationSprite&&j.FlxG.getGame().orientationSprite.visible===!1&&(j.FlxG.getGame().orientationSprite.visible=!0),this.refresh())},u.prototype.checkOrientation=function(a){this.event=a,this.orientation=window.orientation,this.isLandscape()&&this.enterLandscape?this.enterLandscape(this.orientation,!0,!1):this.isPortrait()&&this.enterPortrait&&this.enterPortrait(this.orientation,!1,!0),j.FlxCamera.defaultScaleMode!==j.FlxCamera.NO_SCALE&&this.refresh()},u.prototype.checkResize=function(a){this.event=a,this.orientation=window.outerWidth>window.outerHeight?90:0,this.isLandscape&&this.enterLandscape?this.enterLandscape(this.orientation,!0,!1):this.enterPortrait&&this.enterPortrait(this.orientation,!1,!0),j.FlxCamera.defaultScaleMode!==j.FlxCamera.NO_SCALE&&this.refresh(),this.checkOrientationState()},u.prototype.refresh=function(){if(j.FlxG.device.iPad===!1&&j.FlxG.device.webApp===!1&&j.FlxG.device.desktop===!1&&(j.FlxG.device.android&&j.FlxG.device.chrome===!1?window.scrollTo(0,1):window.scrollTo(0,0)),null==this._check&&this.maxIterations>0){this._iterations=this.maxIterations;var a=this;a.height,this._check=window.setInterval(function(){return a.setScreenSize()},10),this.setScreenSize()}},u.prototype.setScreenSize=function(a){"undefined"==typeof a&&(a=!1),j.FlxG.device.iPad===!1&&j.FlxG.device.webApp===!1&&j.FlxG.device.desktop===!1&&(j.FlxG.device.android&&j.FlxG.device.chrome===!1?window.scrollTo(0,1):window.scrollTo(0,0)),this._iterations--,(a||window.innerHeight>this._startHeight||this._iterations<0)&&(document.documentElement.style.minHeight=window.innerHeight+"px",this.incorrectOrientation===!0?this.setMaximum():j.FlxCamera.defaultScaleMode==j.FlxCamera.EXACT_FIT?this.setExactFit():j.FlxCamera.defaultScaleMode==j.FlxCamera.STRETCH&&this.setShowAll(),this.setSize(),clearInterval(this._check),this._check=null)},u.prototype.setSize=function(){this.incorrectOrientation===!1&&(this.maxWidth&&this.width>this.maxWidth&&(this.width=this.maxWidth),this.maxHeight&&this.height>this.maxHeight&&(this.height=this.maxHeight),this.minWidth&&this.width<this.minWidth&&(this.width=this.minWidth),this.minHeight&&this.height<this.minHeight&&(this.height=this.minHeight)),j.FlxG.getStage().style.width=this.width+"px",j.FlxG.getStage().style.height=this.height+"px",j.FlxG.mouse.scale.make(j.FlxG.width/this.width,j.FlxG.height/this.height),this.pageAlignHorizontally&&(this.width<window.innerWidth&&this.incorrectOrientation===!1?(this.margin.x=Math.round((window.innerWidth-this.width)/2),j.FlxG.getStage().marginLeft=this.margin.x+"px"):(this.margin.x=0,j.FlxG.getStage().style.marginLeft="0px")),this.pageAlignVertically&&(this.height<window.innerHeight&&this.incorrectOrientation===!1?(this.margin.y=Math.round((window.innerHeight-this.height)/2),j.FlxG.getStage().style.marginTop=this.margin.y+"px"):(this.margin.y=0,j.FlxG.getStage().style.marginTop="0px")),n.getOffset(j.FlxG.getStage(),j.FlxG.mouse.offset),this.aspectRatio=this.width/this.height,this.scaleFactor.x=j.FlxG.width/this.width,this.scaleFactor.y=j.FlxG.height/this.height,this.scaleFactorInversed.x=this.width/j.FlxG.width,this.scaleFactorInversed.y=this.height/j.FlxG.height,this.hasResized&&this.hasResized(this.width,this.height),this.checkOrientationState()},u.prototype.setMaximum=function(){this.width=window.innerWidth,this.height=window.innerHeight},u.prototype.setShowAll=function(){var a=Math.min(window.innerHeight/j.FlxG.height,window.innerWidth/j.FlxG.width);this.width=Math.round(j.FlxG.width*a),this.height=Math.round(j.FlxG.height*a)},u.prototype.setExactFit=function(){var a=window.innerWidth,b=window.innerHeight;this.width=this.maxWidth&&a>this.maxWidth?this.maxWidth:a,this.height=this.maxHeight&&b>this.maxHeight?this.maxHeight:b},u.prototype.isFullScreen=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},u.prototype.isPortrait=function(){return 0===this.orientation||180==this.orientation},u.prototype.isLandscape=function(){return 90===this.orientation||-90===this.orientation};var v=function(a,b,c,d){"undefined"==typeof b&&(b=1),"undefined"==typeof c&&(c=!1),"undefined"==typeof d&&(d=j.FlxG.soundManager.connectToMaster),this.name=a,this.key=a,this.loop=c,this._volume=b,this.usingWebAudio=j.FlxG.soundManager.usingWebAudio,this.usingAudioTag=j.FlxG.soundManager.usingAudioTag,this.usingWebAudio?(this.context=j.FlxG.soundManager.context,this.masterGainNode=j.FlxG.soundManager.masterGain,this.gainNode="undefined"==typeof this.context.createGain?this.context.createGainNode():this.context.createGain(),this.gainNode.gain.value=b*j.FlxG.soundManager.getVolume(),d&&this.gainNode.connect(this.masterGainNode)):j.FlxG.loaderCache.getSound(a)&&j.FlxG.loaderCache.isSoundReady(a)?(this._sound=j.FlxG.loaderCache.getSoundData(a),this.totalDuration=0,this._sound.duration&&(this.totalDuration=this._sound.duration)):j.FlxG.loaderCache.onSoundUnlock.add(this.soundHasUnlocked,this)};v.prototype.name=null,v.prototype.key=null,v.prototype.loop=!1,v.prototype._volume=0,v.prototype.markers={},v.prototype.context=null,v.prototype._buffer=null,v.prototype._muted=!1,v.prototype.autoplay=!1,v.prototype.totalDuration=0,v.prototype.startTime=0,v.prototype.currentTime=0,v.prototype.duration=0,v.prototype.stopTime=0,v.prototype.paused=!1,v.prototype.pausedPosition=0,v.prototype.pausedTime=0,v.prototype.isPlaying=!1,v.prototype.currentMarker="",v.prototype.pendingPlayback=!1,v.prototype.override=!1,v.prototype.usingWebAudio=!1,v.prototype.usingAudioTag=!1,v.prototype.externalNode=null,v.prototype.onDecoded=null,v.prototype.onPlay=null,v.prototype.onPause=null,v.prototype.onResume=null,v.prototype.onLoop=null,v.prototype.onStop=null,v.prototype.onMute=null,v.prototype.onMarkerComplete=null,v.prototype.soundHasUnlocked=function(a){a==this.key&&(this._sound=j.FlxG.loaderCache.getSoundData(this.key),this.totalDuration=this._sound.duration)},v.prototype.addMarker=function(a,b,c,d,e){d=d||1,"undefined"==typeof e&&(e=!1),this.markers[a]={name:a,start:b,stop:b+c,volume:d,duration:c,durationMS:1e3*c,loop:e}},v.prototype.removeMarker=function(a){delete this.markers[a]},v.prototype.update=function(){this.pendingPlayback&&j.FlxG.loaderCache.isSoundReady(this.key)&&(this.pendingPlayback=!1,this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)),this.isPlaying&&(this.currentTime=e()-this.startTime,this.currentTime>=this.durationMS&&(this.usingWebAudio?this.loop?(null!==this.onLoop&&this.onLoop(),""===this.currentMarker?(this.currentTime=0,this.startTime=e()):this.play(this.currentMarker,0,this.getVolume(),!0,!0)):this.stop():this.loop?(null!==this.onLoop&&this.onLoop(),this.play(this.currentMarker,0,this.getVolume(),!0,!0)):this.stop()))},v.prototype.play=function(a,b,c,d,f){if(a=a||"",b=b||0,"undefined"==typeof c&&(c=this._volume),"undefined"==typeof d&&(d=!1),"undefined"==typeof f&&(f=!0),this.isPlaying!==!0||f!==!1||this.override!==!1){if(this.isPlaying&&this.override&&(this.usingWebAudio?"undefined"==typeof this._sound.stop?this._sound.noteOff(0):this._sound.stop(0):this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0)),this.currentMarker=a,""!==a){if(!this.markers[a])return console.warn("SoundChannel.play: audio marker "+a+" doesn't exist"),void 0;this.position=this.markers[a].start,this.setVolume(this.markers[a].volume),this.loop=this.markers[a].loop,this.duration=this.markers[a].duration,this.durationMS=this.markers[a].durationMS,this._tempMarker=a,this._tempPosition=this.position,this._tempVolume=this.getVolume,this._tempLoop=this.loop}else this.position=b,this.setVolume(c),this.loop=d,this.duration=0,this.durationMS=0,this._tempMarker=a,this._tempPosition=b,this._tempVolume=c,this._tempLoop=d;this.usingWebAudio?j.FlxG.loaderCache.isSoundDecoded(this.key)?(null===this._buffer&&(this._buffer=j.FlxG.loaderCache.getSoundData(this.key)),this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this.externalNode?this._sound.connect(this.externalNode.input):this._sound.connect(this.gainNode),this.totalDuration=this._sound.buffer.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this.loop&&""===a&&(this._sound.loop=!0),"undefined"==typeof this._sound.start?this._sound.noteGrainOn(0,this.position,this.duration):this._sound.start(0,this.position,this.duration),this.isPlaying=!0,this.startTime=e(),this.currentTime=0,this.stopTime=this.startTime+this.durationMS,null!==this.onPlay&&this.onPlay()):(this.pendingPlayback=!0,j.FlxG.loaderCache.getSound(this.key)&&j.FlxG.loaderCache.getSound(this.key).isDecoding===!1&&j.FlxG.soundManager.decode(this.key,this)):j.FlxG.loaderCache.getSound(this.key)&&j.FlxG.loaderCache.getSound(this.key).locked?(j.FlxG.loaderCache.reloadSound(this.key),this.pendingPlayback=!0):this._sound&&4==this._sound.readyState?(this._sound.play(),this.totalDuration=this._sound.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this._sound.currentTime=this.position,this._sound.muted=this._muted,this._sound.volume=this._muted?0:this._volume,this.isPlaying=!0,this.startTime=e(),this.currentTime=0,this.stopTime=this.startTime+this.durationMS,null!==this.onPlay&&this.onPlay()):this.pendingPlayback=!0
}},v.prototype.restart=function(a,b,c,d){a=a||"",b=b||0,c=c||1,"undefined"==typeof d&&(d=!1),this.play(a,b,c,d,!0)},v.prototype.pause=function(){this.isPlaying&&this._sound&&(this.stop(),this.isPlaying=!1,this.paused=!0,this.pausedPosition=this.currentTime,this.pausedTime=e(),null!==this.onPause&&this.onPause())},v.prototype.resume=function(){if(this.paused&&this._sound){if(this.usingWebAudio){var a=this.position+this.pausedPosition/1e3;this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this._sound.connect(this.gainNode),"undefined"==typeof this._sound.start?this._sound.noteGrainOn(0,a,this.duration):this._sound.start(0,a,this.duration)}else this._sound.play();this.isPlaying=!0,this.paused=!1,this.startTime+=e()-this.pausedTime,null!==this.onResume&&this.onResume()}},v.prototype.stop=function(){this.isPlaying&&this._sound&&(this.usingWebAudio?"undefined"==typeof this._sound.stop?this._sound.noteOff(0):this._sound.stop(0):this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0)),this.isPlaying=!1;var a=this.currentMarker;this.currentMarker="",null!==this.onStop&&this.onStop(a)},v.prototype.isDecoding=function(){return j.FlxG.loaderCache.getSound(this.key).isDecoding},v.prototype.isDecoded=function(){return j.FlxG.loaderCache.isSoundDecoded(this.key)},v.prototype.getMute=function(){return this._muted},v.prototype.setMute=function(a){a=a||null,a?(this._muted=!0,this.usingWebAudio?(this._muteVolume=this.gainNode.gain.value,this.gainNode.gain.value=0):this.usingAudioTag&&this._sound&&(this._muteVolume=this._sound.volume,this._sound.volume=0)):(this._muted=!1,this.usingWebAudio?this.gainNode.gain.value=this._muteVolume:this.usingAudioTag&&this._sound&&(this._sound.volume=this._muteVolume)),null!==this.onMute&&this.onMute()},v.prototype.getVolume=function(){return this._volume},v.prototype.setVolume=function(a){this.usingWebAudio?(this._volume=a,this.gainNode.gain.value=a):this.usingAudioTag&&this._sound&&a>=0&&1>=a&&(this._volume=a,this._sound.volume=a)};var w=function(){w.parent.constructor.apply(this),this._sounds=[],this._volume=1,this.usingWebAudio=!0,this.connectToMaster=!0,this.channels=32,this.cache=j.FlxG.loaderCache};b(w,j.FlxBasic),w.prototype.onSoundDecode=null,w.prototype.cache=null,w.prototype._muted=!1,w.prototype._unlockSource=null,w.prototype._volume=0,w.prototype._sounds=null,w.prototype.context=null,w.prototype.usingWebAudio=!1,w.prototype.usingAudioTag=!1,w.prototype.noAudio=!1,w.prototype.connectToMaster=!1,w.prototype.touchLocked=!1,w.prototype.channels=0,w.prototype.boot=function(){return j.FlxG.device.iOS&&j.FlxG.device.webAudio===!1&&(this.channels=1),this.touchLocked=j.FlxG.device.iOS||j.fakeiOSTouchLock?!0:!1,j.disableAudio===!0?(this.usingWebAudio=!1,this.noAudio=!0,void 0):j.disableWebAudio===!0?(this.usingWebAudio=!1,this.usingAudioTag=!0,this.noAudio=!1,void 0):(window.AudioContext?this.context=new window.AudioContext:window.webkitAudioContext?this.context=new window.webkitAudioContext:window.Audio?(this.usingWebAudio=!1,this.usingAudioTag=!0):(this.usingWebAudio=!1,this.noAudio=!0),null!==this.context&&(this.masterGain="undefined"==typeof this.context.createGain?this.context.createGainNode():this.context.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.context.destination)),void 0)},w.prototype.unlock=function(){if(this.touchLocked!==!1)if(j.FlxG.device.webAudio===!1||j.disableWebAudio===!0)this.touchLocked=!1,this._unlockSource=null,this.game.input.touch.callbackContext=null,this.game.input.touch.touchStartCallback=null,this.game.input.mouse.callbackContext=null,this.game.input.mouse.mouseDownCallback=null;else{var a=this.context.createBuffer(1,1,22050);this._unlockSource=this.context.createBufferSource(),this._unlockSource.buffer=a,this._unlockSource.connect(this.context.destination),this._unlockSource.noteOn(0)}},w.prototype.destroy=function(){this.stopAll(),delete this._sounds,w.parent.destroy.apply(this)},w.prototype.stopAll=function(){for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].stop()},w.prototype.pauseAll=function(){for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].pause()},w.prototype.resumeAll=function(){for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].resume()},w.prototype.decode=function(a,b){b=b||null;var c=this.cache.getSoundData(a);if(c&&this.cache.isSoundDecoded(a)===!1){this.cache.updateSound(a,"isDecoding",!0);var d=this;this.context.decodeAudioData(c,function(c){d.cache.decodedSound(a,c),b&&null!==this.onSoundDecode&&d.onSoundDecode(b)})}},w.prototype.update=function(){this.touchLocked&&j.FlxG.device.webAudio&&null!==this._unlockSource&&(this._unlockSource.playbackState===this._unlockSource.PLAYING_STATE||this._unlockSource.playbackState===this._unlockSource.FINISHED_STATE)&&(this.touchLocked=!1,this._unlockSource=null,this.game.input.touch.callbackContext=null,this.game.input.touch.touchStartCallback=null);for(var a=0;a<this._sounds.length;a++)this._sounds[a].update()},w.prototype.add=function(a,b,c,d){"undefined"==typeof b&&(b=1),"undefined"==typeof c&&(c=!1),"undefined"==typeof d&&(d=this.connectToMaster);var e=new v(a,b,c,d);return this._sounds.push(e),e},w.prototype.play=function(a,b,c){var d=this.add(a,b,c);return d.play(),d},w.prototype.getMute=function(){return this._muted},w.prototype.setMute=function(a){a=a||null;var b=0;if(a){if(this._muted)return;for(this._muted=!0,this.usingWebAudio&&(this._muteVolume=this.masterGain.gain.value,this.masterGain.gain.value=0),b=0;b<this._sounds.length;b++)this._sounds[b].usingAudioTag&&(this._sounds[b].mute=!0)}else{if(this._muted===!1)return;for(this._muted=!1,this.usingWebAudio&&(this.masterGain.gain.value=this._muteVolume),b=0;b<this._sounds.length;b++)this._sounds[b].usingAudioTag&&(this._sounds[b].mute=!1)}},w.prototype.getVolume=function(){return this.usingWebAudio?this.masterGain.gain.value:this._volume},w.prototype.setVolume=function(a){a=a>1?1:0>a?0:a,this._volume=a,this.usingWebAudio&&(this.masterGain.gain.value=a);for(var b=0;b<this._sounds.length;b++)this._sounds[b].usingAudioTag&&(this._sounds[b].volume=this._sounds[b].volume*a)},w.prototype.toString=function(){return"SoundManager"};var x=function(){};x.prototype.pan=0,x.prototype.volume=0,j.FlxSound=function(){j.FlxSound.parent.constructor.apply(this),this.reset()},b(j.FlxSound,j.FlxBasic),j.FlxSound.ALL=0,j.FlxSound.TYPE_AUTO=0,j.FlxSound.TYPE_SFX=1,j.FlxSound.TYPE_MUSIC=2,j.FlxSound.prototype.x=0,j.FlxSound.prototype.y=0,j.FlxSound.prototype.survive=!1,j.FlxSound.prototype.name=null,j.FlxSound.prototype.artist=null,j.FlxSound.prototype.amplitude=0,j.FlxSound.prototype.amplitudeLeft=0,j.FlxSound.prototype.amplitudeRight=0,j.FlxSound.prototype.autoDestroy=!1,j.FlxSound.prototype._sound=null,j.FlxSound.prototype._channel=null,j.FlxSound.prototype._transform=null,j.FlxSound.prototype._paused=!1,j.FlxSound.prototype._position=0,j.FlxSound.prototype._volume=0,j.FlxSound.prototype._volumeAdjust=0,j.FlxSound.prototype._looped=!1,j.FlxSound.prototype._target=null,j.FlxSound.prototype._radius=0,j.FlxSound.prototype._pan=!1,j.FlxSound.prototype._fadeOutTimer=0,j.FlxSound.prototype._fadeOutTotal=0,j.FlxSound.prototype._pauseOnFadeOut=!1,j.FlxSound.prototype._fadeInTimer=0,j.FlxSound.prototype._fadeInTotal=0,j.FlxSound.prototype.reset=function(){this.destroy(),this.x=0,this.y=0,this._position=0,this._paused=!1,this._volume=1,this._volumeAdjust=1,this._looped=!1,this._target=null,this._radius=0,this._pan=!1,this._fadeOutTimer=0,this._fadeOutTotal=0,this._pauseOnFadeOut=!1,this._fadeInTimer=0,this._fadeInTotal=0,this.visible=!1,this.amplitude=0,this.amplitudeLeft=0,this.amplitudeRight=0,this.autoDestroy=!1,null===this._transform&&(this._transform=new x),this._transform.pan=0},j.FlxSound.prototype.destroy=function(){this._transform=null,this.exists=!1,this.active=!1,this._target=null,this.name=null,this.artist=null,this._channel&&(this._channel.stop(),this._channel=null),j.FlxSound.parent.destroy.apply(this)},j.FlxSound.prototype.update=function(){if(this.getPlaying()){this._position=this._channel.position;var a=1,b=1;if(null!==this._target&&(a=j.FlxU.getDistance(new j.FlxPoint(this._target.x,this._target.y),new j.FlxPoint(this.x,this.y))/this._radius,0>a&&(a=0),a>1&&(a=1),a=1-a,this._pan)){var c=(this.x-this._target.x)/this._radius;-1>c?c=-1:c>1&&(c=1),this._transform.pan=c}this._fadeOutTimer>0?(this._fadeOutTimer-=j.FlxG.elapsed,this._fadeOutTimer<=0&&(this._pauseOnFadeOut?this.pause():this.stop()),b=this._fadeOutTimer/this._fadeOutTotal,0>b&&(b=0)):this._fadeInTimer>0&&(this._fadeInTimer-=j.FlxG.elapsed,b=this._fadeInTimer/this._fadeInTotal,0>b&&(b=0),b=1-b),this._volumeAdjust=a*b,this.updateTransform()}},j.FlxSound.prototype.kill=function(){j.FlxSound.parent.kill.apply(this),this.cleanup(!1)},j.FlxSound.prototype.loadEmbedded=function(a,b,c){return b=void 0===b?!1:b,c=void 0===c?!1:c,this.cleanup(!0),this._sound=a,this._looped=b,this.autoDestroy=c,this.updateTransform(),this.exists=!0,this},j.FlxSound.prototype.loadStream=function(a,b,c){return b=void 0===b?!1:b,c=void 0===c?!1:c,this.cleanup(!0),this._sound=a,this._looped=b,this.autoDestroy=c,this.updateTransform(),this.exists=!0,this},j.FlxSound.prototype.proximity=function(a,b,c,d,e){return e=void 0===e?!0:e,this.x=a,this.y=b,this._target=c,this._radius=d,this._pan=e,this},j.FlxSound.prototype.play=function(a){a=void 0===a?!1:a,this.exists&&(this.getPlaying()||(this._paused?this.resume():this.startSound(0,a)))},j.FlxSound.prototype.resume=function(){null!==this._channel&&(this._channel.paused?this._channel.resume():this._channel.play()),this._paused=!1,this.active=!0},j.FlxSound.prototype.pause=function(){this.getPlaying()&&(null!==this._channel&&this._channel.pause(),this._paused=!0,this.active=!1)},j.FlxSound.prototype.stop=function(){null!==this._channel&&this._channel.stop(),this._paused=!1,this.active=!1},j.FlxSound.prototype.fadeOut=function(a,b){b=void 0===b?!1:b,this.getPlaying()&&(this._pauseOnFadeOut=b,this._fadeInTimer=0,this._fadeOutTimer=a,this._fadeOutTotal=this._fadeOutTimer)},j.FlxSound.prototype.fadeIn=function(a){this._fadeOutTimer=0,this._fadeInTimer=a,this._fadeInTotal=this._fadeInTimer,this.play()},j.FlxSound.prototype.getPlaying=function(){return null!==this._channel&&this._channel.isPlaying},j.FlxSound.prototype.getVolume=function(){return this._volume},j.FlxSound.prototype.setVolume=function(a){this._volume=a,this._volume<0?this._volume=0:this._volume>1&&(this._volume=1),this.updateTransform()},j.FlxSound.prototype.getActualVolume=function(){return this._volume*this._volumeAdjust},j.FlxSound.prototype.updateTransform=function(){this._transform.volume=(j.FlxG.getMute()?0:1)*j.FlxG.getMusicVolume()*this._volume*this._volumeAdjust,null!==this._channel&&this._channel.setVolume(this._transform.volume)},j.FlxSound.prototype.startSound=function(a,b){b=void 0===b?!1:b,this._position=a,this._paused=!1,null===this._channel&&(this._channel=j.FlxG.soundManager.add(this._sound,this._volume,this._looped)),this._channel.play("",this._position,this._volume,this._looped,b),null!==this._channel?this.active=!0:(this.exists=!1,this.active=!1)},j.FlxSound.prototype.cleanup=function(a,b,c){return b=void 0===b?!0:b,c=void 0===c?!0:c,a?(this.reset(),void 0):(this._channel&&(this._channel.onStop=null,this._channel.stop(),this._channel=null),this.active=!1,b&&(this._position=0,this._paused=!1),c&&(this._fade=null,this._onFadeComplete=null),void 0)},j.FlxSound.prototype.gotID3=function(){j.FlxG.log("got ID3 info! NOT WORKING ON HTML5"),this.name="",this.artist=""},j.FlxSound.prototype.isPaused=function(){return this._paused},j.FlxSound.prototype.getPosition=function(){return null!==this._channel?this._channel.position:-1},j.FlxSound.prototype.setPosition=function(a){this.pause(),this.startSound(a)},j.FlxSound.prototype.toString=function(){return"FlxSound"},j.system.FlxVolumeHandler=function(){this.musicVolume=.5,this.soundVolume=.5,this.mute=!1},j.plugin.FlxObjectPool=function(a){a=void 0===a?0:a,this._internalPool=[];for(var b=0;a>b;b++)this._internalPool.push(this.create())},j.plugin.FlxObjectPool.prototype._internalPool=null,j.plugin.FlxObjectPool.prototype.dispose=function(a){-1==this._internalPool.indexOf(a)&&this._internalPool.push(a)},j.plugin.FlxObjectPool.prototype.getNew=function(){var a=null;return a=this._internalPool.length>0?this._internalPool.pop():this.create()},j.plugin.FlxObjectPool.prototype.create=function(){},j.plugin.FlxMath=function(){},j.plugin.FlxMath.getrandmax=Number.MAX_VALUE,j.plugin.FlxMath.mr=0,j.plugin.FlxMath.cosTable=[],j.plugin.FlxMath.sinTable=[],j.plugin.FlxMath.coefficient1=Math.PI/4,j.plugin.FlxMath.RADTODEG=180/Math.PI,j.plugin.FlxMath.DEGTORAD=Math.PI/180,j.plugin.FlxMath.pointInCoordinates=function(a,b,c,d,e,f){return a>=c&&c+e>=a&&b>=d&&d+f>=b?!0:!1},j.plugin.FlxMath.pointInFlxRect=function(a,b,c){return void 0===c?!1:a>=c.x&&a<=c.getRight()&&b>=c.y&&b<=c.getBottom()?!0:!1},j.plugin.FlxMath.mouseInFlxRect=function(a,b){return void 0===b||null===b?!0:a?j.plugin.FlxMath.pointInFlxRect(j.FlxG.mouse.x,j.FlxG.mouse.y,b):j.plugin.FlxMath.pointInFlxRect(j.FlxG.mouse.screenX,j.FlxG.mouse.screenY,b)},j.plugin.FlxMath.pointInRectangle=function(a,b,c){return a>=c.x&&a<=c.right&&b>=c.y&&b<=c.bottom?!0:!1},j.plugin.FlxMath.atan2=function(a,b){var c,d,e=a,f=3*j.plugin.FlxMath.coefficient1;return 0>e&&(e=-e),b>=0?(c=(b-e)/(b+e),d=j.plugin.FlxMath.coefficient1-j.plugin.FlxMath.coefficient1*c):(c=(b+e)/(e-b),d=f-j.plugin.FlxMath.coefficient1*c),0>a?-d:d},j.plugin.FlxMath.sinCosGenerator=function(a,b,c,d){b=void 0===b?1:b,c=void 0===c?1:c,d=void 0===d?1:d;var e=b,f=c,g=d*Math.PI/a;j.plugin.FlxMath.cosTable=[],j.plugin.FlxMath.sinTable=[];for(var h=0;a>h;h++)f-=e*g,e+=f*g,j.plugin.FlxMath.cosTable[h]=f,j.plugin.FlxMath.sinTable[h]=e;return j.plugin.FlxMath.sinTable},j.plugin.FlxMath.getSinTable=function(){return j.plugin.FlxMath.sinTable},j.plugin.FlxMath.getCosTable=function(){return j.plugin.FlxMath.cosTable},j.plugin.FlxMath.sqrt=function(a){if(isNaN(a))return 0/0;var b,c,d=.002,e=.25*a;if(0===a)return 0;do c=a/e,e=.5*(e+c),b=e-c,0>b&&(b=-b);while(b>d);return e},j.plugin.FlxMath.miniRand=function(){var a=j.plugin.FlxMath.mr;return a++,a*=75,a%=65537,a--,j.plugin.FlxMath.mr++,65536==j.plugin.FlxMath.mr&&(j.plugin.FlxMath.mr=0),a},j.plugin.FlxMath.rand=function(a,b,c){if(isNaN(a)&&(a=0),isNaN(b)&&(b=j.plugin.FlxMath.getrandmax),a==b)return a;if(null!==c&&void 0!==c){c.sort(Array.NUMERIC);var d;do d=b>a?f(a+j.FlxG.random()*(b-a)):f(b+j.FlxG.random()*(a-b));while(c.indexOf(d)>=0);return d}return b>a?f(a+j.FlxG.random()*(b-a)):f(b+j.FlxG.random()*(a-b))},j.plugin.FlxMath.randFloat=function(a,b){return isNaN(a)&&(a=0),isNaN(b)&&(b=j.plugin.FlxMath.getrandmax),a==b?a:b>a?a+Math.random()*(b-a+1):b+Math.random()*(a-b+1)},j.plugin.FlxMath.chanceRoll=function(a){return a=void 0===a?50:a,0>=a?!1:a>=100?!0:100*Math.random()>=a?!1:!0},j.plugin.FlxMath.maxAdd=function(a,b,c){return a+=b,a>c&&(a=c),a},j.plugin.FlxMath.wrapValue=function(a,b,c){var d;return a=Math.abs(a),b=Math.abs(b),c=Math.abs(c),d=(a+b)%c},j.plugin.FlxMath.vectorLength=function(a,b){return Math.sqrt(a*a+b*b)},j.plugin.FlxMath.dotProduct=function(a,b,c,d){return a*c+b*d},j.plugin.FlxMath.randomSign=function(){return Math.random()>.5?1:-1},j.plugin.FlxMath.isOdd=function(a){return 1&a?!0:!1},j.plugin.FlxMath.isEven=function(a){return 1&a?!1:!0},j.plugin.FlxMath.wrapAngle=function(a){var b=f(a);return a>180?b=-180:-180>a&&(b=180),b},j.plugin.FlxMath.angleLimit=function(a,b,c){var d=a;return a>c?d=c:b>a&&(d=b),d},j.plugin.FlxMath.asDegrees=function(a){return a*j.plugin.FlxMath.RADTODEG},j.plugin.FlxMath.asRadians=function(a){return a*j.plugin.FlxMath.DEGTORAD},j.plugin.FlxMath.constrainRange=function(a,b,c){return a>c?c:b>a?b:a},j.plugin.FlxPause=function(){j.plugin.FlxPause.parent.constructor.apply(this)},b(j.plugin.FlxPause,j.FlxGroup),j.plugin.FlxPause.prototype.toString=function(){return"FlxPause"},j.plugin.PauseEvent=function(){},j.plugin.PauseEvent.PAUSE_IN="pauseIn",j.plugin.PauseEvent.PAUSE_OUT="pauseOut",j.plugin.PauseEvent.getEvent=function(a){if(j.FlxG.device.ie){var b=document.createEvent("CustomEvent");return b.initCustomEvent(a,!1,!1,null),b}return new CustomEvent(a)},j.plugin.TimerManager=function(){j.plugin.TimerManager.parent.constructor.apply(this),this._timers=[],this.visible=!1},b(j.plugin.TimerManager,j.FlxBasic),j.plugin.TimerManager.prototype._timers=null,j.plugin.TimerManager.prototype.destroy=function(){this.clear(),this._timers=null,j.plugin.TimerManager.parent.destroy.apply(this)},j.plugin.TimerManager.prototype.update=function(){for(var a,b=this._timers.length-1;b>=0;)a=this._timers[b--],null!==a&&!a.paused&&!a.finished&&a.time>0&&a.update()},j.plugin.TimerManager.prototype.add=function(a){this._timers.push(a)},j.plugin.TimerManager.prototype.remove=function(a){var b=this._timers.indexOf(a);b>=0&&this._timers.splice(b,1)},j.plugin.TimerManager.prototype.clear=function(){if(null!==this._timers){for(var a=this._timers.length-1;a>=0;){var b=this._timers[a--];null!==b&&b.destroy()}this._timers.length=0}},j.plugin.TimerManager.prototype.toString=function(){return"TimerManager"},j.plugin.DebugPathDisplay=function(){j.plugin.DebugPathDisplay.parent.constructor.apply(this),this._paths=[],this.active=!1},b(j.plugin.DebugPathDisplay,j.FlxBasic),j.plugin.DebugPathDisplay.prototype._paths=null,j.plugin.DebugPathDisplay.prototype.destroy=function(){this.clear(),this._paths=null,j.plugin.DebugPathDisplay.parent.destroy.apply(this)},j.plugin.DebugPathDisplay.prototype.draw=function(){if(j.FlxG.visualDebug&&!this.ignoreDrawDebug){(null===this.cameras||void 0===this.cameras)&&(this.cameras=j.FlxG.cameras);for(var a=0,b=this.cameras.length;b>a;)this.drawDebug(this.cameras[a++])}},j.plugin.DebugPathDisplay.prototype.drawDebug=function(a){(void 0===a||null===a)&&(a=j.FlxG.camera);for(var b,c=this._paths.length-1;c>=0;)b=this._paths[c--],null===b||b.ignoreDrawDebug||b.drawDebug(a)},j.plugin.DebugPathDisplay.prototype.add=function(a){this._paths.push(a)},j.plugin.DebugPathDisplay.prototype.remove=function(a){var b=this._paths.indexOf(a);b>=0&&this._paths.splice(b,1)},j.plugin.DebugPathDisplay.prototype.clear=function(){if(null!==this._paths){for(var a=this._paths.length-1;a>=0;){var b=this._paths[a--];null!==b&&b.destroy()}this._paths.length=0}},j.plugin.DebugPathDisplay.prototype.toString=function(){return"DebugPathDisplay"},j.plugin.FlxTimer=function(){this.time=0,this.loops=0,this._callback=null,this._timeCounter=0,this._loopsCounter=0,this.paused=!1,this.finished=!1},j.plugin.FlxTimer.prototype.time=0,j.plugin.FlxTimer.prototype.loops=0,j.plugin.FlxTimer.prototype.paused=!1,j.plugin.FlxTimer.prototype.finished=!1,j.plugin.FlxTimer.prototype._callback=null,j.plugin.FlxTimer.prototype._timeCounter=0,j.plugin.FlxTimer.prototype._loopsCounter=0,j.plugin.FlxTimer.prototype.destroy=function(){this.stop(),this._callback=null},j.plugin.FlxTimer.prototype.update=function(){for(this._timeCounter+=j.FlxG.elapsed;this._timeCounter>=this.time&&!this.paused&&!this.finished;)this._timeCounter-=this.time,this._loopsCounter++,this.loops>0&&this._loopsCounter>=this.loops&&this.stop(),null!==this._callback&&this._callback(this)},j.plugin.FlxTimer.prototype.start=function(a,b,c){a=void 0===a?1:a,b=void 0===b?1:b;var d=j.plugin.FlxTimer.getManager();return null!==d&&d.add(this),this.paused?(this.paused=!1,this):(this.paused=!1,this.finished=!1,this.time=a,this.loops=b,this._callback=c,this._timeCounter=0,this._loopsCounter=0,this)},j.plugin.FlxTimer.prototype.stop=function(){this.finished=!0;var a=j.plugin.FlxTimer.getManager();null!==a&&a.remove(this)},j.plugin.FlxTimer.prototype.getTimeLeft=function(){return this.time-this._timeCounter},j.plugin.FlxTimer.prototype.getLoopsLeft=function(){return this.loops-this._loopsCounter},j.plugin.FlxTimer.prototype.getProgress=function(){return this.time>0?this._timeCounter/this.time:0},j.plugin.FlxTimer.getManager=function(){return j.FlxG.getPlugin(j.plugin.TimerManager)},j.plugin.FlxVelocity=function(){},j.plugin.FlxVelocity.moveTowardsObject=function(a,b,c,d){c=void 0===c?60:c,d=void 0===d?0:d;var e=j.plugin.FlxVelocity.angleBetween(a,b);if(d>0){var f=j.plugin.FlxVelocity.distanceBetween(a,b);c=f/(d/1e3)}a.velocity.x=Math.cos(e)*c,a.velocity.y=Math.sin(e)*c},j.plugin.FlxVelocity.accelerateTowardsObject=function(a,b,c,d,e){var g=j.plugin.FlxVelocity.angleBetween(a,b);a.velocity.x=0,a.velocity.y=0,a.acceleration.x=f(Math.cos(g)*c),a.acceleration.y=f(Math.sin(g)*c),a.maxVelocity.x=d,a.maxVelocity.y=e},j.plugin.FlxVelocity.moveTowardsMouse=function(a,b,c){b=void 0===b?60:b,c=void 0===c?0:c;var d=j.plugin.FlxVelocity.angleBetweenMouse(a);if(c>0){var e=j.plugin.FlxVelocity.distanceToMouse(a);b=e/(c/1e3)}a.velocity.x=Math.cos(d)*b,a.velocity.y=Math.sin(d)*b},j.plugin.FlxVelocity.accelerateTowardsMouse=function(a,b,c,d){var e=j.plugin.FlxVelocity.angleBetweenMouse(a);a.velocity.x=0,a.velocity.y=0,a.acceleration.x=f(Math.cos(e)*b),a.acceleration.y=f(Math.sin(e)*b),a.maxVelocity.x=c,a.maxVelocity.y=d},j.plugin.FlxVelocity.moveTowardsPoint=function(a,b,c,d){c=void 0===c?60:c,d=void 0===d?0:d;var e=j.plugin.FlxVelocity.angleBetweenPoint(a,b);if(d>0){var f=j.plugin.FlxVelocity.distanceToPoint(a,b);c=f/(d/1e3)}a.velocity.x=Math.cos(e)*c,a.velocity.y=Math.sin(e)*c},j.plugin.FlxVelocity.accelerateTowardsPoint=function(a,b,c,d,e){var g=j.plugin.FlxVelocity.angleBetweenPoint(a,b);a.velocity.x=0,a.velocity.y=0,a.acceleration.x=f(Math.cos(g)*c),a.acceleration.y=f(Math.sin(g)*c),a.maxVelocity.x=d,a.maxVelocity.y=e},j.plugin.FlxVelocity.distanceBetween=function(a,b){var c=a.x+a.origin.x-(b.x+b.origin.x),d=a.y+a.origin.y-(b.y+b.origin.y);return f(j.plugin.FlxMath.vectorLength(c,d))},j.plugin.FlxVelocity.distanceToPoint=function(a,b){var c=a.x+a.origin.x-b.x,d=a.y+a.origin.y-b.y;return f(j.plugin.FlxMath.vectorLength(c,d))},j.plugin.FlxVelocity.distanceToMouse=function(a){var b=a.x+a.origin.x-j.FlxG.mouse.screenX,c=a.y+a.origin.y-j.FlxG.mouse.screenY;return f(j.plugin.FlxMath.vectorLength(b,c))},j.plugin.FlxVelocity.angleBetweenPoint=function(a,b,c){var d=b.x-(a.x+a.origin.x),e=b.y-(a.y+a.origin.y);return c?j.plugin.FlxMath.asDegrees(Math.atan2(e,d)):Math.atan2(e,d)},j.plugin.FlxVelocity.angleBetween=function(a,b,c){var d=b.x+b.origin.x-(a.x+a.origin.x),e=b.y+b.origin.y-(a.y+a.origin.y);return c?j.plugin.FlxMath.asDegrees(Math.atan2(e,d)):Math.atan2(e,d)},j.plugin.FlxVelocity.velocityFromAngle=function(a,b){var c=j.plugin.FlxMath.asRadians(a),d=new j.FlxPoint;return d.x=f(Math.cos(c)*b),d.y=f(Math.sin(c)*b),d},j.plugin.FlxVelocity.velocityFromFacing=function(a,b){var c=0;a.getFacing()==j.FlxObject.LEFT?c=j.plugin.FlxMath.asRadians(180):a.getFacing()==j.FlxObject.RIGHT?c=j.plugin.FlxMath.asRadians(0):a.getFacing()==j.FlxObject.UP?c=j.plugin.FlxMath.asRadians(-90):a.getFacing()==j.FlxObject.DOWN&&(c=j.plugin.FlxMath.asRadians(90));var d=new j.FlxPoint;return d.x=f(Math.cos(c)*b),d.y=f(Math.sin(c)*b),d},j.plugin.FlxVelocity.angleBetweenMouse=function(a,b){var c=a.getScreenXY(),d=j.FlxG.mouse.screenX-c.x,e=j.FlxG.mouse.screenY-c.y;return b?j.plugin.FlxMath.asDegrees(Math.atan2(e,d)):Math.atan2(e,d)},j.plugin.FlxStateStack=function(){this._stateStack=[],this._currentMode=j.plugin.FlxStateStack.NORMAL},j.plugin.FlxStateStack.NORMAL=0,j.plugin.FlxStateStack.PAUSE_GAME=2,j.plugin.FlxStateStack.DISABLED=3,j.plugin.FlxStateStack.prototype._currentMode=0,j.plugin.FlxStateStack.prototype._stateStack=null,j.plugin.FlxStateStack.prototype.getBackKeyMode=function(){return this._currentMode},j.plugin.FlxStateStack.prototype.setBackKeyMode=function(a){this._currentMode=a},j.plugin.FlxStateStack.prototype.pushState=function(a){var b=new a.constructor;b instanceof j.FlxState?this._stateStack.push(a):j.FlxG.log("ERROR: "+j.FlxU.getClassName(b,!0)+" must extend Flxstate in order to be used in a FlxStateStack.")},j.plugin.FlxStateStack.prototype.popState=function(){return this._stateStack.pop()},j.plugin.FlxStateStack.prototype.size=function(){return this._stateStack.length},j.plugin.FlxStateStack.prototype.clear=function(){this._stateStack.length=0},j.plugin.FlxSplashScreen=function(){j.plugin.FlxSplashScreen.parent.constructor.apply(this)},b(j.plugin.FlxSplashScreen,j.FlxState),j.plugin.FlxSplashScreen.PIXEL_SIZE=32,j.plugin.FlxSplashScreen.LOGO_TIMER=2,j.plugin.FlxSplashScreen.initialGameState=null,j.plugin.FlxSplashScreen._logoTimer=0,j.plugin.FlxSplashScreen.prototype.create=function(){j.FlxG.setBgColor(j.FlxG.BLACK),j.FlxG.setDisablePause(!0),this._logoTimer=0;var a=1;j.FlxG.height>200&&j.FlxG.height>j.FlxG.width&&(a=2);var b=j.plugin.FlxSplashScreen.PIXEL_SIZE*a,c=new j.FlxSprite;c.loadGraphic(j.data.FlxSystemAsset.poweredBy),c.scaleSprite(a,a);var d=j.FlxG.height/2-(4*b+j.plugin.FlxSplashScreen.PIXEL_SIZE/2+f(c.height))/2,e=j.FlxG.width/2-b;0>d&&(d=5),this.add(new j.plugin.FlxLogoPixel(e+b,d,4294901823,b)),this.add(new j.plugin.FlxLogoPixel(e,d+b,4294950711,b)),this.add(new j.plugin.FlxLogoPixel(e+b,d+2*b,4278962431,b)),this.add(new j.plugin.FlxLogoPixel(e,d+2*b,4282074111,b)),this.add(new j.plugin.FlxLogoPixel(e,d+3*b,4278237483,b)),c.x=j.FlxG.width/2-c.width/2,c.y=d+4*b+j.plugin.FlxSplashScreen.PIXEL_SIZE/2,this.add(c)},j.plugin.FlxSplashScreen.prototype.update=function(){j.plugin.FlxSplashScreen.parent.update.apply(this),this._logoTimer+=j.FlxG.elapsed,this._logoTimer>j.plugin.FlxSplashScreen.LOGO_TIMER&&(j.FlxG.setDisablePause(!1),j.FlxG.switchState(new j.plugin.FlxSplashScreen.initialGameState.constructor))},j.plugin.FlxLogoPixel=function(a,b,c,d){j.plugin.FlxSplashScreen.parent.constructor.apply(this),this._layers=[];var e=[2902458367,c,2902458367,c,2902458367],f=new j.FlxSprite(a,b);f.makeGraphic(d,d,c),this.add(f),this._layers[0]=f;for(var g=e.length,h=0,i=0;g>i;i++){var k=new j.FlxSprite(a,b);k.makeGraphic(d,d,e[h]),this.add(k),this._layers[i+1]=k,++h>=g&&(h=0)}this._curLayer=this._layers.length-1},b(j.plugin.FlxLogoPixel,j.FlxGroup),j.plugin.FlxLogoPixel.prototype._layers=null,j.plugin.FlxLogoPixel.prototype._curLayer=0,j.plugin.FlxLogoPixel.prototype.update=function(){0!==this._curLayer&&(this._layers[this._curLayer].getAlpha()>=.1?this._layers[this._curLayer].setAlpha(this._layers[this._curLayer].getAlpha()-.1):(this._layers[this._curLayer].setAlpha(0),this._curLayer--))},j.plugin.FlxRectangleButton=function(a,b,c){a=void 0===a?0:a,b=void 0===b?0:b,c=void 0===c?3:c,j.plugin.FlxRectangleButton.parent.constructor.apply(this,[a,b]),this.rect=new Array(c),this._maxRect=c,this._lastRect=0},b(j.plugin.FlxRectangleButton,j.FlxSprite),j.plugin.FlxRectangleButton.STATUS_NORMAL=0,j.plugin.FlxRectangleButton.STATUS_JUST_PRESSED=1,j.plugin.FlxRectangleButton.STATUS_PRESSED=2,j.plugin.FlxRectangleButton.STATUS_JUST_RELEASED=3,j.plugin.FlxRectangleButton.STATUS_OVER=4,j.plugin.FlxRectangleButton.prototype.status=0,j.plugin.FlxRectangleButton.prototype.rect=null,j.plugin.FlxRectangleButton.prototype._lastRect=0,j.plugin.FlxRectangleButton.prototype._maxRect=0,j.plugin.FlxRectangleButton.prototype._pointerId=0,j.plugin.FlxRectangleButton.prototype.update=function(){for(var a=!1,b=0;b<this._lastRect&&a===!1;b++){null===this.cameras&&(this.cameras=j.FlxG.cameras);for(var c,d=0,e=this.cameras.length,f=0,g=j.FlxG.mouse.activePointers+1,h=!0;e>d;)for(c=this.cameras[d++];g>f;)j.FlxG.mouse.getWorldPosition(c,this._point,f),this.rect[b].containsPoint(this._point.x,this._point.y)&&(h=!1,j.FlxG.mouse.pressed(f)&&(this.status=j.plugin.FlxRectangleButton.STATUS_PRESSED,j.FlxG.mouse.justPressed(f)&&(this.status=j.plugin.FlxRectangleButton.STATUS_JUST_PRESSED),this._pointerId=f)),++f;this.status==j.plugin.FlxRectangleButton.STATUS_JUST_RELEASED&&(this.status=j.plugin.FlxRectangleButton.STATUS_NORMAL),(h||!h&&!j.FlxG.mouse.pressed(this._pointerId))&&this.status==j.plugin.FlxRectangleButton.STATUS_PRESSED&&(this.status=j.FlxG.mouse.justReleased(this._pointerId)?j.plugin.FlxRectangleButton.STATUS_JUST_RELEASED:j.plugin.FlxRectangleButton.STATUS_NORMAL),this.status==j.plugin.FlxRectangleButton.STATUS_JUST_PRESSED||this.status==j.plugin.FlxRectangleButton.STATUS_JUST_RELEASED?this.setFrame(j.plugin.FlxRectangleButton.STATUS_NORMAL):this.setFrame(status)}},j.plugin.FlxRectangleButton.prototype.addRectangle=function(a,b,c,d){this._lastRect<this._maxRect&&(this.rect[this._lastRect++]=new j.FlxRect(a,b,c,d))},j.plugin.FlxRectangleButton.prototype.draw=function(){if(j.FlxG.visualDebug&&!this.ignoreDrawDebug)for(var a=0;a<this._lastRect;a++){var b=new j.FlxSprite;b.makeGraphic(f(this.rect[a].width),f(this.rect[a].height),j.FlxG.RED),b.x=this.rect[a].x,b.y=this.rect[a].y,b.draw()}j.plugin.FlxRectangleButton.parent.draw.apply(this)},j.plugin.FlxBitmapFont=function(a,b,c,d,e,f,g,h,i){f=void 0===f?0:f,g=void 0===g?0:g,h=void 0===h?0:h,i=void 0===i?0:i,j.plugin.FlxBitmapFont.parent.constructor.apply(this),this._font=j.FlxG.addBitmap(a),this.characterWidth=b,this.characterHeight=c,this.characterSpacingX=f,this.characterSpacingY=g,this.characterPerRow=e,this.offsetX=h,this.offsetY=i,this.grabData=[],this._alpha=1,this._color=j.FlxG.WHITE;for(var k=this.offsetX,l=this.offsetY,m=0,n=0;n<d.length;n++)this.grabData[d.charCodeAt(n)]=new j.FlxRect(k,l,this.characterWidth,this.characterHeight),m++,m==this.characterPerRow?(m=0,k=this.offsetX,l+=this.characterHeight+this.characterSpacingY):k+=this.characterWidth+this.characterSpacingX},b(j.plugin.FlxBitmapFont,j.FlxSprite),j.plugin.FlxBitmapFont.ALIGN_LEFT="left",j.plugin.FlxBitmapFont.ALIGN_RIGHT="right",j.plugin.FlxBitmapFont.ALIGN_CENTER="center",j.plugin.FlxBitmapFont.TEXT_SET1=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",j.plugin.FlxBitmapFont.TEXT_SET2=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",j.plugin.FlxBitmapFont.TEXT_SET3="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",j.plugin.FlxBitmapFont.TEXT_SET4="ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",j.plugin.FlxBitmapFont.TEXT_SET5="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",j.plugin.FlxBitmapFont.TEXT_SET6="ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",j.plugin.FlxBitmapFont.TEXT_SET7="AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",j.plugin.FlxBitmapFont.TEXT_SET8="0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",j.plugin.FlxBitmapFont.TEXT_SET9="ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",j.plugin.FlxBitmapFont.TEXT_SET10="ABCDEFGHIJKLMNOPQRSTUVWXYZ",j.plugin.FlxBitmapFont.TEXT_SET11="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789",j.plugin.FlxBitmapFont.prototype.align=j.plugin.FlxBitmapFont.ALIGN_LEFT,j.plugin.FlxBitmapFont.prototype.multiLine=!1,j.plugin.FlxBitmapFont.prototype.autoUpperCase=!0,j.plugin.FlxBitmapFont.prototype.customSpacingX=0,j.plugin.FlxBitmapFont.prototype.customSpacingY=0,j.plugin.FlxBitmapFont.prototype._text=null,j.plugin.FlxBitmapFont.prototype._font=null,j.plugin.FlxBitmapFont.prototype.characterWidth=0,j.plugin.FlxBitmapFont.prototype.characterHeight=0,j.plugin.FlxBitmapFont.prototype.characterSpacingX=0,j.plugin.FlxBitmapFont.prototype.characterSpacingY=0,j.plugin.FlxBitmapFont.prototype.characterPerRow=0,j.plugin.FlxBitmapFont.prototype.grabData=null,j.plugin.FlxBitmapFont.prototype.fixedWidth=0,j.plugin.FlxBitmapFont.prototype.setFixedWidth=function(a,b){this.fixedWidth=a,this.align=void 0===b?"left":b},j.plugin.FlxBitmapFont.prototype.getText=function(){return this._text},j.plugin.FlxBitmapFont.prototype.setText=function(a,b,c,d,e,f){if(b=void 0===b?!1:b,c=void 0===c?0:c,d=void 0===d?0:d,e=void 0===e?"left":e,f=void 0===f?!1:f,this.customSpacingX=c,this.customSpacingY=d,this.align=e,this.multiLine=b,this.autoUpperCase=f?!1:!0,a.length>0){var g=null;g=this.autoUpperCase?a.toUpperCase():a,g!=this._text&&(this._text=g,this.removeUnsupportedCharacters(this.multiLine),this.buildBitmapFontText())}},j.plugin.FlxBitmapFont.prototype.buildBitmapFontText=function(){var a,b=0,c=0;if(this.multiLine){var d=this._text.split("\n");a=this.fixedWidth>0?new m(this.fixedWidth,d.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0,15):new m(this.getLongestLine()*(this.characterWidth+this.customSpacingX),d.length*(characterHeight+this.customSpacingY)-this.customSpacingY,!0,15);
for(var e=0;e<d.length;e++){switch(this.align){case j.plugin.FlxBitmapFont.ALIGN_LEFT:b=0;break;case j.plugin.FlxBitmapFont.ALIGN_RIGHT:b=a.width-d[e].length*(this.characterWidth+this.customSpacingX);break;case j.plugin.FlxBitmapFont.ALIGN_CENTER:b=a.width/2-d[e].length*(this.characterWidth+this.customSpacingX)/2,b+=this.customSpacingX/2}0>b&&(b=0),this.pasteLine(a,d[e],b,c,this.customSpacingX),c+=this.characterHeight+this.customSpacingY}}else{switch(a=this.fixedWidth>0?new m(this.fixedWidth,this.characterHeight,!0,15):new m(this._text.length*(this.characterWidth+this.customSpacingX),this.characterHeight,!0,15),this.align){case j.plugin.FlxBitmapFont.ALIGN_LEFT:b=0;break;case j.plugin.FlxBitmapFont.ALIGN_RIGHT:b=a.width-this._text.length*(this.characterWidth+this.customSpacingX);break;case j.plugin.FlxBitmapFont.ALIGN_CENTER:b=a.width/2-this._text.length*(this.characterWidth+this.customSpacingX)/2,b+=this.customSpacingX/2}this.pasteLine(a,this._text,b,0,this.customSpacingX)}this.setPixels(a)},j.plugin.FlxBitmapFont.prototype.getCharacter=function(a){var b=new j.FlxSprite,c=new m(this.characterWidth,this.characterHeight,!0,15);return this.grabData[a.charCodeAt(0)]instanceof j.FlxRect&&32!=a.charCodeAt(0)&&c.copyPixels(this._font,this.grabData[a.charCodeAt(0)],new j.FlxPoint(0,0)),b.setPixels(c),b},j.plugin.FlxBitmapFont.prototype.getCharacterAsBitmapData=function(a){var b=new m(this.characterWidth,this.characterHeight,!0,15);return this.grabData[a.charCodeAt(0)]instanceof j.FlxRect&&b.copyPixels(this._font,this.grabData[a.charCodeAt(0)],new j.FlxPoint(0,0)),b},j.plugin.FlxBitmapFont.prototype.pasteLine=function(a,b,c,d,e){c=void 0===c?0:c,d=void 0===d?0:d,e=void 0===e?0:e;for(var f=0;f<b.length;f++)if(" "==b.charAt(f))c+=this.characterWidth+e;else if(this.grabData[b.charCodeAt(f)]instanceof j.FlxRect&&(a.copyPixels(this._font,this.grabData[b.charCodeAt(f)],new j.FlxPoint(c,d)),c+=this.characterWidth+e,c>a.width))break},j.plugin.FlxBitmapFont.prototype.getLongestLine=function(){var a=0;if(this._text.length>0)for(var b=this._text.split("\n"),c=0;c<b.length;c++)b[c].length>a&&(a=b[c].length);return a},j.plugin.FlxBitmapFont.prototype.removeUnsupportedCharacters=function(a){a=void 0===a?!0:a;for(var b="",c=0;c<this._text.length;c++)(this.grabData[this._text.charCodeAt(c)]instanceof j.FlxRect||32==this._text.charCodeAt(c)||0==a&&"\n"==this._text.charAt(c))&&(b=b.concat(this._text.charAt(c)));return b},j.plugin.FlxBitmapFont.prototype.toString=function(){return"FlxBitmapFont"},j.plugin.powertools.FlxBar=function(a,b,c,d,e,f,g,h,i,k){j.plugin.powertools.FlxBar.parent.constructor.apply(this,[a,b]),c=void 0===c?j.plugin.powertools.FlxBar.FILL_LEFT_TO_RIGHT:c,d=void 0===d?100:d,e=void 0===e?10:e,f=void 0===f?null:f,g=void 0===g?"":g,h=void 0===h?0:h,i=void 0===i?100:i,k=void 0===k?!1:k,this.barWidth=d,this.barHeight=e,k?(this.makeGraphic(this.barWidth+2,this.barHeight+2,4294967295,!0),this.filledBarPoint=new j.FlxPoint(1,1)):(this.makeGraphic(this.barWidth,this.barHeight,4294967295,!0),this.filledBarPoint=new j.FlxPoint(0,0)),this.canvas=new m(d,e,!0,0),f&&(this.parent=f,this.parentVariable=g),this.setFillDirection(c),this.setRange(h,i),this.createFilledBar(4278210816,4278252544,k),this.emptyKill=!1},b(j.plugin.powertools.FlxBar,j.FlxSprite),j.plugin.powertools.FlxBar.prototype.canvas=null,j.plugin.powertools.FlxBar.prototype.barType=0,j.plugin.powertools.FlxBar.prototype.barWidth=0,j.plugin.powertools.FlxBar.prototype.barHeight=0,j.plugin.powertools.FlxBar.prototype.parent=null,j.plugin.powertools.FlxBar.prototype.parentVariable=null,j.plugin.powertools.FlxBar.prototype.fixedPosition=!0,j.plugin.powertools.FlxBar.prototype.positionOffset=null,j.plugin.powertools.FlxBar.prototype.min=0,j.plugin.powertools.FlxBar.prototype.max=0,j.plugin.powertools.FlxBar.prototype.range=0,j.plugin.powertools.FlxBar.prototype.pct=0,j.plugin.powertools.FlxBar.prototype.value=0,j.plugin.powertools.FlxBar.prototype.pxPerPercent=0,j.plugin.powertools.FlxBar.prototype.emptyCallback=null,j.plugin.powertools.FlxBar.prototype.emptyBar=null,j.plugin.powertools.FlxBar.prototype.emptyBarRect=null,j.plugin.powertools.FlxBar.prototype.emptyBarPoint=null,j.plugin.powertools.FlxBar.prototype.emptyKill=!1,j.plugin.powertools.FlxBar.prototype.zeroOffset=new j.FlxPoint,j.plugin.powertools.FlxBar.prototype.filledCallback=null,j.plugin.powertools.FlxBar.prototype.filledBar=null,j.plugin.powertools.FlxBar.prototype.filledBarRect=null,j.plugin.powertools.FlxBar.prototype.filledBarPoint=null,j.plugin.powertools.FlxBar.prototype.fillDirection=0,j.plugin.powertools.FlxBar.prototype.fillHorizontal=!1,j.plugin.powertools.FlxBar.FILL_LEFT_TO_RIGHT=1,j.plugin.powertools.FlxBar.FILL_RIGHT_TO_LEFT=2,j.plugin.powertools.FlxBar.FILL_TOP_TO_BOTTOM=3,j.plugin.powertools.FlxBar.FILL_BOTTOM_TO_TOP=4,j.plugin.powertools.FlxBar.FILL_HORIZONTAL_INSIDE_OUT=5,j.plugin.powertools.FlxBar.FILL_HORIZONTAL_OUTSIDE_IN=6,j.plugin.powertools.FlxBar.FILL_VERTICAL_INSIDE_OUT=7,j.plugin.powertools.FlxBar.FILL_VERTICAL_OUTSIDE_IN=8,j.plugin.powertools.FlxBar.BAR_FILLED=1,j.plugin.powertools.FlxBar.BAR_GRADIENT=2,j.plugin.powertools.FlxBar.BAR_IMAGE=3,j.plugin.powertools.FlxBar.prototype.trackParent=function(a,b){this.fixedPosition=!1,this.positionOffset=new j.FlxPoint(a,b),this.parent.scrollFactor&&(this.scrollFactor.x=this.parent.scrollFactor.x,this.scrollFactor.y=this.parent.scrollFactor.y)},j.plugin.powertools.FlxBar.prototype.setParent=function(a,b,c,d,e){c=void 0===c?!1:c,d=void 0===d?0:d,e=void 0===e?0:e,this.parent=a,this.parentVariable=b,c&&this.trackParent(d,e),this.updateValueFromParent(),this.updateBar()},j.plugin.powertools.FlxBar.prototype.stopTrackingParent=function(a,b){this.fixedPosition=!0,this.x=a,this.y=b},j.plugin.powertools.FlxBar.prototype.setCallbacks=function(a,b,c){c=void 0===c?!1:c,a=void 0===a?null:a,b=void 0===b?null:b,null!==a&&(this.emptyCallback=a),null!==b&&(this.filledCallback=b),c&&(this.emptyKill=!0)},j.plugin.powertools.FlxBar.prototype.setKillOnEmpty=function(a){this.emptyKill=a},j.plugin.powertools.FlxBar.prototype.getKillOnEmpty=function(){return this.emptyKill},j.plugin.powertools.FlxBar.prototype.setRange=function(a,b){if(a>=b)throw Error("FlxBar: max cannot be less than or equal to min");this.min=a,this.max=b,this.range=b-a,this.pct=this.range<100?this.range/100:this.range/100,this.pxPerPercent=this.fillHorizontal?this.barWidth/100:this.barHeight/100,this.value?(this.value>b&&(this.value=b),this.value<a&&(this.value=a)):this.value=a},j.plugin.powertools.FlxBar.prototype.debug=function(){j.FlxG.log("FlxBar - Min:",this.min,"Max:",this.max,"Range:",this.range,"pct:",this.pct,"pxp:",this.pxPerPercent,"Value:",this.value)},j.plugin.powertools.FlxBar.prototype.getStats=function(){var a={min:this.min,max:this.max,range:this.range,pct:this.pct,pxPerPct:this.pxPerPercent,fillH:this.fillHorizontal};return a},j.plugin.powertools.FlxBar.prototype.createFilledBar=function(a,b,c,d){c=void 0===c?!1:c,d=void 0===d?4294967295:d,this.barType=j.plugin.powertools.FlxBar.BAR_FILLED,c?(this.emptyBar=new m(this.barWidth,this.barHeight,!0,d),this.emptyBar.fillRect(new j.FlxRect(1,1,this.barWidth-2,this.barHeight-2),a),this.filledBar=new m(this.barWidth,this.barHeight,!0,d),this.filledBar.fillRect(new j.FlxRect(1,1,this.barWidth-2,this.barHeight-2),b)):(this.emptyBar=new m(this.barWidth,this.barHeight,!0,a),this.filledBar=new m(this.barWidth,this.barHeight,!0,b)),this.filledBarRect=new j.FlxRect(0,0,this.filledBar.width,this.filledBar.height),this.emptyBarRect=new j.FlxRect(0,0,this.emptyBar.width,this.emptyBar.height)},j.plugin.powertools.FlxBar.prototype.createGradientBar=function(a,b,c,d,e,f){c=void 0===c?1:c,d=void 0===d?180:d,e=void 0===e?!1:e,f=void 0===f?4294967295:f,this.barType=j.plugin.powertools.FlxBar.BAR_GRADIENT,this.emptyBarRect=new j.FlxRect(0,0,this.emptyBar.width,this.emptyBar.height),this.filledBarRect=new j.FlxRect(0,0,this.filledBar.width,this.filledBar.height)},j.plugin.powertools.FlxBar.prototype.createImageBar=function(a,b,c,d){a=void 0===a?null:a,b=void 0===b?null:b,c=void 0===c?4278190080:c,d=void 0===d?4278255360:d,this.barType=j.plugin.powertools.FlxBar.BAR_IMAGE,(null!==a||null!==b)&&(null!==a&&null===b?(this.emptyBar=j.FlxG.addBitmap(a,!1,!0),this.emptyBarRect=new j.FlxRect(0,0,this.emptyBar.width,this.emptyBar.height),this.barWidth=this.emptyBarRect.width,this.barHeight=this.emptyBarRect.height,this.filledBar=new m(this.barWidth,this.barHeight,!0,d),this.filledBarRect=new j.FlxRect(0,0,this.barWidth,this.barHeight)):null===a&&b?(this.filledBar=j.FlxG.addBitmap(b,!1,!0),this.filledBarRect=new j.FlxRect(0,0,this.filledBar.width,this.filledBar.height),this.barWidth=this.filledBarRect.width,this.barHeight=this.filledBarRect.height,this.emptyBar=new m(this.barWidth,this.barHeight,!0,c),this.emptyBarRect=new j.FlxRect(0,0,this.barWidth,this.barHeight)):a&&b&&(this.emptyBar=j.FlxG.addBitmap(a,!1,!0),this.emptyBarRect=new j.FlxRect(0,0,this.emptyBar.width,this.emptyBar.height),this.filledBar=j.FlxG.addBitmap(b,!1,!0),this.filledBarRect=new j.FlxRect(0,0,this.filledBar.width,this.filledBar.height),this.barWidth=this.emptyBarRect.width,this.barHeight=this.emptyBarRect.height),this.canvas=new m(this.barWidth,this.barHeight,!0,0),this.pxPerPercent=this.fillHorizontal?this.barWidth/100:this.barHeight/100)},j.plugin.powertools.FlxBar.prototype.setFillDirection=function(a){switch(a){case j.plugin.powertools.FlxBar.FILL_LEFT_TO_RIGHT:case j.plugin.powertools.FlxBar.FILL_RIGHT_TO_LEFT:case j.plugin.powertools.FlxBar.FILL_HORIZONTAL_INSIDE_OUT:case j.plugin.powertools.FlxBar.FILL_HORIZONTAL_OUTSIDE_IN:this.fillDirection=a,this.fillHorizontal=!0;break;case j.plugin.powertools.FlxBar.FILL_TOP_TO_BOTTOM:case j.plugin.powertools.FlxBar.FILL_BOTTOM_TO_TOP:case j.plugin.powertools.FlxBar.FILL_VERTICAL_INSIDE_OUT:case j.plugin.powertools.FlxBar.FILL_VERTICAL_OUTSIDE_IN:this.fillDirection=a,this.fillHorizontal=!1}},j.plugin.powertools.FlxBar.prototype.updateValueFromParent=function(){this.updateValue(this.parent[this.parentVariable])},j.plugin.powertools.FlxBar.prototype.updateValue=function(a){this.newValue>this.max&&(this.newValue=this.max),this.newValue<this.min&&(this.newValue=this.min),this.value=a,this.value==this.min&&null!==this.emptyCallback&&this.emptyCallback(),this.value==this.max&&null!==this.filledCallback&&this.filledCallback(),this.value==this.min&&this.emptyKill&&this.kill()},j.plugin.powertools.FlxBar.prototype.updateBar=function(){if(this.fillHorizontal?this.filledBarRect.width=f(this.percent*this.pxPerPercent):this.filledBarRect.height=f(this.percent*this.pxPerPercent),this.canvas.copyPixels(this.emptyBar,this.emptyBarRect,this.zeroOffset),this.percent>0){switch(this.fillDirection){case j.plugin.powertools.FlxBar.FILL_LEFT_TO_RIGHT:case j.plugin.powertools.FlxBar.FILL_TOP_TO_BOTTOM:break;case j.plugin.powertools.FlxBar.FILL_BOTTOM_TO_TOP:this.filledBarRect.y=this.barHeight-this.filledBarRect.height,this.filledBarPoint.y=this.barHeight-this.filledBarRect.height;break;case j.plugin.powertools.FlxBar.FILL_RIGHT_TO_LEFT:this.filledBarRect.x=this.barWidth-this.filledBarRect.width,this.filledBarPoint.x=this.barWidth-this.filledBarRect.width;break;case j.plugin.powertools.FlxBar.FILL_HORIZONTAL_INSIDE_OUT:this.filledBarRect.x=f(this.barWidth/2-this.filledBarRect.width/2),this.filledBarPoint.x=f(this.barWidth/2-this.filledBarRect.width/2);break;case j.plugin.powertools.FlxBar.FILL_HORIZONTAL_OUTSIDE_IN:this.filledBarRect.width=f(100-this.percent*this.pxPerPercent),this.filledBarPoint.x=f((this.barWidth-this.filledBarRect.width)/2);break;case j.plugin.powertools.FlxBar.FILL_VERTICAL_INSIDE_OUT:this.filledBarRect.y=f(this.barHeight/2-this.filledBarRect.height/2),this.filledBarPoint.y=f(this.barHeight/2-this.filledBarRect.height/2);break;case j.plugin.powertools.FlxBar.FILL_VERTICAL_OUTSIDE_IN:this.filledBarRect.height=f(100-this.percent*this.pxPerPercent),this.filledBarPoint.y=f((this.barHeight-this.filledBarRect.height)/2)}this.canvas.copyPixels(this.filledBar,this.filledBarRect,this.filledBarPoint)}this.setPixels(this.canvas)},j.plugin.powertools.FlxBar.prototype.update=function(){this.parent&&(this.parent[this.parentVariable]!=this.value&&(this.updateValueFromParent(),this.updateBar()),this.fixedPosition===!1&&(this.x=this.parent.x+this.positionOffset.x,this.y=this.parent.y+this.positionOffset.y))},j.plugin.powertools.FlxBar.prototype.getPercent=function(){return this.value>this.max?100:Math.floor(this.value/this.range*100)},j.plugin.powertools.FlxBar.prototype.setPercent=function(a){a>=0&&100>=a&&(this.updateValue(this.pct*a),this.updateBar())},j.plugin.powertools.FlxBar.prototype.setCurrentValue=function(a){this.updateValue(a),this.updateBar()},j.plugin.powertools.FlxBar.prototype.getCurrentValue=function(){return this.value},j.system.FlxAnim=function(a,b,c,d){this.name=a,this.delay=0,c>0&&(this.delay=1/c),this.frames=b,this.looped=void 0===d?!0:d},j.system.FlxAnim.prototype.name=null,j.system.FlxAnim.prototype.delay=null,j.system.FlxAnim.prototype.frames=null,j.system.FlxAnim.prototype.looped=null,j.system.FlxAnim.prototype.destroy=function(){this.frames=null},j.system.FlxListPool=function(a){j.system.FlxListPool.parent.constructor.apply(this,[a])},b(j.system.FlxListPool,j.plugin.FlxObjectPool),j.system.FlxListPool.prototype.create=function(){return new j.system.FlxList},j.system.FlxList=function(){this.object=null,this.next=null,this.ID=f(100*Math.random())},j.system.FlxList.prototype.object=null,j.system.FlxList.prototype.next=null,j.system.FlxList.prototype.ID=null,j.system.FlxList.prototype.destroy=function(){this.object=null,null!==this.next&&this.next.destroy(),this.next=null,j.system.FlxList._pool.dispose(this)},j.system.FlxList._pool=new j.system.FlxListPool,j.system.FlxList.getNew=function(){return j.system.FlxList._pool.getNew()},j.system.FlxQuadTreePool=function(a){j.system.FlxQuadTreePool.parent.constructor.apply(this,[a])},b(j.system.FlxQuadTreePool,j.plugin.FlxObjectPool),j.system.FlxQuadTreePool.prototype.create=function(){return new j.system.FlxQuadTree},j.system.FlxQuadTree=function(){j.system.FlxQuadTree.parent.constructor.apply(this)},b(j.system.FlxQuadTree,j.FlxRect),j.system.FlxQuadTree.A_LIST=0,j.system.FlxQuadTree.B_LIST=1,j.system.FlxQuadTree.divisions=0,j.system.FlxQuadTree.prototype._canSubdivide=!1,j.system.FlxQuadTree.prototype._headA=null,j.system.FlxQuadTree.prototype._tailA=null,j.system.FlxQuadTree.prototype._headB=null,j.system.FlxQuadTree.prototype._tailB=null,j.system.FlxQuadTree._min=0,j.system.FlxQuadTree.prototype._northWestTree=null,j.system.FlxQuadTree.prototype._northEastTree=null,j.system.FlxQuadTree.prototype._southEastTree=null,j.system.FlxQuadTree.prototype._southWestTree=null,j.system.FlxQuadTree.prototype._leftEdge=0,j.system.FlxQuadTree.prototype._rightEdge=0,j.system.FlxQuadTree.prototype._topEdge=0,j.system.FlxQuadTree.prototype._bottomEdge=0,j.system.FlxQuadTree.prototype._halfWidth=0,j.system.FlxQuadTree.prototype._halfHeight=0,j.system.FlxQuadTree.prototype._midpointX=0,j.system.FlxQuadTree.prototype._midpointY=0,j.system.FlxQuadTree._object=null,j.system.FlxQuadTree._objectLeftEdge=0,j.system.FlxQuadTree._objectTopEdge=0,j.system.FlxQuadTree._objectRightEdge=0,j.system.FlxQuadTree._objectBottomEdge=0,j.system.FlxQuadTree._list=0,j.system.FlxQuadTree._useBothLists=!1,j.system.FlxQuadTree._processingCallback=null,j.system.FlxQuadTree._notifyCallback=null,j.system.FlxQuadTree._iterator=null,j.system.FlxQuadTree._objectHullX=0,j.system.FlxQuadTree._objectHullY=0,j.system.FlxQuadTree._objectHullWidth=0,j.system.FlxQuadTree._objectHullHeight=0,j.system.FlxQuadTree._checkObjectHullX=0,j.system.FlxQuadTree._checkObjectHullY=0,j.system.FlxQuadTree._checkObjectHullWidth=0,j.system.FlxQuadTree._checkObjectHullHeight=0,j.system.FlxQuadTree.prototype.deep=0,j.system.FlxQuadTree._pool=new j.system.FlxQuadTreePool,j.system.FlxQuadTree.getNew=function(a,b,c,d,e){var f=j.system.FlxQuadTree._pool.getNew();return f.init(a,b,c,d,e),f},j.system.FlxQuadTree.prototype.init=function(a,b,c,d,e){if(this.make(a,b,c,d),this._headA=this._tailA=j.system.FlxList.getNew(),this._headB=this._tailB=j.system.FlxList.getNew(),this.deep=null!==e?e.deep+1:0,null!==e){var f,g;if(null!==e._headA.object)for(f=e._headA;null!==f;)null!==this._tailA.object&&(g=this._tailA,this._tailA=j.system.FlxList.getNew(),g.next=this._tailA),this._tailA.object=f.object,f=f.next;if(null!==e._headB.object)for(f=e._headB;null!==f;)null!==this._tailB.object&&(g=this._tailB,this._tailB=j.system.FlxList.getNew(),g.next=this._tailB),this._tailB.object=f.object,f=f.next}else j.system.FlxQuadTree._min=(this.width+this.height)/(2*j.system.FlxQuadTree.divisions);this._canSubdivide=this.width>j.system.FlxQuadTree._min||this.height>j.system.FlxQuadTree._min,this._northWestTree=null,this._northEastTree=null,this._southEastTree=null,this._southWestTree=null,this._leftEdge=this.x,this._rightEdge=this.x+this.width,this._halfWidth=this.width/2,this._midpointX=this._leftEdge+this._halfWidth,this._topEdge=this.y,this._bottomEdge=this.y+this.height,this._halfHeight=this.height/2,this._midpointY=this._topEdge+this._halfHeight},j.system.FlxQuadTree.prototype.destroy=function(){null!==this._headA&&this._headA.destroy(),null!==this._tailA&&this._tailA.destroy(),null!==this._headB&&this._headB.destroy(),null!==this._tailB&&this._tailB.destroy(),this._headA=null,this._tailA=null,this._headB=null,this._tailB=null,null!==this._northWestTree&&this._northWestTree.destroy(),null!==this._northEastTree&&this._northEastTree.destroy(),null!==this._southEastTree&&this._southEastTree.destroy(),null!==this._southWestTree&&this._southWestTree.destroy(),this._northWestTree=null,this._northEastTree=null,this._southEastTree=null,this._southWestTree=null,j.system.FlxQuadTree._object=null,j.system.FlxQuadTree._processingCallback=null,j.system.FlxQuadTree._notifyCallback=null,j.system.FlxQuadTree._pool.dispose(this)},j.system.FlxQuadTree.prototype.load=function(a,b,c,d){this.add(a,j.system.FlxQuadTree.A_LIST),null!==b&&void 0!==b?(this.add(b,j.system.FlxQuadTree.B_LIST),j.system.FlxQuadTree._useBothLists=!0):j.system.FlxQuadTree._useBothLists=!1,j.system.FlxQuadTree._notifyCallback=c,j.system.FlxQuadTree._processingCallback=d},j.system.FlxQuadTree.prototype.add=function(a,b){if(j.system.FlxQuadTree._list=b,a instanceof j.FlxGroup)for(var c,d=0,e=a.members,f=a.length;f>d;)c=e[d++],null!==c&&void 0!==c&&c.exists&&(c instanceof j.FlxGroup?this.add(c,b):c instanceof j.FlxObject&&(j.system.FlxQuadTree._object=c,j.system.FlxQuadTree._object.exists&&j.system.FlxQuadTree._object.allowCollisions&&(j.system.FlxQuadTree._objectLeftEdge=j.system.FlxQuadTree._object.x,j.system.FlxQuadTree._objectTopEdge=j.system.FlxQuadTree._object.y,j.system.FlxQuadTree._objectRightEdge=j.system.FlxQuadTree._object.x+j.system.FlxQuadTree._object.width,j.system.FlxQuadTree._objectBottomEdge=j.system.FlxQuadTree._object.y+j.system.FlxQuadTree._object.height,this.addObject())));else j.system.FlxQuadTree._object=a,j.system.FlxQuadTree._object.exists&&j.system.FlxQuadTree._object.allowCollisions&&(j.system.FlxQuadTree._objectLeftEdge=j.system.FlxQuadTree._object.x,j.system.FlxQuadTree._objectTopEdge=j.system.FlxQuadTree._object.y,j.system.FlxQuadTree._objectRightEdge=j.system.FlxQuadTree._object.x+j.system.FlxQuadTree._object.width,j.system.FlxQuadTree._objectBottomEdge=j.system.FlxQuadTree._object.y+j.system.FlxQuadTree._object.height,this.addObject())},j.system.FlxQuadTree.prototype.addObject=function(){if(!this._canSubdivide||this._leftEdge>=j.system.FlxQuadTree._objectLeftEdge&&this._rightEdge<=j.system.FlxQuadTree._objectRightEdge&&this._topEdge>=j.system.FlxQuadTree._objectTopEdge&&this._bottomEdge<=j.system.FlxQuadTree._objectBottomEdge)return this.addToList(),void 0;if(j.system.FlxQuadTree._objectLeftEdge>this._leftEdge&&j.system.FlxQuadTree._objectRightEdge<this._midpointX){if(j.system.FlxQuadTree._objectTopEdge>this._topEdge&&j.system.FlxQuadTree._objectBottomEdge<this._midpointY)return null===this._northWestTree&&(this._northWestTree=j.system.FlxQuadTree.getNew(this._leftEdge,this._topEdge,this._halfWidth,this._halfHeight,this)),this._northWestTree.addObject(),void 0;if(j.system.FlxQuadTree._objectTopEdge>this._midpointY&&j.system.FlxQuadTree._objectBottomEdge<this._bottomEdge)return null===this._southWestTree&&(this._southWestTree=j.system.FlxQuadTree.getNew(this._leftEdge,this._midpointY,this._halfWidth,this._halfHeight,this)),this._southWestTree.addObject(),void 0}if(j.system.FlxQuadTree._objectLeftEdge>this._midpointX&&j.system.FlxQuadTree._objectRightEdge<this._rightEdge){if(j.system.FlxQuadTree._objectTopEdge>this._topEdge&&j.system.FlxQuadTree._objectBottomEdge<this._midpointY)return null===this._northEastTree&&(this._northEastTree=j.system.FlxQuadTree.getNew(this._midpointX,this._topEdge,this._halfWidth,this._halfHeight,this)),this._northEastTree.addObject(),void 0;if(j.system.FlxQuadTree._objectTopEdge>this._midpointY&&j.system.FlxQuadTree._objectBottomEdge<this._bottomEdge)return null===this._southEastTree&&(this._southEastTree=j.system.FlxQuadTree.getNew(this._midpointX,this._midpointY,this._halfWidth,this._halfHeight,this)),this._southEastTree.addObject(),void 0}j.system.FlxQuadTree._objectRightEdge>this._leftEdge&&j.system.FlxQuadTree._objectLeftEdge<this._midpointX&&j.system.FlxQuadTree._objectBottomEdge>this._topEdge&&j.system.FlxQuadTree._objectTopEdge<this._midpointY&&(null===this._northWestTree&&(this._northWestTree=j.system.FlxQuadTree.getNew(this._leftEdge,this._topEdge,this._halfWidth,this._halfHeight,this)),this._northWestTree.addObject()),j.system.FlxQuadTree._objectRightEdge>this._midpointX&&j.system.FlxQuadTree._objectLeftEdge<this._rightEdge&&j.system.FlxQuadTree._objectBottomEdge>this._topEdge&&j.system.FlxQuadTree._objectTopEdge<this._midpointY&&(null===this._northEastTree&&(this._northEastTree=j.system.FlxQuadTree.getNew(this._midpointX,this._topEdge,this._halfWidth,this._halfHeight,this)),this._northEastTree.addObject()),j.system.FlxQuadTree._objectRightEdge>this._midpointX&&j.system.FlxQuadTree._objectLeftEdge<this._rightEdge&&j.system.FlxQuadTree._objectBottomEdge>this._midpointY&&j.system.FlxQuadTree._objectTopEdge<this._bottomEdge&&(null===this._southEastTree&&(this._southEastTree=j.system.FlxQuadTree.getNew(this._midpointX,this._midpointY,this._halfWidth,this._halfHeight,this)),this._southEastTree.addObject()),j.system.FlxQuadTree._objectRightEdge>this._leftEdge&&j.system.FlxQuadTree._objectLeftEdge<this._midpointX&&j.system.FlxQuadTree._objectBottomEdge>this._midpointY&&j.system.FlxQuadTree._objectTopEdge<this._bottomEdge&&(null===this._southWestTree&&(this._southWestTree=j.system.FlxQuadTree.getNew(this._leftEdge,this._midpointY,this._halfWidth,this._halfHeight,this)),this._southWestTree.addObject())},j.system.FlxQuadTree.prototype.addToList=function(){var a;j.system.FlxQuadTree._list==j.system.FlxQuadTree.A_LIST?(null!==this._tailA.object&&(a=this._tailA,this._tailA=j.system.FlxList.getNew(),a.next=this._tailA),this._tailA.object=j.system.FlxQuadTree._object):(null!==this._tailB.object&&(a=this._tailB,this._tailB=j.system.FlxList.getNew(),a.next=this._tailB),this._tailB.object=j.system.FlxQuadTree._object),this._canSubdivide&&(null!==this._northWestTree&&this._northWestTree.addToList(),null!==this._northEastTree&&this._northEastTree.addToList(),null!==this._southEastTree&&this._southEastTree.addToList(),null!==this._southWestTree&&this._southWestTree.addToList())},j.system.FlxQuadTree.prototype.execute=function(){var a,b=!1;if(null!==this._headA.object)for(a=this._headA;null!==a;)j.system.FlxQuadTree._object=a.object,j.system.FlxQuadTree._iterator=j.system.FlxQuadTree._useBothLists?this._headB:a.next,j.system.FlxQuadTree._object.exists&&j.system.FlxQuadTree._object.allowCollisions>0&&null!==j.system.FlxQuadTree._iterator&&null!==j.system.FlxQuadTree._iterator.object&&j.system.FlxQuadTree._iterator.object.exists&&this.overlapNode()&&(b=!0),a=a.next;return null!==this._northWestTree&&this._northWestTree.execute()&&(b=!0),null!==this._northEastTree&&this._northEastTree.execute()&&(b=!0),null!==this._southEastTree&&this._southEastTree.execute()&&(b=!0),null!==this._southWestTree&&this._southWestTree.execute()&&(b=!0),b},j.system.FlxQuadTree.prototype.overlapNode=function(){for(var a,b=!1,c=j.system.FlxQuadTree._iterator;null!==c&&j.system.FlxQuadTree._object.exists&&!(j.system.FlxQuadTree._object.allowCollisions<=0);)a=c.object,j.system.FlxQuadTree._object===a||!a.exists||a.allowCollisions<=0?c=c.next:(j.system.FlxQuadTree._objectHullX=j.system.FlxQuadTree._object.x<j.system.FlxQuadTree._object.last.x?j.system.FlxQuadTree._object.x:j.system.FlxQuadTree._object.last.x,j.system.FlxQuadTree._objectHullY=j.system.FlxQuadTree._object.y<j.system.FlxQuadTree._object.last.y?j.system.FlxQuadTree._object.y:j.system.FlxQuadTree._object.last.y,j.system.FlxQuadTree._objectHullWidth=j.system.FlxQuadTree._object.x-j.system.FlxQuadTree._object.last.x,j.system.FlxQuadTree._objectHullWidth=j.system.FlxQuadTree._object.width+(j.system.FlxQuadTree._objectHullWidth>0?j.system.FlxQuadTree._objectHullWidth:-j.system.FlxQuadTree._objectHullWidth),j.system.FlxQuadTree._objectHullHeight=j.system.FlxQuadTree._object.y-j.system.FlxQuadTree._object.last.y,j.system.FlxQuadTree._objectHullHeight=j.system.FlxQuadTree._object.height+(j.system.FlxQuadTree._objectHullHeight>0?j.system.FlxQuadTree._objectHullHeight:-j.system.FlxQuadTree._objectHullHeight),j.system.FlxQuadTree._checkObjectHullX=a.x<a.last.x?a.x:a.last.x,j.system.FlxQuadTree._checkObjectHullY=a.y<a.last.y?a.y:a.last.y,j.system.FlxQuadTree._checkObjectHullWidth=a.x-a.last.x,j.system.FlxQuadTree._checkObjectHullWidth=a.width+(j.system.FlxQuadTree._checkObjectHullWidth>0?j.system.FlxQuadTree._checkObjectHullWidth:-j.system.FlxQuadTree._checkObjectHullWidth),j.system.FlxQuadTree._checkObjectHullHeight=a.y-a.last.y,j.system.FlxQuadTree._checkObjectHullHeight=a.height+(j.system.FlxQuadTree._checkObjectHullHeight>0?j.system.FlxQuadTree._checkObjectHullHeight:-j.system.FlxQuadTree._checkObjectHullHeight),j.system.FlxQuadTree._objectHullX+j.system.FlxQuadTree._objectHullWidth>j.system.FlxQuadTree._checkObjectHullX&&j.system.FlxQuadTree._objectHullX<j.system.FlxQuadTree._checkObjectHullX+j.system.FlxQuadTree._checkObjectHullWidth&&j.system.FlxQuadTree._objectHullY+j.system.FlxQuadTree._objectHullHeight>j.system.FlxQuadTree._checkObjectHullY&&j.system.FlxQuadTree._objectHullY<j.system.FlxQuadTree._checkObjectHullY+j.system.FlxQuadTree._checkObjectHullHeight&&((null===j.system.FlxQuadTree._processingCallback||void 0===j.system.FlxQuadTree._processingCallback||j.system.FlxQuadTree._processingCallback(j.system.FlxQuadTree._object,a))&&(b=!0),b&&null!==j.system.FlxQuadTree._notifyCallback&&void 0!==j.system.FlxQuadTree._notifyCallback&&j.system.FlxQuadTree._notifyCallback(j.system.FlxQuadTree._object,a)),c=c.next);return j.system.FlxQuadTree._iterator=c,b},j.system.FlxTile=function(a,b,c,d,e,f){j.system.FlxTile.parent.constructor.apply(this,[0,0,c,d]),this.immovable=!0,this.moves=!1,this.callback=null,this.filter=null,this.tilemap=a,this.index=b,this.visible=e,this.allowCollisions=f,this.mapIndex=0,this.offset=new j.FlxPoint},b(j.system.FlxTile,j.FlxObject),j.system.FlxTile.prototype.callback=null,j.system.FlxTile.prototype.filter=null,j.system.FlxTile.prototype.tilemap=null,j.system.FlxTile.prototype.index=null,j.system.FlxTile.prototype.mapIndex=null,j.system.FlxTile.prototype.offset=null,j.system.FlxTile.prototype.destroy=function(){this.callback=null,this.tilemap=null,this.offset=null,j.system.FlxTile.parent.destroy.apply(this)},j.system.FlxTile.prototype.centerOffsets=function(){this.offset.set(0,0)},j.system.FlxTilemapBuffer=function(a,b,c,d,e){null===e&&(e=j.FlxG.camera),this.columns=Math.ceil(e.width/a)+1,this.columns>c&&(this.columns=c),this.rows=Math.ceil(e.height/b)+1,this.rows>d&&(this.rows=d),this._pixels=new m(this.columns*a,this.rows*b,!0,0),this.width=this._pixels.width,this.height=this._pixels.height,this._flashRect=new j.FlxRect(0,0,this.width,this.height),this.dirty=!0},j.system.FlxTilemapBuffer.prototype.x=0,j.system.FlxTilemapBuffer.prototype.y=0,j.system.FlxTilemapBuffer.prototype.width=0,j.system.FlxTilemapBuffer.prototype.height=0,j.system.FlxTilemapBuffer.prototype.dirty=!1,j.system.FlxTilemapBuffer.prototype.rows=0,j.system.FlxTilemapBuffer.prototype.columns=0,j.system.FlxTilemapBuffer.prototype._pixels=null,j.system.FlxTilemapBuffer.prototype._flashRect=null,j.system.FlxTilemapBuffer.prototype.destroy=function(){this._pixels=null},j.system.FlxTilemapBuffer.prototype.fill=function(a){a=void 0===a?0:a,this._pixels.fillRect(this._flashRect,a)},j.system.FlxTilemapBuffer.prototype.getPixels=function(){return this._pixels},j.system.FlxTilemapBuffer.prototype.draw=function(a,b){a.buffer.copyPixels(this._pixels,this._flashRect,b,null,null,!0)},j.system.FlxReplay=function(){this.seed=0,this.frame=0,this.frameCount=0,this.finished=!1,this._frames=null,this._capacity=0,this._marker=0},j.system.FlxReplay.prototype.seed=0,j.system.FlxReplay.prototype.frame=0,j.system.FlxReplay.prototype.frameCount=0,j.system.FlxReplay.prototype.finished=!1,j.system.FlxReplay.prototype._frames=null,j.system.FlxReplay.prototype._capacity=0,j.system.FlxReplay.prototype._marker=0,j.system.FlxReplay.prototype.destroy=function(){if(null!==this._frames){for(var a=this.frameCount-1;a>=0;)this._frames[a--].destroy();this._frames=null}},j.system.FlxReplay.prototype.create=function(a){this.destroy(),this.init(),this.seed=a,this.rewind()},j.system.FlxReplay.prototype.load=function(a){this.init();var b=a.split("\n");this.seed=Number(b[0]);for(var c,d=1,e=b.length;e>d;)c=b[d++],c.length>3&&(this._frames[this.frameCount++]=(new j.system.replay.FrameRecord).load(c),this.frameCount>=this._capacity&&(this._capacity*=2,this._frames.length=this._capacity));this.rewind()},j.system.FlxReplay.prototype.init=function(){this._capacity=100,this._frames=new Array(this._capacity),this.frameCount=0},j.system.FlxReplay.prototype.save=function(){if(this.frameCount<=0)return null;for(var a=this.seed+"\n",b=0;b<this.frameCount;)a+=this._frames[b++].save()+"\n";return a},j.system.FlxReplay.prototype.recordFrame=function(){var a=j.FlxG.keys.record(),b=j.FlxG.mouse.record();return null===a&&null===b?(this.frame++,void 0):(this._frames[this.frameCount++]=(new j.system.replay.FrameRecord).create(this.frame++,a,b),this.frameCount>=this._capacity&&(this._capacity*=2,this._frames.length=this._capacity),void 0)},j.system.FlxReplay.prototype.playNextFrame=function(){if(j.FlxG.resetInput(),this._marker>=this.frameCount)return this.finished=!0,void 0;if(this._frames[this._marker].frame==this.frame++){var a=this._frames[this._marker++];null!==a.keys&&j.FlxG.keys.playback(a.keys),null!==a.mouse&&j.FlxG.mouse.playback(a.mouse)}},j.system.FlxReplay.prototype.rewind=function(){this._marker=0,this.frame=0,this.finished=!1},j.system.replay.FrameRecord=function(){this.frame=0,this.keys=null,this.mouse=null},j.system.replay.FrameRecord.prototype.frame=0,j.system.replay.FrameRecord.prototype.keys=null,j.system.replay.FrameRecord.prototype.mouse=null,j.system.replay.FrameRecord.prototype.create=function(a,b,c){return this.frame=a,this.keys=b,this.mouse=c,this},j.system.replay.FrameRecord.prototype.destroy=function(){this.keys=null,this.mouse=null},j.system.replay.FrameRecord.prototype.save=function(){var a=this.frame+"k";if(null!==this.keys)for(var b,c=0,d=this.keys.length;d>c;)c>0&&(a+=","),b=this.keys[c++],a+=b.code+":"+b.value;return a+="m",null!==this.mouse&&(a+=this.mouse.x+","+this.mouse.y+","+this.mouse.button+","+this.mouse.wheel),a},j.system.replay.FrameRecord.prototype.load=function(a){var b,c,d=a.split("k");this.frame=Number(d[0]),d=d[1].split("m");var e=d[0],f=d[1];if(e.length>0){d=e.split(",");var g;for(b=0,c=d.length;c>b;)g=d[b++].split(":"),2==g.length&&(null===this.keys&&(this.keys=[]),this.keys.push({code:Number(g[0]),value:Number(g[1])}))
}return f.length>0&&(d=f.split(","),d.length>=4&&(this.mouse=new j.system.replay.MouseRecord(Number(d[0]),Number(d[1]),Number(d[2]),Number(d[3])))),this},j.system.replay.MouseRecord=function(a,b,c,d){this.x=a,this.y=b,this.button=c,this.wheel=d},j.system.replay.MouseRecord.prototype.x=0,j.system.replay.MouseRecord.prototype.y=0,j.system.replay.MouseRecord.prototype.button=0,j.system.replay.MouseRecord.prototype.wheel=0,j.system.atlas.FlxAssetManager=function(){if(void 0!==j.system.atlas.FlxAssetManager._instance)throw new Error("FlxAssetManager: Call getInstance()");this._atlasMap={},this._keyMap={},this._items=0},j.system.atlas.FlxAssetManager._instance=new j.system.atlas.FlxAssetManager,j.system.atlas.FlxAssetManager.prototype._atlasMap=null,j.system.atlas.FlxAssetManager.prototype._keyMap=null,j.system.atlas.FlxAssetManager.prototype._items=0,j.system.atlas.FlxAssetManager.prototype.loadAtlas=function(a,b,c){var d=new j.system.atlas.FlxAtlasInfo;d.loadAtlas(a,b),this._atlasMap[c]=d,this._keyMap[this._items]=c,this._items++,console.log("New atlas loaded: "+c)},j.system.atlas.FlxAssetManager.prototype.getRegion=function(a){var b=a.split(":")[0],c=a.split(":")[1];if(null!==this._atlasMap[b]&&void 0!==this._atlasMap[b]){var d=this._atlasMap[b];if(null===d||void 0===d)return j.FlxG.log("The atlasInfo ("+a+") couldn't be found","FlxAssetManager"),null;var e=d.getRegion(c);if(null===e||void 0===e)return j.FlxG.log("The bitmapData ("+a+") couldn't be found","FlxAssetManager"),null;var f=new m(e.width,e.height,!0,0);return f.draw(e),f}return j.FlxG.log("The path ("+b+") couldn't be found","FlxAssetManager"),null},j.system.atlas.FlxAssetManager.prototype.getNumAtlas=function(){return this._items},j.system.atlas.FlxAssetManager.prototype.allLoaded=function(){for(var a=!0,b=0;b<this._items;b++)a=a&&this._atlasMap[this._keyMap[b]].loaded();return a},j.system.atlas.FlxAssetManager.prototype.getEmbedMap=function(a){var b=new j.plugin.tmx.TiledMap(JSON.parse(a));return b},j.system.atlas.FlxAssetManager.getInstance=function(){return j.system.atlas.FlxAssetManager._instance},j.system.atlas.FlxAtlasInfo=function(){this._regionMap={},this._regionBitmap={},this._items=0,this.bitmapData=null},j.system.atlas.FlxAtlasInfo.prototype._regionMap=null,j.system.atlas.FlxAtlasInfo.prototype._regionBitmap=null,j.system.atlas.FlxAtlasInfo.prototype._items=0,j.system.atlas.FlxAtlasInfo.prototype.bitmapData=null,j.system.atlas.FlxAtlasInfo.prototype.loadAtlas=function(a,b){var c=a,d=c.split("\n");this._loaded=!0;var e=m.fromImage(b);return void 0===e||null===e?(j.FlxG.log("Error: While loading an atlas image.","FlxSystemAsset"),void 0):(this.bitmapData=e,this.parsePackFile(d),void 0)},j.system.atlas.FlxAtlasInfo.prototype.parsePackFile=function(a){for(var b=null,c=null,d=!1,e=4;!d;){b=a[e];var f=a[e+2],g=a[e+3];f=f.replace(" xy: ","").replace(" ","");var h=Number(f.split(",")[0]),i=Number(f.split(",")[1]),k=new j.FlxPoint(h,i);g=g.replace(" size: ","").replace(" ","");var l=Number(g.split(",")[0]),m=Number(g.split(",")[1]),n=new j.FlxPoint(l,m);c=new j.system.atlas.FlxRegionInfo(b,k,n),this._regionMap[b]=c,this._items++,j.FlxG.debug&&console.log("New region added "+b),e+=7,a.length<e+6&&(d=!0)}},j.system.atlas.FlxAtlasInfo.prototype.getNumRegions=function(){return this._items},j.system.atlas.FlxAtlasInfo.prototype.getRegion=function(a){if(this._error||null===this.bitmapData)return null;if(this.checkRegionCache(a))return this._regionBitmap[a];var b=this._regionMap[a];if(null!==b){var c=new m(b.size.x,b.size.y,!0,0);return c.copyPixels(this.bitmapData,new j.FlxRect(b.position.x,b.position.y,b.size.x,b.size.y),new j.FlxPoint,null,null,!1,!0),this._regionBitmap[a]=c,c}throw new Error("Error loading region: "+a)},j.system.atlas.FlxAtlasInfo.prototype.checkRegionCache=function(a){return void 0!==this._regionBitmap[a]&&null!==this._regionBitmap[a]},j.system.atlas.FlxRegionInfo=function(a,b,c){this.elemName=a,this.position=b,this.size=c},j.system.atlas.FlxRegionInfo.prototype.elemName=null,j.system.atlas.FlxRegionInfo.prototype.size=null,j.system.atlas.FlxRegionInfo.prototype.position=null,j.system.input.Input=function(){this._lookup={},this._map=new Array(this._total)},j.system.input.Input.prototype._lookup=null,j.system.input.Input.prototype._map=null,j.system.input.Input.prototype._total=256,j.system.input.Input.prototype.update=function(){for(var a=0;a<this._total;){var b=this._map[a++];void 0!==b&&(-1==b.last&&-1==b.current?b.current=0:2==b.last&&2==b.current&&(b.current=1),b.last=b.current)}},j.system.input.Input.prototype.reset=function(){for(var a=0;a<this._total;){var b=this._map[a++];void 0!==b&&(this[b.name]=!1,b.current=0,b.last=0)}},j.system.input.Input.prototype.pressed=function(a){return this[a]},j.system.input.Input.prototype.justPressed=function(a){return 2==this._map[this._lookup[a]].current},j.system.input.Input.prototype.justReleased=function(a){return-1==this._map[this._lookup[a]].current},j.system.input.Input.prototype.record=function(){for(var a=null,b=0;b<this._total;){var c=this._map[b++];void 0!==c&&0!==c.current&&(void 0===a&&(a=[]),a.push({code:b-1,value:c.current}))}return a},j.system.input.Input.prototype.playback=function(a){for(var b,c,d=0,e=a.length;e>d;)b=a[d++],c=this._map[b.code],c.current=b.value,b.value>0&&(this[c.name]=!0)},j.system.input.Input.prototype.getKeyCode=function(a){return this._lookup[a]},j.system.input.Input.prototype.any=function(){for(var a=0;a<this._total;){var b=this._map[a++];if(null!==b&&b.current>0)return!0}return!1},j.system.input.Input.prototype.addKey=function(a,b){this._lookup[a]=b,this._map[b]={name:a,current:0,last:0}},j.system.input.Input.prototype.destroy=function(){this._lookup=null,this._map=null},j.system.input.Mouse=function(){j.system.input.Mouse.parent.constructor.apply(this),this.screenX=0,this.screenY=0,this._lastWheel=this.wheel=0,this._point=new j.FlxPoint,this._pointers=[],this._pointers.push(new j.system.input.Mouse.Pointer),this.activePointers=0,this.offset=new j.FlxPoint,this.scale=new j.FlxPoint(1,1)},b(j.system.input.Mouse,j.FlxPoint),j.system.input.Mouse.prototype.wheel=0,j.system.input.Mouse.prototype.screenX=0,j.system.input.Mouse.prototype.screenY=0,j.system.input.Mouse.prototype._lastWheel=0,j.system.input.Mouse.prototype._point=null,j.system.input.Mouse.prototype._pointers=null,j.system.input.Mouse.prototype.activePointers=0,j.system.input.Mouse.prototype._cursor=null,j.system.input.Mouse.prototype.offset=null,j.system.input.Mouse.prototype.scale=null,j.system.input.Mouse.prototype.destroy=function(){this._point=null,this._pointers.length=0,this._pointers=null,this.offset=null},j.system.input.Mouse.prototype.show=function(a,b,c,d){b=void 0===b?1:b,c=void 0===c?0:c,d=void 0===d?0:d,null!==a&&void 0!==a?this.load(a,b,c,d):null===this._cursor&&this.load()},j.system.input.Mouse.prototype.hide=function(){j.FlxG.getStage().style.cursor="",null!==this._cursor&&(this._cursor.visible=!1)},j.system.input.Mouse.prototype.getVisible=function(){return null===this._cursor||j.FlxG.device.isMobile?!0:this._cursor.visible},j.system.input.Mouse.prototype.load=function(a,b,c,d){return b=void 0===b?1:b,c=void 0===c?0:c,d=void 0===d?0:d,null===a?(j.FlxG.getStage().style.cursor="",a=j.data.FlxSystemAsset.ImgDefault,void 0):(this._cursor=new j.FlxSprite,this._cursor.loadGraphic(a),this._cursor.offset.x=c,this._cursor.offset.y=d,this._cursor.scale.x=this._cursor.scale.x=b,j.FlxG.getStage().style.cursor="none",void 0)},j.system.input.Mouse.prototype.unload=function(){null!==this._cursor&&(this._cursor.visible?this.load():this._cursor=null)},j.system.input.Mouse.prototype.update=function(){for(var a,b=0,c=this._pointers.length;c>b;)a=this._pointers[b],-1==a.last&&-1==a.current?a.current=0:2==a.last&&2==a.current&&(a.current=1),a.last=a.current,++b;this.updateCursor()},j.system.input.Mouse.prototype.updateCursor=function(){var a=this._pointers[0];null!==this._cursor&&(this._cursor.x=a.screenPosition.x,this._cursor.y=a.screenPosition.y);var b=j.FlxG.camera;void 0!==b&&null!==b&&(this.screenX=f((a.screenPosition.x-b.x)/(b.getZoom()*b._screenScaleFactorX)),this.screenY=f((a.screenPosition.y-b.y)/(b.getZoom()*b._screenScaleFactorY)),this.x=this.screenX+b.scroll.x,this.y=this.screenY+b.scroll.y)},j.system.input.Mouse.prototype.getWorldPosition=function(a,b,c){return c=void 0===c?0:c,(null===a||void 0===a)&&(a=j.FlxG.camera),(null===b||void 0===b)&&(b=new j.FlxPoint),this.getScreenPosition(a,this._point,c),b.x=this._point.x+a.scroll.x,b.y=this._point.y+a.scroll.y,b},j.system.input.Mouse.prototype.getScreenPosition=function(a,b,c){if(c=void 0===c?0:c,(null===a||void 0===a)&&(a=j.FlxG.camera),(null===b||void 0===b)&&(b=new j.FlxPoint),c>=this._pointers.length)return b;var d=this._pointers[c];return b.x=(d.screenPosition.x-a.x)/(a.getZoom()*a._screenScaleFactorX),b.y=(d.screenPosition.y-a.y)/(a.getZoom()*a._screenScaleFactorY),b},j.system.input.Mouse.prototype.reset=function(){this._pointers.length=0,this._pointers.push(new j.system.input.Mouse.Pointer)},j.system.input.Mouse.prototype.pressed=function(a){return a=void 0===a?0:a,a>=this._pointers.length?!1:this._pointers[a].current>0},j.system.input.Mouse.prototype.justPressed=function(a){return a=void 0===a?0:a,a>=this._pointers.length?!1:2==this._pointers[a].current},j.system.input.Mouse.prototype.justReleased=function(a){return a=void 0===a?0:a,a>=this._pointers.length?!1:-1==this._pointers[a].current},j.system.input.Mouse.prototype.handleMouseDown=function(a){var b,c=0;if(a.changedTouches)for(var d=0;d<a.changedTouches.length;d++){c=a.changedTouches[d].identifier;var e=a.changedTouches[d];c>=this._pointers.length?(b=new j.system.input.Mouse.Pointer,this._pointers.push(b)):b=this._pointers[c],b.current=b.current>0?1:2,b.screenPosition.x=(e.pageX-this.offset.x)*this.scale.x,b.screenPosition.y=(e.pageY-this.offset.y)*this.scale.y,this.activePointers++}else c>=this._pointers.length?(b=new j.system.input.Mouse.Pointer,this._pointers.push(b)):b=this._pointers[c],b.current=b.current>0?1:2,b.screenPosition.x=(a.pageX-this.offset.x)*this.scale.x,b.screenPosition.y=(a.pageY-this.offset.y)*this.scale.y,this.activePointers++},j.system.input.Mouse.prototype.handleMouseUp=function(a){var b,c=0;if(a.changedTouches)for(var d=0;d<a.changedTouches.length;d++){c=a.changedTouches[d].identifier;var e=a.changedTouches[d];c>=this._pointers.length?(b=new j.system.input.Mouse.Pointer,this._pointers.push(b)):b=this._pointers[c],b.current=b.current>0?-1:0,b.screenPosition.x=(e.pageX-this.offset.x)*this.scale.x,b.screenPosition.y=(e.pageY-this.offset.y)*this.scale.y,this.activePointers--}else c>=this._pointers.length?(b=new j.system.input.Mouse.Pointer,this._pointers.push(b)):b=this._pointers[c],b.current=b.current>0?-1:0,b.screenPosition.x=(a.pageX-this.offset.x)*this.scale.x,b.screenPosition.y=(a.pageY-this.offset.y)*this.scale.y,this.activePointers--},j.system.input.Mouse.prototype.handleMouseWheel=function(a){this.wheel=a.delta},j.system.input.Mouse.prototype.handleMouseMove=function(a){var b,c=0;if(a.changedTouches)for(var d=0;d<a.changedTouches.length;d++){c=a.changedTouches[d].identifier;var e=a.changedTouches[d];c>=this._pointers.length?(b=new j.system.input.Mouse.Pointer,this._pointers.push(b)):b=this._pointers[c],b.screenPosition.x=(e.pageX-this.offset.x)*this.scale.x,b.screenPosition.y=(e.pageY-this.offset.y)*this.scale.y}else c>=this._pointers.length?(b=new j.system.input.Mouse.Pointer,this._pointers.push(b)):b=this._pointers[c],b.screenPosition.x=(a.pageX-this.offset.x)*this.scale.x,b.screenPosition.y=(a.pageY-this.offset.y)*this.scale.y},j.system.input.Mouse.prototype.record=function(){var a=this._pointers[0];return a.lastX==a.screenPosition.x&&a.lastY==a.screenPosition.y&&0===a.current&&this._lastWheel==this.wheel?null:(a.lastX=a.screenPosition.x,a.lastY=a.screenPosition.y,this._lastWheel=this.wheel,new j.system.replay.MouseRecord(a.lastX,a.lastY,a.current,this._lastWheel))},j.system.input.Mouse.prototype.playback=function(a){var b=this._pointers[0];b.current=a.button,this.wheel=a.wheel,b.screenPosition.x=a.x,b.screenPosition.y=a.y,this.updateCursor()},j.system.input.Mouse.prototype.setOffset=function(a){this.offset.copyFrom(a)},j.system.input.Mouse.Pointer=function(){this.current=0,this.last=0,this.screenPosition=new j.FlxPoint,this.lastX=0,this.lastY=0},j.system.input.Keyboard=function(){j.system.input.Keyboard.parent.constructor.apply(this);var a;for(a=65;90>=a;)this.addKey(String.fromCharCode(a),a++);for(a=48,this.addKey("ZERO",a++),this.addKey("ONE",a++),this.addKey("TWO",a++),this.addKey("THREE",a++),this.addKey("FOUR",a++),this.addKey("FIVE",a++),this.addKey("SIX",a++),this.addKey("SEVEN",a++),this.addKey("EIGHT",a++),this.addKey("NINE",a++),a=96,this.addKey("NUMPADZERO",a++),this.addKey("NUMPADONE",a++),this.addKey("NUMPADTWO",a++),this.addKey("NUMPADTHREE",a++),this.addKey("NUMPADFOUR",a++),this.addKey("NUMPADFIVE",a++),this.addKey("NUMPADSIX",a++),this.addKey("NUMPADSEVEN",a++),this.addKey("NUMPADEIGHT",a++),this.addKey("NUMPADNINE",a++),this.addKey("PAGEUP",33),this.addKey("PAGEDOWN",34),this.addKey("HOME",36),this.addKey("END",35),this.addKey("INSERT",45),a=1;12>=a;)this.addKey("F"+a,111+a++);this.addKey("ESCAPE",27),this.addKey("MINUS",189),this.addKey("NUMPADMINUS",109),this.addKey("PLUS",187),this.addKey("NUMPADPLUS",107),this.addKey("DELETE",46),this.addKey("BACKSPACE",8),this.addKey("LBRACKET",219),this.addKey("RBRACKET",221),this.addKey("BACKSLASH",220),this.addKey("CAPSLOCK",20),this.addKey("SEMICOLON",186),this.addKey("QUOTE",222),this.addKey("ENTER",13),this.addKey("SHIFT",16),this.addKey("COMMA",188),this.addKey("PERIOD",190),this.addKey("NUMPADPERIOD",110),this.addKey("SLASH",191),this.addKey("NUMPADSLASH",191),this.addKey("CONTROL",17),this.addKey("ALT",18),this.addKey("SPACE",32),this.addKey("UP",38),this.addKey("DOWN",40),this.addKey("LEFT",37),this.addKey("RIGHT",39),this.addKey("TAB",9)},b(j.system.input.Keyboard,j.system.input.Input),j.system.input.Keyboard.prototype.ESCAPE=!1,j.system.input.Keyboard.prototype.F1=!1,j.system.input.Keyboard.prototype.F2=!1,j.system.input.Keyboard.prototype.F3=!1,j.system.input.Keyboard.prototype.F4=!1,j.system.input.Keyboard.prototype.F5=!1,j.system.input.Keyboard.prototype.F6=!1,j.system.input.Keyboard.prototype.F7=!1,j.system.input.Keyboard.prototype.F8=!1,j.system.input.Keyboard.prototype.F9=!1,j.system.input.Keyboard.prototype.F10=!1,j.system.input.Keyboard.prototype.F11=!1,j.system.input.Keyboard.prototype.F12=!1,j.system.input.Keyboard.prototype.ONE=!1,j.system.input.Keyboard.prototype.TWO=!1,j.system.input.Keyboard.prototype.THREE=!1,j.system.input.Keyboard.prototype.FOUR=!1,j.system.input.Keyboard.prototype.FIVE=!1,j.system.input.Keyboard.prototype.SIX=!1,j.system.input.Keyboard.prototype.SEVEN=!1,j.system.input.Keyboard.prototype.EIGHT=!1,j.system.input.Keyboard.prototype.NINE=!1,j.system.input.Keyboard.prototype.ZERO=!1,j.system.input.Keyboard.prototype.NUMPADONE=!1,j.system.input.Keyboard.prototype.NUMPADTWO=!1,j.system.input.Keyboard.prototype.NUMPADTHREE=!1,j.system.input.Keyboard.prototype.NUMPADFOUR=!1,j.system.input.Keyboard.prototype.NUMPADFIVE=!1,j.system.input.Keyboard.prototype.NUMPADSIX=!1,j.system.input.Keyboard.prototype.NUMPADSEVEN=!1,j.system.input.Keyboard.prototype.NUMPADEIGHT=!1,j.system.input.Keyboard.prototype.NUMPADNINE=!1,j.system.input.Keyboard.prototype.NUMPADZERO=!1,j.system.input.Keyboard.prototype.PAGEUP=!1,j.system.input.Keyboard.prototype.PAGEDOWN=!1,j.system.input.Keyboard.prototype.HOME=!1,j.system.input.Keyboard.prototype.END=!1,j.system.input.Keyboard.prototype.INSERT=!1,j.system.input.Keyboard.prototype.MINUS=!1,j.system.input.Keyboard.prototype.NUMPADMINUS=!1,j.system.input.Keyboard.prototype.PLUS=!1,j.system.input.Keyboard.prototype.NUMPADPLUS=!1,j.system.input.Keyboard.prototype.DELETE=!1,j.system.input.Keyboard.prototype.BACKSPACE=!1,j.system.input.Keyboard.prototype.TAB=!1,j.system.input.Keyboard.prototype.Q=!1,j.system.input.Keyboard.prototype.W=!1,j.system.input.Keyboard.prototype.E=!1,j.system.input.Keyboard.prototype.R=!1,j.system.input.Keyboard.prototype.T=!1,j.system.input.Keyboard.prototype.Y=!1,j.system.input.Keyboard.prototype.U=!1,j.system.input.Keyboard.prototype.I=!1,j.system.input.Keyboard.prototype.O=!1,j.system.input.Keyboard.prototype.P=!1,j.system.input.Keyboard.prototype.LBRACKET=!1,j.system.input.Keyboard.prototype.RBRACKET=!1,j.system.input.Keyboard.prototype.BACKSLASH=!1,j.system.input.Keyboard.prototype.CAPSLOCK=!1,j.system.input.Keyboard.prototype.A=!1,j.system.input.Keyboard.prototype.S=!1,j.system.input.Keyboard.prototype.D=!1,j.system.input.Keyboard.prototype.F=!1,j.system.input.Keyboard.prototype.G=!1,j.system.input.Keyboard.prototype.H=!1,j.system.input.Keyboard.prototype.J=!1,j.system.input.Keyboard.prototype.K=!1,j.system.input.Keyboard.prototype.L=!1,j.system.input.Keyboard.prototype.SEMICOLON=!1,j.system.input.Keyboard.prototype.QUOTE=!1,j.system.input.Keyboard.prototype.ENTER=!1,j.system.input.Keyboard.prototype.SHIFT=!1,j.system.input.Keyboard.prototype.Z=!1,j.system.input.Keyboard.prototype.X=!1,j.system.input.Keyboard.prototype.C=!1,j.system.input.Keyboard.prototype.V=!1,j.system.input.Keyboard.prototype.B=!1,j.system.input.Keyboard.prototype.N=!1,j.system.input.Keyboard.prototype.M=!1,j.system.input.Keyboard.prototype.COMMA=!1,j.system.input.Keyboard.prototype.PERIOD=!1,j.system.input.Keyboard.prototype.NUMPADPERIOD=!1,j.system.input.Keyboard.prototype.SLASH=!1,j.system.input.Keyboard.prototype.NUMPADSLASH=!1,j.system.input.Keyboard.prototype.CONTROL=!1,j.system.input.Keyboard.prototype.ALT=!1,j.system.input.Keyboard.prototype.SPACE=!1,j.system.input.Keyboard.prototype.UP=!1,j.system.input.Keyboard.prototype.DOWN=!1,j.system.input.Keyboard.prototype.LEFT=!1,j.system.input.Keyboard.prototype.RIGHT=!1,j.system.input.Keyboard.prototype.handleKeyDown=function(a){var b=this._map[a.keyCode];null!==b&&void 0!==b&&(b.current=b.current>0?1:2,this[b.name]=!0)},j.system.input.Keyboard.prototype.handleKeyUp=function(a){var b=this._map[a.keyCode];null!==b&&void 0!==b&&(b.current=b.current>0?-1:0,this[b.name]=!1)},j.system.input.pads.FlxAnalog=function(a,b,c,d,e){a=void 0===a?0:a,b=void 0===b?0:b,c=void 0===c?0:c,d=void 0===d?0:d,e=void 0===e?.25:e,j.system.input.pads.FlxAnalog.parent.constructor.apply(this),this.x=a,this.y=b,this._radius=c,this._dragRadius=d,this._ease=e,this._terminated=!1,j.system.input.pads.FlxAnalog._analogs.push(this),this.status=j.system.input.pads.FlxAnalog.NORMAL,this._direction=0,this._amount=0,this.acceleration=new j.FlxPoint,this._point=new j.FlxPoint,this.createBase(),this.createThumb(),this.createZone(),this.createDragZone()},b(j.system.input.pads.FlxAnalog,j.FlxGroup),j.system.input.pads.FlxAnalog.NORMAL=0,j.system.input.pads.FlxAnalog.HIGHLIGHT=1,j.system.input.pads.FlxAnalog.PRESSED=2,j.system.input.pads.FlxAnalog._analogs=[],j.system.input.pads.FlxAnalog.prototype.status=0,j.system.input.pads.FlxAnalog.prototype.x=0,j.system.input.pads.FlxAnalog.prototype.y=0,j.system.input.pads.FlxAnalog.prototype._point=null,j.system.input.pads.FlxAnalog.prototype.onUp=null,j.system.input.pads.FlxAnalog.prototype.onDown=null,j.system.input.pads.FlxAnalog.prototype.onOver=null,j.system.input.pads.FlxAnalog.prototype.onPressed=null,j.system.input.pads.FlxAnalog.prototype._zone=null,j.system.input.pads.FlxAnalog.prototype.bg=null,j.system.input.pads.FlxAnalog.prototype.thumb=null,j.system.input.pads.FlxAnalog.prototype._radius=0,j.system.input.pads.FlxAnalog.prototype._direction=0,j.system.input.pads.FlxAnalog.prototype._amount=0,j.system.input.pads.FlxAnalog.prototype._dragZone=null,j.system.input.pads.FlxAnalog.prototype._dragRadius=0,j.system.input.pads.FlxAnalog.prototype.acceleration=null,j.system.input.pads.FlxAnalog.prototype._ease=0,j.system.input.pads.FlxAnalog.prototype._terminated=!1,j.system.input.pads.FlxAnalog.prototype.createBase=function(){this.bg=new j.FlxSprite(this.x,this.y).loadGraphic(j.data.FlxSystemAsset.ImgControlBase),this.bg.x+=.5*-this.bg.width,this.bg.y+=.5*-this.bg.height,this.bg.scrollFactor.x=this.bg.scrollFactor.y=0,this.bg.setSolid(!1),this.bg.ignoreDrawDebug=!0,this.add(this.bg)},j.system.input.pads.FlxAnalog.prototype.createThumb=function(){this.thumb=new j.FlxSprite(this.x,this.y).loadGraphic(j.data.FlxSystemAsset.ImgControlKnob),this.thumb.scrollFactor.x=this.thumb.scrollFactor.y=0,this.thumb.setSolid(!1),this.thumb.ignoreDrawDebug=!0,this.add(this.thumb)},j.system.input.pads.FlxAnalog.prototype.createZone=function(){0===this._radius&&(this._radius=.5*this.bg.width),this._zone=new j.system.input.pads.FlxAnalog.Circle(this.x,this.y,this._radius)},j.system.input.pads.FlxAnalog.prototype.createDragZone=function(){0===this._dragRadius&&(this._dragRadius=1.25*this.bg.width),this._dragZone=new j.system.input.pads.FlxAnalog.Circle(this.x,this.y,this._dragRadius)},j.system.input.pads.FlxAnalog.prototype.destroy=function(){j.system.input.pads.FlxAnalog.parent.destroy.apply(this),j.system.input.pads.FlxAnalog._analogs.splice(j.system.input.pads.FlxAnalog._analogs.indexOf(this),1),this.onUp=this.onDown=this.onOver=this.onPressed=null,this.acceleration=null,this._point=null,this.thumb=null,this._zone=null,this._dragZone=null,this.bg=null,this.thumb=null},j.system.input.pads.FlxAnalog.prototype.update=function(){for(var a=!0,b=0,c=j.FlxG.mouse.activePointers+1;c>b;){if(!this.updateAnalog(b)){a=!1;break}++b}this.thumb.x=this.x+Math.cos(this._direction)*this._amount*this._radius-.5*this.thumb.width,this.thumb.y=this.y+Math.sin(this._direction)*this._amount*this._radius-.5*this.thumb.height,a&&(this.status=j.system.input.pads.FlxAnalog.NORMAL),j.system.input.pads.FlxAnalog.parent.update.apply(this)},j.system.input.pads.FlxAnalog.prototype.updateAnalog=function(a){var b=!0;if(j.FlxG.mouse.getScreenPosition(j.FlxG.camera,this._point,a),this._zone.contains(this._point.x,this._point.y)||this._dragZone.contains(this._point.x,this._point.y)&&this.status==j.system.input.pads.FlxAnalog.PRESSED){if(b=!1,j.FlxG.mouse.pressed(a)){if(this.status=j.system.input.pads.FlxAnalog.PRESSED,j.FlxG.mouse.justPressed(a)&&null!==this.onDown&&this.onDown(),this.status==j.system.input.pads.FlxAnalog.PRESSED){null!==this.onPressed&&this.onPressed();var c=this._point.x-this.x,d=this._point.y-this.y,e=Math.sqrt(c*c+d*d);1>e&&(e=0),this._direction=Math.atan2(d,c),this._amount=Math.min(this._radius,e)/this._radius,this.acceleration.x=Math.cos(this._direction)*this._amount*this._radius,this.acceleration.y=Math.sin(this._direction)*this._amount*this._radius}}else j.FlxG.mouse.justReleased(a)&&this.status==j.system.input.pads.FlxAnalog.PRESSED&&(this.status=j.system.input.pads.FlxAnalog.HIGHLIGHT,null!==this.onUp&&this.onUp(),this.acceleration.x=0,this.acceleration.y=0);this.status==j.system.input.pads.FlxAnalog.NORMAL&&(this.status=j.system.input.pads.FlxAnalog.HIGHLIGHT,null!==this.onOver&&this.onOver())}return this.status!=j.system.input.pads.FlxAnalog.HIGHLIGHT&&this.status!=j.system.input.pads.FlxAnalog.NORMAL||0===this._amount||(this._amount*=this._ease,Math.abs(this._amount)<.1&&(this._amount=0)),b},j.system.input.pads.FlxAnalog.prototype.getAngle=function(){return Math.atan2(this.acceleration.y,this.acceleration.x)*j.plugin.FlxMath.RADTODEG},j.system.input.pads.FlxAnalog.prototype.pressed=function(a){return void 0!==a||null!==a?!1:this.status==j.system.input.pads.FlxAnalog.PRESSED},j.system.input.pads.FlxAnalog.prototype.justPressed=function(){return j.FlxG.mouse.justPressed()&&this.status==j.system.input.pads.FlxAnalog.PRESSED},j.system.input.pads.FlxAnalog.prototype.justReleased=function(){return j.FlxG.mouse.justReleased()&&this.status==j.system.input.pads.FlxAnalog.HIGHLIGHT},j.system.input.pads.FlxAnalog.prototype.setAlpha=function(a){for(var b=0;b<this.members.length;b++)this.members[b].setAlpha(a)},j.system.input.pads.FlxAnalog.prototype.show=function(){this.visible=!0,this.active=!0},j.system.input.pads.FlxAnalog.prototype.hide=function(){this.visible=!1,this.active=!1},j.system.input.pads.FlxAnalog.prototype.terminate=function(){this._terminated=!0},j.system.input.pads.FlxAnalog.prototype.isTerminated=function(){return this._terminated},j.system.input.pads.FlxAnalog.prototype.justTouching=function(){return!1},j.system.input.pads.FlxAnalog.prototype.justRemoved=function(){return!1},j.system.input.pads.FlxAnalog.Circle=function(a,b,c){this.x=a,this.y=b,this.radius=c},j.system.input.pads.FlxAnalog.Circle.prototype.x=0,j.system.input.pads.FlxAnalog.Circle.prototype.y=0,j.system.input.pads.FlxAnalog.Circle.prototype.radius=0,j.system.input.pads.FlxAnalog.Circle.prototype.contains=function(a,b){return a=this.x-a,b=this.y-b,a*a+b*b<=this.radius*this.radius},j.system.input.pads.FlxGamePad=function(){j.system.input.pads.FlxGamePad.parent.constructor.apply(this)},b(j.system.input.pads.FlxGamePad,j.FlxGroup),j.system.input.pads.FlxGamePad.EXTENDED_GAMEPAD=1,j.system.input.pads.FlxGamePad.CONTROLLER_GAMEPAD=2,j.system.input.pads.FlxGamePad.DIGITAL_GAMEPAD=3,j.system.input.pads.FlxGamePad.ANALOG_GAMEPAD=4,j.system.input.pads.FlxGamePad.prototype.x=0,j.system.input.pads.FlxGamePad.prototype.y=0,j.system.input.pads.FlxGamePad.prototype._map=null,j.system.input.pads.FlxGamePad.prototype._terminated=!1,j.system.input.pads.FlxGamePad.prototype.pressed=function(){},j.system.input.pads.FlxGamePad.prototype.justTouching=function(){},j.system.input.pads.FlxGamePad.prototype.justRemoved=function(){},j.system.input.pads.FlxGamePad.prototype.show=function(){},j.system.input.pads.FlxGamePad.prototype.hide=function(){},j.system.input.pads.FlxGamePad.prototype.terminate=function(){},j.system.input.pads.FlxGamePad.prototype.isTerminated=function(){},j.system.input.pads.FlxGamePad.prototype.setAlpha=function(){},j.system.input.pads.FlxControllerPad=function(a,b){var c=.75,d=.75;this.x=a,this.y=b,this.x=0>c?a+(128-128*c)/2:a-(128-128*c)/2,this.y=0>d?b-(128-128*d)/2:b+(128-128*d)/2,this._terminated=!1,this._map={};var e=new j.system.input.pads.FlxRectangleButton(3);e.loadGraphic(j.data.FlxSystemAsset.gpad[0]),e.setSolid(!1),e.setAlpha(.75),e.immovable=!0,e.scale=new j.FlxPoint(c,d),e.x=this.x+40,e.y=this.y,e.addRectangle(e.x-e.width,e.y-120-e.height,3*e.width,120+2*e.height),this.add(e),this.addButton("UP",e);var f=new j.system.input.pads.FlxRectangleButton(3);f.loadGraphic(j.data.FlxSystemAsset.gpad[2]),f.setSolid(!1),f.setAlpha(.75),f.immovable=!0,f.scale=new j.FlxPoint(c,d),f.x=this.x,f.y=this.y+40,f.addRectangle(f.x-f.width,f.y-f.height,2*f.width,3*f.height),this.add(f),this.addButton("LEFT",f);var g=new j.system.input.pads.FlxRectangleButton(3);g.loadGraphic(j.data.FlxSystemAsset.gpad[3]),g.setSolid(!1),g.setAlpha(.75),g.immovable=!0,g.scale=new j.FlxPoint(c,d),g.x=this.x+80,g.y=this.y+40,g.addRectangle(g.x,g.y-g.height,3*g.width,3*g.height),this.add(g),this.addButton("RIGHT",g);var h=new j.system.input.pads.FlxRectangleButton(3);h.loadGraphic(j.data.FlxSystemAsset.gpad[1]),h.setSolid(!1),h.setAlpha(.75),h.immovable=!0,h.scale=new j.FlxPoint(c,d),h.x=this.x+40,h.y=this.y+80,h.addRectangle(h.x-h.width,h.y,3*h.width,3*h.height),this.add(h),this.addButton("DOWN",h)},b(j.system.input.pads.FlxControllerPad,j.system.input.pads.FlxGamePad),j.system.input.pads.FlxControllerPad.prototype.destroy=function(){null!==this._map&&(this._map.length=0),this._map=null,j.system.input.pads.FlxControllerPad.parent.destroy.apply(this)},j.system.input.pads.FlxControllerPad.prototype.update=function(){!this.visible||j.FlxG.getPause()||this._terminated||j.system.input.pads.FlxControllerPad.parent.update.apply(this)},j.system.input.pads.FlxControllerPad.prototype.pressed=function(a){return this._map[a]?this._map[a].status==j.system.input.pads.FlxPadButton.STATUS_PRESSED:!1},j.system.input.pads.FlxControllerPad.prototype.justTouching=function(a){return this._map[a]?this._map[a].status==j.FlxButton.PRESSED:!1},j.system.input.pads.FlxControllerPad.prototype.justRemoved=function(a){return this._map[a]?this._map[a].status==j.FlxButton.PRESSED:!1},j.system.input.pads.FlxControllerPad.prototype.addButton=function(a,b){this._map[a]=b},j.system.input.pads.FlxControllerPad.prototype.show=function(){this.visible=!0},j.system.input.pads.FlxControllerPad.prototype.hide=function(){this.visible=!1},j.system.input.pads.FlxControllerPad.prototype.terminate=function(){this._terminated=!0,delete this._map},j.system.input.pads.FlxControllerPad.prototype.isTerminated=function(){return this._terminated},j.system.input.pads.FlxControllerPad.prototype.setAlpha=function(a){for(var b=0;b<this.members.length;b++)this.members[b].setAlpha(a)},j.system.input.pads.FlxDigitalPad=function(a,b){this.x=a,this.y=b,this._terminated=!1,this._map={};var c=new j.FlxSprite(a,b);c.loadGraphic(j.data.FlxSystemAsset.dpad[4]),c.setSolid(!1),c.immovable=!0;var d=new j.system.input.pads.FlxPadButton;d.loadGraphic(j.data.FlxSystemAsset.dpad[0]),d.setSolid(!1),d.immovable=!0,d.x=a+c.width/2-d.width/2,d.y=b-d.height,d.setAlpha(.75),this.add(d),this.addButton("UP",d);var e=new j.system.input.pads.FlxPadButton;e.loadGraphic(j.data.FlxSystemAsset.dpad[3]),e.setSolid(!1),e.immovable=!0,e.x=a+c.width-e.width,e.y=b-c.height/2+e.width-e.height,e.setAlpha(.75),this.add(e),this.addButton("RIGHT",e);var f=new j.system.input.pads.FlxPadButton;f.loadGraphic(j.data.FlxSystemAsset.dpad[1]),f.setSolid(!1),f.immovable=!0,f.x=a+c.width/2-f.width/2,f.y=b-c.height,f.setAlpha(.75),this.add(f),this.addButton("DOWN",f);var g=new j.system.input.pads.FlxPadButton;g.loadGraphic(j.data.FlxSystemAsset.dpad[2]),g.setSolid(!1),g.immovable=!0,g.x=a,g.y=b-c.height/2+g.width-g.height,g.setAlpha(.75),this.add(g),this.addButton("LEFT",g)},b(j.system.input.pads.FlxDigitalPad,j.system.input.pads.FlxGamePad),j.system.input.pads.FlxDigitalPad.prototype.update=function(){!this.visible||j.FlxG.getPause()||this._terminated||j.system.input.pads.FlxDigitalPad.parent.update.apply(this)},j.system.input.pads.FlxDigitalPad.prototype.pressed=function(a){return this._map[a]?this._map[a].status==j.system.input.pads.FlxPadButton.STATUS_PRESSED:!1},j.system.input.pads.FlxDigitalPad.prototype.justTouching=function(a){return this._map[a]?this._map[a].status==j.system.input.pads.FlxPadButton.STATUS_JUST_PRESSED:!1},j.system.input.pads.FlxDigitalPad.prototype.justRemoved=function(a){return this._map[a]?this._map[a].status==j.system.input.pads.FlxPadButton.STATUS_JUST_RELEASED:!1},j.system.input.pads.FlxDigitalPad.prototype.addButton=function(a,b){this._map[a]=b},j.system.input.pads.FlxDigitalPad.prototype.show=function(){this.visible=!0;for(var a=0;a<this.members.length;a++)this.members[a].active=!0},j.system.input.pads.FlxDigitalPad.prototype.hide=function(){this.visible=!1;for(var a=0;a<this.members.length;a++)this.members[a].active=!1},j.system.input.pads.FlxDigitalPad.prototype.terminate=function(){this._terminated=!0;for(var a=0;a<this.members.length;a++)this.members[a].destroy();delete this._map},j.system.input.pads.FlxDigitalPad.prototype.isTerminated=function(){return this._terminated},j.system.input.pads.FlxDigitalPad.prototype.setAlpha=function(a){for(var b=0;b<this.members.length;b++)this.members[b].setAlpha(a)},j.system.input.pads.FlxPadButton=function(a,b){j.system.input.pads.FlxPadButton.parent.constructor.apply(this,[a,b]),this.loadGraphic(j.data.FlxSystemAsset.ImgDefaultButton,!1,!1,80,20),this.status=j.system.input.pads.FlxPadButton.STATUS_NORMAL},b(j.system.input.pads.FlxPadButton,j.FlxSprite),j.system.input.pads.FlxPadButton.STATUS_NORMAL=0,j.system.input.pads.FlxPadButton.STATUS_JUST_PRESSED=1,j.system.input.pads.FlxPadButton.STATUS_PRESSED=2,j.system.input.pads.FlxPadButton.STATUS_JUST_RELEASED=3,j.system.input.pads.FlxPadButton.STATUS_OVER=4,j.system.input.pads.FlxPadButton.prototype.status=0,j.system.input.pads.FlxPadButton.prototype._pointerId=0,j.system.input.pads.FlxPadButton.prototype.update=function(){null===this.cameras&&(this.cameras=j.FlxG.cameras);for(var a,b=0,c=this.cameras.length,d=0,e=j.FlxG.mouse.activePointers+1,f=!0;c>b;)for(a=this.cameras[b++];e>d;)j.FlxG.mouse.getWorldPosition(a,this._point,d),this.overlapsPoint(this._point,!0,a)&&(f=!1,j.FlxG.mouse.pressed(d)&&(this.status=j.system.input.pads.FlxPadButton.STATUS_PRESSED,j.FlxG.mouse.justPressed(d)&&(this.status=j.system.input.pads.FlxPadButton.STATUS_JUST_PRESSED),this._pointerId=d)),++d;
this.status==j.system.input.pads.FlxPadButton.STATUS_JUST_RELEASED&&(this.status=j.system.input.pads.FlxPadButton.STATUS_NORMAL),(f||!f&&!j.FlxG.mouse.pressed(this._pointerId))&&this.status==j.system.input.pads.FlxPadButton.STATUS_PRESSED&&(this.status=j.FlxG.mouse.justReleased(this._pointerId)?j.system.input.pads.FlxPadButton.STATUS_JUST_RELEASED:j.system.input.pads.FlxPadButton.STATUS_NORMAL),this.status==j.system.input.pads.FlxPadButton.STATUS_JUST_PRESSED||this.status==j.system.input.pads.FlxPadButton.STATUS_JUST_RELEASED?this.setFrame(j.system.input.pads.FlxPadButton.STATUS_NORMAL):this.setFrame(this.status)},j.system.input.pads.FlxVirtualPad=function(a,b){switch(this.dPad=new j.FlxGroup,this.actions=new j.FlxGroup,a){case j.system.input.pads.FlxVirtualPad.DPAD_FULL:this.dPad.add(this.add(this.buttonUp=this.createButton(35,j.FlxG.height-99,29,36,j.data.FlxSystemAsset.ImgButtonUp))),this.dPad.add(this.add(this.buttonLeft=this.createButton(0,j.FlxG.height-64,35,29,j.data.FlxSystemAsset.ImgButtonLeft))),this.dPad.add(this.add(this.buttonRight=this.createButton(64,j.FlxG.height-64,35,29,j.data.FlxSystemAsset.ImgButtonRight))),this.dPad.add(this.add(this.buttonDown=this.createButton(35,j.FlxG.height-39,29,39,j.data.FlxSystemAsset.ImgButtonDown))),this.dPad.add(this.add(this.createCenter(this.buttonLeft.x+this.buttonLeft.width,j.FlxG.height-65,29,27,j.data.FlxSystemAsset.ImgCenter)));break;case j.system.input.pads.FlxVirtualPad.UP_DOWN:this.dPad.add(this.add(this.buttonUp=this.createButton(35,j.FlxG.height-101,29,36,j.data.FlxSystemAsset.ImgButtonUp))),this.dPad.add(this.add(this.buttonDown=this.createButton(35,j.FlxG.height-39,29,39,j.data.FlxSystemAsset.ImgButtonDown))),this.dPad.add(this.add(this.createCenter(35,j.FlxG.height-66,29,27,j.data.FlxSystemAsset.ImgCenter)));break;case j.system.input.pads.FlxVirtualPad.LEFT_RIGHT:this.dPad.add(this.add(this.buttonLeft=this.createButton(0,j.FlxG.height-44,35,29,j.data.FlxSystemAsset.ImgButtonLeft))),this.dPad.add(this.add(this.buttonRight=this.createButton(64,j.FlxG.height-44,35,29,j.data.FlxSystemAsset.ImgButtonRight))),this.dPad.add(this.add(this.createCenter(this.buttonLeft.x+this.buttonLeft.width,j.FlxG.height-45,29,27,j.data.FlxSystemAsset.ImgCenter)));break;case j.system.input.pads.FlxVirtualPad.UP_LEFT_RIGHT:this.dPad.add(this.add(this.buttonUp=this.createButton(35,j.FlxG.height-79,29,36,j.data.FlxSystemAsset.ImgButtonUp))),this.dPad.add(this.add(this.buttonLeft=this.createButton(0,j.FlxG.height-44,35,29,j.data.FlxSystemAsset.ImgButtonLeft))),this.dPad.add(this.add(this.buttonRight=this.createButton(64,j.FlxG.height-44,35,29,j.data.FlxSystemAsset.ImgButtonRight))),this.dPad.add(this.add(this.createCenter(this.buttonLeft.x+this.buttonLeft.width,j.FlxG.height-45,29,27,j.data.FlxSystemAsset.ImgCenter)))}switch(b){case j.system.input.pads.FlxVirtualPad.A:this.actions.add(this.add(this.buttonA=this.createButton(j.FlxG.width-50,j.FlxG.height-68,37,37,j.data.FlxSystemAsset.ImgButtonA)));break;case j.system.input.pads.FlxVirtualPad.A_B:this.actions.add(this.add(this.buttonB=this.createButton(j.FlxG.width-68,j.FlxG.height-41,37,37,j.data.FlxSystemAsset.ImgButtonB))),this.actions.add(this.add(this.buttonA=this.createButton(j.FlxG.width-37,j.FlxG.height-72,37,37,j.data.FlxSystemAsset.ImgButtonA)));break;case j.system.input.pads.FlxVirtualPad.A_B_C:this.actions.add(this.add(this.buttonA=this.createButton(j.FlxG.width-99,j.FlxG.height-41,37,37,j.data.FlxSystemAsset.ImgButtonA))),this.actions.add(this.add(this.buttonB=this.createButton(j.FlxG.width-68,j.FlxG.height-62,37,37,j.data.FlxSystemAsset.ImgButtonB))),this.actions.add(this.add(this.buttonC=this.createButton(j.FlxG.width-37,j.FlxG.height-83,37,37,j.data.FlxSystemAsset.ImgButtonC)));break;case j.system.input.pads.FlxVirtualPad.A_B_X_Y:this.actions.add(this.add(this.buttonY=this.createButton(j.FlxG.width-99,j.FlxG.height-72,37,37,j.data.FlxSystemAsset.ImgButtonY))),this.actions.add(this.add(this.buttonX=this.createButton(j.FlxG.width-68,j.FlxG.height-103,37,37,j.data.FlxSystemAsset.ImgButtonX))),this.actions.add(this.add(this.buttonB=this.createButton(j.FlxG.width-68,j.FlxG.height-41,37,37,j.data.FlxSystemAsset.ImgButtonB))),this.actions.add(this.add(this.buttonA=this.createButton(j.FlxG.width-37,j.FlxG.height-72,37,37,j.data.FlxSystemAsset.ImgButtonA)));break;case j.system.input.pads.FlxVirtualPad.B:this.actions.add(this.add(this.buttonB=this.createButton(j.FlxG.width-50,j.FlxG.height-68,37,37,j.data.FlxSystemAsset.ImgButtonB)))}},b(j.system.input.pads.FlxVirtualPad,j.FlxGroup),j.system.input.pads.FlxVirtualPad.DPAD_NONE=0,j.system.input.pads.FlxVirtualPad.DPAD_FULL=1,j.system.input.pads.FlxVirtualPad.UP_DOWN=2,j.system.input.pads.FlxVirtualPad.LEFT_RIGHT=3,j.system.input.pads.FlxVirtualPad.UP_LEFT_RIGHT=4,j.system.input.pads.FlxVirtualPad.ACTION_NONE=0,j.system.input.pads.FlxVirtualPad.A=1,j.system.input.pads.FlxVirtualPad.A_B=2,j.system.input.pads.FlxVirtualPad.A_B_C=3,j.system.input.pads.FlxVirtualPad.A_B_X_Y=4,j.system.input.pads.FlxVirtualPad.B=5,j.system.input.pads.FlxVirtualPad.prototype.buttonA=null,j.system.input.pads.FlxVirtualPad.prototype.buttonB=null,j.system.input.pads.FlxVirtualPad.prototype.buttonC=null,j.system.input.pads.FlxVirtualPad.prototype.buttonY=null,j.system.input.pads.FlxVirtualPad.prototype.buttonX=null,j.system.input.pads.FlxVirtualPad.prototype.buttonLeft=null,j.system.input.pads.FlxVirtualPad.prototype.buttonUp=null,j.system.input.pads.FlxVirtualPad.prototype.buttonRight=null,j.system.input.pads.FlxVirtualPad.prototype.buttonDown=null,j.system.input.pads.FlxVirtualPad.prototype.dPad=null,j.system.input.pads.FlxVirtualPad.prototype.actions=null,j.system.input.pads.FlxVirtualPad.prototype.destroy=function(){j.system.input.pads.FlxVirtualPad.parent.destroy.apply(this),null!==this.dPad&&this.dPad.destroy(),null!==this.actions&&this.actions.destroy(),this.dPad=this.actions=null,this.buttonA=this.buttonB=this.buttonC=this.buttonY=this.buttonX=null,this.buttonLeft=this.buttonUp=this.buttonDown=this.buttonRight=null},j.system.input.pads.FlxVirtualPad.prototype.createButton=function(a,b,c,d,e){var f=new j.system.input.pads.FlxPadButton(a,b);return f.loadGraphic(e,!0,!1,c,d),f.setSolid(!1),f.immovable=!0,f.ignoreDrawDebug=!0,f.scrollFactor.x=f.scrollFactor.y=0,f},j.system.input.pads.FlxVirtualPad.prototype.createCenter=function(a,b,c,d,e){var f=new j.FlxSprite(a,b).loadGraphic(e,!1,!1,c,d);return f.setSolid(!1),f.immovable=!0,f.ignoreDrawDebug=!0,f.scrollFactor.x=f.scrollFactor.y=0,f},j.system.input.pads.FlxVirtualPad.prototype.setAlpha=function(a){for(var b=0;b<this.members.length;b++)this.members[b].setAlpha(a)},j.system.input.pads.FlxVirtualPad.prototype.setDPadPosition=function(a,b){for(var c=0;c<this.dPad.members.length;c++)this.dPad.members[c].x+=a,this.dPad.members[c].y+=b},j.system.input.pads.FlxVirtualPad.prototype.setDPadPositionX=function(a){for(var b=0;b<this.dPad.members.length;b++)this.dPad.members[b].x+=a},j.system.input.pads.FlxVirtualPad.prototype.setDPadPositionY=function(a){for(var b=0;b<this.dPad.members.length;b++)this.dPad.members[b].y+=a},j.system.input.pads.FlxVirtualPad.prototype.setActionPosition=function(a,b){for(var c=0;c<this.actions.members.length;c++)this.actions.members[c].x+=a,this.actions.members[c].y+=b},j.system.input.pads.FlxVirtualPad.prototype.setActionPositionX=function(a){for(var b=0;b<this.actions.members.length;b++)this.actions.members[b].x+=a},j.system.input.pads.FlxVirtualPad.prototype.setActionPositionY=function(a){for(var b=0;b<this.actions.members.length;b++)this.actions.members[b].y+=a},j.system.input.pads.FlxVirtualPad.prototype.show=function(){for(var a=0;a<this.members.length;a++)this.members[a].visible=!0},j.system.input.pads.FlxVirtualPad.prototype.hide=function(){for(var a=0;a<this.members.length;a++)this.members[a].visible=!1},j.system.input.pads.FlxVirtualPad2=function(a,b){switch(this.dPad=new j.FlxGroup,this.actions=new j.FlxGroup,a){case j.system.input.pads.FlxVirtualPad2.DPAD_FULL:this.dPad.add(this.add(this.buttonUp=this.createButton(35,j.FlxG.height-99,29,36,j.data.FlxSystemAsset.ImgButtonUp))),this.dPad.add(this.add(this.buttonLeft=this.createButton(0,j.FlxG.height-64,35,29,j.data.FlxSystemAsset.ImgButtonLeft))),this.dPad.add(this.add(this.buttonRight=this.createButton(64,j.FlxG.height-64,35,29,j.data.FlxSystemAsset.ImgButtonRight))),this.dPad.add(this.add(this.buttonDown=this.createButton(35,j.FlxG.height-39,29,39,j.data.FlxSystemAsset.ImgButtonDown))),this.dPad.add(this.add(this.createCenter(this.buttonLeft.x+this.buttonLeft.width,j.FlxG.height-65,29,27,j.data.FlxSystemAsset.ImgCenter))),this.buttonUp.addRectangle(this.buttonUp.x-this.buttonUp.width,this.buttonUp.y-120-this.buttonUp.height,3*this.buttonUp.width,120+2*this.buttonUp.height),this.buttonLeft.addRectangle(this.buttonLeft.x-this.buttonLeft.width,this.buttonLeft.y-this.buttonLeft.height,2*this.buttonLeft.width,3*this.buttonLeft.height),this.buttonRight.addRectangle(this.buttonRight.x,this.buttonRight.y-this.buttonRight.height,3*this.buttonRight.width,3*this.buttonRight.height),this.buttonDown.addRectangle(this.buttonDown.x-this.buttonDown.width,this.buttonDown.y,3*this.buttonDown.width,3*this.buttonDown.height);break;case j.system.input.pads.FlxVirtualPad2.UP_DOWN:this.dPad.add(this.add(this.buttonUp=this.createButton(35,j.FlxG.height-101,29,36,j.data.FlxSystemAsset.ImgButtonUp))),this.dPad.add(this.add(this.buttonDown=this.createButton(35,j.FlxG.height-39,29,39,j.data.FlxSystemAsset.ImgButtonDown))),this.dPad.add(this.add(this.createCenter(35,j.FlxG.height-66,29,27,j.data.FlxSystemAsset.ImgCenter))),this.buttonUp.addRectangle(this.buttonUp.x-this.buttonUp.width,this.buttonUp.y-120-this.buttonUp.height,3*this.buttonUp.width,120+2*this.buttonUp.height),this.buttonDown.addRectangle(this.buttonDown.x-this.buttonDown.width,this.buttonDown.y,3*this.buttonDown.width,3*this.buttonDown.height);break;case j.system.input.pads.FlxVirtualPad2.LEFT_RIGHT:this.dPad.add(this.add(this.buttonLeft=this.createButton(0,j.FlxG.height-44,35,29,j.data.FlxSystemAsset.ImgButtonLeft))),this.dPad.add(this.add(this.buttonRight=this.createButton(64,j.FlxG.height-44,35,29,j.data.FlxSystemAsset.ImgButtonRight))),this.dPad.add(this.add(this.createCenter(this.buttonLeft.x+this.buttonLeft.width,j.FlxG.height-45,29,27,j.data.FlxSystemAsset.ImgCenter))),this.buttonLeft.addRectangle(this.buttonLeft.x-this.buttonLeft.width,this.buttonLeft.y-this.buttonLeft.height,2*this.buttonLeft.width,3*this.buttonLeft.height),this.buttonRight.addRectangle(this.buttonRight.x,this.buttonRight.y-this.buttonRight.height,3*this.buttonRight.width,3*this.buttonRight.height);break;case j.system.input.pads.FlxVirtualPad2.UP_LEFT_RIGHT:this.dPad.add(this.add(this.buttonUp=this.createButton(35,j.FlxG.height-79,29,36,j.data.FlxSystemAsset.ImgButtonUp))),this.dPad.add(this.add(this.buttonLeft=this.createButton(0,j.FlxG.height-44,35,29,j.data.FlxSystemAsset.ImgButtonLeft))),this.dPad.add(this.add(this.buttonRight=this.createButton(64,j.FlxG.height-44,35,29,j.data.FlxSystemAsset.ImgButtonRight))),this.dPad.add(this.add(this.createCenter(this.buttonLeft.x+this.buttonLeft.width,j.FlxG.height-45,29,27,j.data.FlxSystemAsset.ImgCenter))),this.buttonUp.addRectangle(this.buttonUp.x-this.buttonUp.width,this.buttonUp.y-120-this.buttonUp.height,3*this.buttonUp.width,120+2*this.buttonUp.height),this.buttonLeft.addRectangle(this.buttonLeft.x-this.buttonLeft.width,this.buttonLeft.y-this.buttonLeft.height,2*this.buttonLeft.width,3*this.buttonLeft.height),this.buttonRight.addRectangle(this.buttonRight.x,this.buttonRight.y-this.buttonRight.height,3*this.buttonRight.width,3*this.buttonRight.height)}switch(b){case j.system.input.pads.FlxVirtualPad2.A:this.actions.add(this.add(this.buttonA=this.createButton(j.FlxG.width-50,j.FlxG.height-68,37,37,j.data.FlxSystemAsset.ImgButtonA)));break;case j.system.input.pads.FlxVirtualPad2.A_B:this.actions.add(this.add(this.buttonB=this.createButton(j.FlxG.width-68,j.FlxG.height-41,37,37,j.data.FlxSystemAsset.ImgButtonB))),this.actions.add(this.add(this.buttonA=this.createButton(j.FlxG.width-37,j.FlxG.height-72,37,37,j.data.FlxSystemAsset.ImgButtonA)));break;case j.system.input.pads.FlxVirtualPad2.A_B_C:this.actions.add(this.add(this.buttonA=this.createButton(j.FlxG.width-99,j.FlxG.height-41,37,37,j.data.FlxSystemAsset.ImgButtonA))),this.actions.add(this.add(this.buttonB=this.createButton(j.FlxG.width-68,j.FlxG.height-62,37,37,j.data.FlxSystemAsset.ImgButtonB))),this.actions.add(this.add(this.buttonC=this.createButton(j.FlxG.width-37,j.FlxG.height-83,37,37,j.data.FlxSystemAsset.ImgButtonC)));break;case j.system.input.pads.FlxVirtualPad2.A_B_X_Y:this.actions.add(this.add(this.buttonY=this.createButton(j.FlxG.width-99,j.FlxG.height-72,37,37,j.data.FlxSystemAsset.ImgButtonY))),this.actions.add(this.add(this.buttonX=this.createButton(j.FlxG.width-68,j.FlxG.height-103,37,37,j.data.FlxSystemAsset.ImgButtonX))),this.actions.add(this.add(this.buttonB=this.createButton(j.FlxG.width-68,j.FlxG.height-41,37,37,j.data.FlxSystemAsset.ImgButtonB))),this.actions.add(this.add(this.buttonA=this.createButton(j.FlxG.width-37,j.FlxG.height-72,37,37,j.data.FlxSystemAsset.ImgButtonA)));break;case j.system.input.pads.FlxVirtualPad2.B:this.actions.add(this.add(this.buttonB=this.createButton(j.FlxG.width-50,j.FlxG.height-68,37,37,j.data.FlxSystemAsset.ImgButtonB))),this.buttonB.addRectangle(this.buttonB.x-this.buttonB.width,this.buttonB.y-this.buttonB.height,3*this.buttonB.width,3*this.buttonB.height)}},b(j.system.input.pads.FlxVirtualPad2,j.FlxGroup),j.system.input.pads.FlxVirtualPad2.DPAD_NONE=0,j.system.input.pads.FlxVirtualPad2.DPAD_FULL=1,j.system.input.pads.FlxVirtualPad2.UP_DOWN=2,j.system.input.pads.FlxVirtualPad2.LEFT_RIGHT=3,j.system.input.pads.FlxVirtualPad2.UP_LEFT_RIGHT=4,j.system.input.pads.FlxVirtualPad2.ACTION_NONE=0,j.system.input.pads.FlxVirtualPad2.A=1,j.system.input.pads.FlxVirtualPad2.A_B=2,j.system.input.pads.FlxVirtualPad2.A_B_C=3,j.system.input.pads.FlxVirtualPad2.A_B_X_Y=4,j.system.input.pads.FlxVirtualPad2.B=5,j.system.input.pads.FlxVirtualPad2.prototype.buttonA=null,j.system.input.pads.FlxVirtualPad2.prototype.buttonB=null,j.system.input.pads.FlxVirtualPad2.prototype.buttonC=null,j.system.input.pads.FlxVirtualPad2.prototype.buttonY=null,j.system.input.pads.FlxVirtualPad2.prototype.buttonX=null,j.system.input.pads.FlxVirtualPad2.prototype.buttonLeft=null,j.system.input.pads.FlxVirtualPad2.prototype.buttonUp=null,j.system.input.pads.FlxVirtualPad2.prototype.buttonRight=null,j.system.input.pads.FlxVirtualPad2.prototype.buttonDown=null,j.system.input.pads.FlxVirtualPad2.prototype.dPad=null,j.system.input.pads.FlxVirtualPad2.prototype.actions=null,j.system.input.pads.FlxVirtualPad2.prototype.destroy=function(){j.system.input.pads.FlxVirtualPad2.parent.destroy.apply(this),null!==this.dPad&&this.dPad.destroy(),null!==this.actions&&this.actions.destroy(),this.dPad=this.actions=null,this.buttonA=this.buttonB=this.buttonC=this.buttonY=this.buttonX=null,this.buttonLeft=this.buttonUp=this.buttonDown=this.buttonRight=null},j.system.input.pads.FlxVirtualPad2.prototype.createButton=function(a,b,c,d,e){var f=new j.plugin.FlxRectangleButton(a,b);return f.loadGraphic(e,!0,!1,c,d),f.setSolid(!1),f.immovable=!0,f.ignoreDrawDebug=!0,f.scrollFactor.x=f.scrollFactor.y=0,f},j.system.input.pads.FlxVirtualPad2.prototype.createCenter=function(a,b,c,d,e){var f=new j.FlxSprite(a,b).loadGraphic(e,!1,!1,c,d);return f.setSolid(!1),f.immovable=!0,f.ignoreDrawDebug=!0,f.scrollFactor.x=f.scrollFactor.y=0,f},j.system.input.pads.FlxVirtualPad2.prototype.setAlpha=function(a){for(var b=0;b<this.members.length;b++)this.members[b].setAlpha(a)},j.system.input.pads.FlxVirtualPad2.prototype.setDPadPosition=function(a,b){for(var c=0;c<this.dPad.members.length;c++)this.dPad.members[c].x+=a,this.dPad.members[c].y+=b},j.system.input.pads.FlxVirtualPad2.prototype.setDPadPositionX=function(a){for(var b=0;b<this.dPad.members.length;b++)this.dPad.members[b].x+=a},j.system.input.pads.FlxVirtualPad2.prototype.setDPadPositionY=function(a){for(var b=0;b<this.dPad.members.length;b++)this.dPad.members[b].y+=a},j.system.input.pads.FlxVirtualPad2.prototype.setActionPosition=function(a,b){for(var c=0;c<this.actions.members.length;c++)this.actions.members[c].x+=a,this.actions.members[c].y+=b},j.system.input.pads.FlxVirtualPad2.prototype.setActionPositionX=function(a){for(var b=0;b<this.actions.members.length;b++)this.actions.members[b].x+=a},j.system.input.pads.FlxVirtualPad2.prototype.setActionPositionY=function(a){for(var b=0;b<this.actions.members.length;b++)this.actions.members[b].y+=a},j.system.input.pads.FlxVirtualPad2.prototype.show=function(){for(var a=0;a<this.members.length;a++)this.members[a].visible=!0},j.system.input.pads.FlxVirtualPad2.prototype.hide=function(){for(var a=0;a<this.members.length;a++)this.members[a].visible=!1},j.plugin.tmx.TiledMap=function(a){this.version=a.version?a.version:"unknown",this.orientation=a.orientation?a.orientation:"orthogonal",this.width=a.width,this.height=a.height,this.tileWidth=a.tilewidth,this.tileHeight=a.tileheight;var b=null,c=0;if(a.properties)for(c=0;c<a.properties.length;c++)b=a.properties[c],this.properties=this.properties?this.properties.extend(b):new j.plugin.tmx.MapProperties(b);var d=0;if(a.tilesets)for(c=0;c<a.tilesets.length;c++)b=a.tilesets[c],this.tileSets[b.name]=new j.plugin.tmx.MapTileSet(b,this);if(a.layers)for(c=0;c<a.layers.length;c++)b=a.layers[c],b.data?(this.tileLayers[b.name]=new j.plugin.tmx.MapLayer(b,this),this.layers[d++]=this.tileLayers[b.name]):b.objects&&(this.objectGroups[b.name]=new j.plugin.tmx.MapObjects(b,this),this.layers[d++]=this.objectGroups[b.name])},j.plugin.tmx.TiledMap.prototype.version=null,j.plugin.tmx.TiledMap.prototype.orientation=null,j.plugin.tmx.TiledMap.prototype.width=0,j.plugin.tmx.TiledMap.prototype.height=0,j.plugin.tmx.TiledMap.prototype.tileWidth=0,j.plugin.tmx.TiledMap.prototype.tileHeight=0,j.plugin.tmx.TiledMap.prototype.properties=null,j.plugin.tmx.TiledMap.prototype.tileLayers={},j.plugin.tmx.TiledMap.prototype.tileSets={},j.plugin.tmx.TiledMap.prototype.objectGroups={},j.plugin.tmx.TiledMap.prototype.layers=[],j.plugin.tmx.TiledMap.prototype.getTileSet=function(a){return this.tileSets[a]},j.plugin.tmx.TiledMap.prototype.getLayer=function(a){return this.tileLayers[a]},j.plugin.tmx.TiledMap.prototype.getObjectGroup=function(a){return this.objectGroups[a]},j.plugin.tmx.TiledMap.prototype.getLayers=function(){return this.layers},j.plugin.tmx.TiledMap.prototype.getGidOwner=function(a){for(var b=0;b<this.tileSets.length;b++){var c=this.tileSets[b];if(c.hasGid(a))return c}return null},j.plugin.tmx.MapTileSet=function(a,b){if(this.firstGID=a.firstgid,this.imageSource=a.image.source,this.map=b,this.name=a.name,this.tileWidth=a.tilewidth,this.tileHeight=a.tileheight,this.spacing=a.spacing,this.margin=a.margin,a.tileproperties)for(var c in a.tileproperties)this._tileProps[Number.toInteger(c)]=new j.plugin.tmx.MapProperties(a.tileproperties[c])},j.plugin.tmx.MapTileSet.prototype._tileProps=[],j.plugin.tmx.MapTileSet.prototype._image=null,j.plugin.tmx.MapTileSet.prototype.firstGID=0,j.plugin.tmx.MapTileSet.prototype.map=null,j.plugin.tmx.MapTileSet.prototype.name=null,j.plugin.tmx.MapTileSet.prototype.tileWidth=0,j.plugin.tmx.MapTileSet.prototype.tileHeight=0,j.plugin.tmx.MapTileSet.prototype.spacing=0,j.plugin.tmx.MapTileSet.prototype.margin=0,j.plugin.tmx.MapTileSet.prototype.imageSource=null,j.plugin.tmx.MapTileSet.prototype.numTiles=16777215,j.plugin.tmx.MapTileSet.prototype.numRows=1,j.plugin.tmx.MapTileSet.prototype.numCols=1,j.plugin.tmx.MapTileSet.prototype.getImage=function(){return this._image},j.plugin.tmx.MapTileSet.prototype.setImage=function(a){this._image=a,this.numCols=Math.floor(a.width/this.tileWidth),this.numRows=Math.floor(a.height/this.tileHeight),this.numTiles=this.numRows*this.numCols},j.plugin.tmx.MapTileSet.prototype.hasGid=function(a){return a>=this.firstGID&&a<this.firstGID+this.numTiles},j.plugin.tmx.MapTileSet.prototype.fromGid=function(a){return a-this.firstGID},j.plugin.tmx.MapTileSet.prototype.toGid=function(a){return this.firstGID+a},j.plugin.tmx.MapTileSet.prototype.getPropertiesByGid=function(a){return this._tileProps[a-this.firstGID]},j.plugin.tmx.MapTileSet.prototype.getProperties=function(a){return this._tileProps[a]},j.plugin.tmx.MapTileSet.prototype.getRect=function(a){return new j.FlxRect(a%this.numCols*this.tileWidth,a/this.numCols*this.tileHeight)},j.plugin.tmx.MapLayer=function(a,b){if(this.map=b,this.name=a.name,this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.visible=!a.visible||0!==a.visible,this.opacity=a.opacity,a.properties&&(this.properties=new j.plugin.tmx.MapProperties(a.properties)),this.tileGIDs=[],a.data)for(var c=this.width,d=-1,e=0;e<a.data.length;e++){var f=a.data[e];++c>=this.width&&(this.tileGIDs[++d]=[],c=0),this.tileGIDs[d].push(f)}},j.plugin.tmx.MapLayer.prototype.map=null,j.plugin.tmx.MapLayer.prototype.name=null,j.plugin.tmx.MapLayer.prototype.x=0,j.plugin.tmx.MapLayer.prototype.y=0,j.plugin.tmx.MapLayer.prototype.width=0,j.plugin.tmx.MapLayer.prototype.height=0,j.plugin.tmx.MapLayer.prototype.opacity=0,j.plugin.tmx.MapLayer.prototype.visible=!1,j.plugin.tmx.MapLayer.prototype.tileGIDs=null,j.plugin.tmx.MapLayer.prototype.properties=null,j.plugin.tmx.MapLayer.prototype.toCsv=function(a){var b=16777215,c=0;a&&(c=a.firstGID,b=a.numTiles-1);var d="";for(var e in this.tileGIDs){var f="",g=0;for(g in e)g-=c,(0>g||g>b)&&(g=0),d+=f,f=g+",";d+=g+"\n"}return d},j.plugin.tmx.MapLayer.prototype.csvToArray=function(a,b){var c=[],d=a.split("\n");for(var e in d){var f=[],h=e.split(",",b);for(var i in h)f.push(g(i));c.push(f)}return c},j.plugin.tmx.MapObjects=function(a,b){this.map=b,this.name=a.name,this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.visible=!a.visible||0!==a.visible,this.opacity=a.opacity,a.properties&&(this.properties=new j.plugin.tmx.MapProperties(a.properties));for(var c=0;c<a.objects.length;c++){var d=a.objects[c];this.objects.push(new j.plugin.tmx.MapObject(d,this))}},j.plugin.tmx.MapObjects.prototype.map=null,j.plugin.tmx.MapObjects.prototype.name=null,j.plugin.tmx.MapObjects.prototype.x=0,j.plugin.tmx.MapObjects.prototype.y=0,j.plugin.tmx.MapObjects.prototype.width=0,j.plugin.tmx.MapObjects.prototype.height=0,j.plugin.tmx.MapObjects.prototype.opacity=0,j.plugin.tmx.MapObjects.prototype.visible=!1,j.plugin.tmx.MapObjects.prototype.properties=null,j.plugin.tmx.MapObjects.prototype.objects=[],j.plugin.tmx.MapObjects.prototype.getCount=function(){return this.objects.length},j.plugin.tmx.MapObjects.prototype.get=function(a){return this.objects[a]},j.plugin.tmx.MapObject=function(a,b){if(this.group=b,this.name=a.name,this.type=a.type,this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.shared=null,this.gid=-1,a.gid){this.gid=a.gid;for(var c=0;c<this.group.map.tileSets.length;c++){var d=this.group.map.tileSets[c];if(this.shared=d.getPropertiesByGid(this.gid),this.shared)break}}a.properties&&(this.custom=new j.plugin.tmx.MapProperties(a.properties)),null===this.custom&&(this.custom=new j.plugin.tmx.MapProperties),this.custom.x=this.x,this.custom.y=this.y},j.plugin.tmx.MapObject.prototype.group=null,j.plugin.tmx.MapObject.prototype.name=null,j.plugin.tmx.MapObject.prototype.type=null,j.plugin.tmx.MapObject.prototype.x=0,j.plugin.tmx.MapObject.prototype.y=0,j.plugin.tmx.MapObject.prototype.width=0,j.plugin.tmx.MapObject.prototype.height=0,j.plugin.tmx.MapObject.prototype.gid=0,j.plugin.tmx.MapObject.prototype.custom=null,j.plugin.tmx.MapObject.prototype.shared=null,j.plugin.tmx.MapObject.prototype.getProperties=function(){return this.custom},j.plugin.tmx.MapObject.prototype.getName=function(){return this.name},j.plugin.tmx.MapProperties=function(a){null!==a&&this.readProperties(a)},j.plugin.tmx.MapProperties.prototype.readProperties=function(a){for(var b in a){var c=b,d=a[b];this[c]=d}return this},j.plugin.tmx.MapProperties.prototype.get=function(a){return this[a]},j.plugin.store.FlxSave=function(){this.destroy()},j.plugin.store.FlxSave.SUCCESS=0,j.plugin.store.FlxSave.PENDING=1,j.plugin.store.FlxSave.ERROR=2,j.plugin.store.FlxSave.prototype.data=null,j.plugin.store.FlxSave.prototype.name=null,j.plugin.store.FlxSave.prototype._sharedObject=null,j.plugin.store.FlxSave.prototype._onComplete=null,j.plugin.store.FlxSave.prototype._closeRequested=!1,j.plugin.store.FlxSave.prototype.destroy=function(){this._sharedObject=null,this.name=null,this.data=null,this._onComplete=null,this._closeRequested=!1},j.plugin.store.FlxSave.prototype.bind=function(a){this.destroy(),this.name=a;try{this._sharedObject=t.getInstance().createLocalStorage(this.name)}catch(b){return j.FlxG.log("ERROR: There was a problem binding to\nthe localStorage data from FlxSave."),this.destroy(),!1}this.data=[];for(var c=Object.keys(this._sharedObject._data),d=0;d<c.length;d++){var e=c[d];this.data[e]=this._sharedObject._data[e]}return!0},j.plugin.store.FlxSave.prototype.close=function(a,b){return this._closeRequested=!0,this.flush(a,b)},j.plugin.store.FlxSave.prototype.flush=function(a,b){return this.checkBinding()?(this._sharedObject.add(this.data),this._onComplete=void 0===b?null:b,this.onDone(j.plugin.store.FlxSave.SUCCESS)):!1},j.plugin.store.FlxSave.prototype.erase=function(){return this.checkBinding()?(this._sharedObject.clear(),!0):!1},j.plugin.store.FlxSave.prototype.onDone=function(a){switch(a){case j.plugin.store.FlxSave.ERROR:j.FlxG.log("ERROR: There was a problem flushing\nthe shared object data from FlxSave.")}return null!==this._onComplete&&this._onComplete(a==j.plugin.store.FlxSave.SUCCESS),this._closeRequested&&this.destroy(),a==j.plugin.store.FlxSave.SUCCESS},j.plugin.store.FlxSave.prototype.checkBinding=function(){return null===this._sharedObject?(j.FlxG.log("You must call FlxSave.bind()\nbefore you can read or write data."),!1):!0},j.plugin.store.FlxPreferences=function(a){this.preferences=new j.plugin.store.FlxSave,this.preferences.bind(a)},j.plugin.store.FlxPreferences.prototype.preferences=null,j.plugin.store.FlxPreferences.initPreferences=function(a){return a=void 0===a?"FlixelPref":a,new j.plugin.store.FlxPreferences(a)},j.plugin.store.FlxPreferences.prototype.getBoolean=function(a,b){return void 0===this.preferences.data[a]?b:this.preferences.data[a]},j.plugin.store.FlxPreferences.prototype.getInt=function(a,b){return void 0===this.preferences.data[a]?b:this.preferences.data[a]},j.plugin.store.FlxPreferences.prototype.getFloat=function(a,b){return isNaN(this.preferences.data[a])||void 0===this.preferences.data[a]||null===this.preferences.data[a]?b:this.preferences.data[a]},j.plugin.store.FlxPreferences.prototype.getString=function(a,b){return void 0===this.preferences.data[a]?b:this.preferences.data[a]},j.plugin.store.FlxPreferences.prototype.getLong=function(a,b){return void 0===this.preferences.data[a]?b:this.preferences.data[a]},j.plugin.store.FlxPreferences.prototype.setBoolean=function(a,b){this.preferences.data[a]=b,this.preferences.flush()},j.plugin.store.FlxPreferences.prototype.setInt=function(a,b){this.preferences.data[a]=b,this.preferences.flush()},j.plugin.store.FlxPreferences.prototype.setFloat=function(a,b){this.preferences.data[a]=b,this.preferences.flush()},j.plugin.store.FlxPreferences.prototype.setString=function(a,b){this.preferences.data[a]=b,this.preferences.flush()},j.plugin.store.FlxPreferences.prototype.setLong=function(a,b){this.preferences.data[a]=b,this.preferences.flush()},j.plugin.store.FlxPreferences.prototype.removePreference=function(a){this.preferences.data[a]=null,this.preferences.flush()},j.plugin.store.FlxPreferences.prototype.clearPreferences=function(){this.preferences.erase(),this.preferences.flush()},j.plugin.tweens.TweenPlugin=function(){j.plugin.tweens.TweenPlugin.parent.constructor.apply(this)},b(j.plugin.tweens.TweenPlugin,j.FlxBasic),j.plugin.tweens.FlxTween=function(a,b,c,d){b=void 0===b?0:b,c=void 0===c?null:c,d=void 0===d?null:d,this._target=a,0===b?b=j.plugin.tweens.FlxTween.PERSIST:b==j.plugin.tweens.FlxTween.BACKWARD&&(b=j.plugin.tweens.FlxTween.PERSIST|j.plugin.tweens.FlxTween.BACKWARD),this._type=b,this.complete=c,this._ease=d,this._t=0,this._backward=(this._type&j.plugin.tweens.FlxTween.BACKWARD)>0},j.plugin.tweens.FlxTween.PERSIST=1,j.plugin.tweens.FlxTween.LOOPING=2,j.plugin.tweens.FlxTween.PINGPONG=4,j.plugin.tweens.FlxTween.ONESHOT=8,j.plugin.tweens.FlxTween.BACKWARD=16,j.plugin.tweens.FlxTween.prototype.active=!1,j.plugin.tweens.FlxTween.prototype.complete=null,j.plugin.tweens.FlxTween.prototype.percent=0,j.plugin.tweens.FlxTween.prototype.scale=0,j.plugin.tweens.FlxTween.prototype._type=0,j.plugin.tweens.FlxTween.prototype._ease=null,j.plugin.tweens.FlxTween.prototype._t=0,j.plugin.tweens.FlxTween.prototype._time=0,j.plugin.tweens.FlxTween.prototype._target=0,j.plugin.tweens.FlxTween.prototype.finish=!1,j.plugin.tweens.FlxTween.prototype.parent=null,j.plugin.tweens.FlxTween.prototype.prev=null,j.plugin.tweens.FlxTween.prototype.next=null,j.plugin.tweens.FlxTween.prototype._backward=!1,j.plugin.tweens.FlxTween.prototype.destroy=function(){this.complete=null,this.parent=null,this._ease=null},j.plugin.tweens.FlxTween.prototype.update=function(){this._time+=j.FlxG.elapsed,this._t=this._time/this._target,null!==this._ease&&(this._t=this._ease(this._t)),this._backward&&(this._t=1-this._t),this._time>=this._target&&(this._t=this._backward?0:1,this.finish=!0)},j.plugin.tweens.FlxTween.prototype.start=function(){return this._time=0,0===this._target?(this.active=!1,void 0):(this.active=!0,void 0)},j.plugin.tweens.FlxTween.prototype.cancel=function(){this.active=!1,null!==this.parent&&this.parent.removeTween(this)},j.plugin.tweens.FlxTween.prototype.finishTween=function(){switch(null!==this.complete&&this.complete(),this._type&~j.plugin.tweens.FlxTween.BACKWARD){case j.plugin.tweens.FlxTween.PERSIST:this._time=this._target,this.active=!1;break;case j.plugin.tweens.FlxTween.LOOPING:this._time%=this._target,this._t=this._time/this._target,null!==this._ease&&this._t>0&&this._t<1&&(this._t=this._ease(this._t)),this.start();break;case j.plugin.tweens.FlxTween.PINGPONG:this._time%=this._target,this._t=this._time/this._target,null!==this._ease&&this._t>0&&this._t<1&&(this._t=this._ease(this._t)),this._backward&&(this._t=1-this._t),this._backward=!this._backward,this.start();break;case j.plugin.tweens.FlxTween.ONESHOT:this._time=this._target,this.active=!1,this.parent.removeTween(this,!0)}this.finish=!1},j.plugin.tweens.FlxTween.prototype.getPercent=function(){return this._time/this._target},j.plugin.tweens.FlxTween.prototype.setPercent=function(a){return this._time=this._target*a,this._time},j.plugin.tweens.FlxTween.prototype.getScale=function(){return this._t},j.plugin.tweens.util.Ease=function(){},j.plugin.tweens.util.Ease.quadIn=function(a){return a*a},j.plugin.tweens.util.Ease.quadOut=function(a){return-a*(a-2)},j.plugin.tweens.util.Ease.quadInOut=function(a){return.5>=a?a*a*2:1- --a*a*2},j.plugin.tweens.util.Ease.cubeIn=function(a){return a*a*a},j.plugin.tweens.util.Ease.cubeOut=function(a){return 1+--a*a*a},j.plugin.tweens.util.Ease.cubeInOut=function(a){return.5>=a?a*a*a*4:1+--a*a*a*4},j.plugin.tweens.util.Ease.quartIn=function(a){return a*a*a*a},j.plugin.tweens.util.Ease.quartOut=function(a){return 1-(a-=1)*a*a*a},j.plugin.tweens.util.Ease.quartInOut=function(a){return.5>=a?a*a*a*a*8:(1-(a=2*a-2)*a*a*a)/2+.5},j.plugin.tweens.util.Ease.quintIn=function(a){return a*a*a*a*a},j.plugin.tweens.util.Ease.quintOut=function(a){return(a-=1)*a*a*a*a+1},j.plugin.tweens.util.Ease.quintInOut=function(a){return(a*=2)<1?a*a*a*a*a/2:((a-=2)*a*a*a*a+2)/2},j.plugin.tweens.util.Ease.sineIn=function(a){return-Math.cos(j.plugin.tweens.util.Ease.PI2*a)+1},j.plugin.tweens.util.Ease.sineOut=function(a){return Math.sin(j.plugin.tweens.util.Ease.PI2*a)},j.plugin.tweens.util.Ease.sineInOut=function(a){return-Math.cos(j.plugin.tweens.util.Ease.PI*a)/2+.5
},j.plugin.tweens.util.Ease.bounceIn=function(a){return a=1-a,a<j.plugin.tweens.util.Ease.B1?1-7.5625*a*a:a<j.plugin.tweens.util.Ease.B2?1-(7.5625*(a-j.plugin.tweens.util.Ease.B3)*(a-j.plugin.tweens.util.Ease.B3)+.75):a<j.plugin.tweens.util.Ease.B4?1-(7.5625*(a-j.plugin.tweens.util.Ease.B5)*(a-j.plugin.tweens.util.Ease.B5)+.9375):1-(7.5625*(a-j.plugin.tweens.util.Ease.B6)*(a-j.plugin.tweens.util.Ease.B6)+.984375)},j.plugin.tweens.util.Ease.bounceOut=function(a){return a<j.plugin.tweens.util.Ease.B1?7.5625*a*a:a<j.plugin.tweens.util.Ease.B2?7.5625*(a-j.plugin.tweens.util.Ease.B3)*(a-j.plugin.tweens.util.Ease.B3)+.75:a<j.plugin.tweens.util.Ease.B4?7.5625*(a-j.plugin.tweens.util.Ease.B5)*(a-j.plugin.tweens.util.Ease.B5)+.9375:7.5625*(a-j.plugin.tweens.util.Ease.B6)*(a-j.plugin.tweens.util.Ease.B6)+.984375},j.plugin.tweens.util.Ease.bounceInOut=function(a){return.5>a?(a=1-2*a,a<j.plugin.tweens.util.Ease.B1?(1-7.5625*a*a)/2:a<j.plugin.tweens.util.Ease.B2?(1-(7.5625*(a-j.plugin.tweens.util.Ease.B3)*(a-j.plugin.tweens.util.Ease.B3)+.75))/2:a<j.plugin.tweens.util.Ease.B4?(1-(7.5625*(a-j.plugin.tweens.util.Ease.B5)*(a-j.plugin.tweens.util.Ease.B5)+.9375))/2:(1-(7.5625*(a-j.plugin.tweens.util.Ease.B6)*(a-j.plugin.tweens.util.Ease.B6)+.984375))/2):(a=2*a-1,a<j.plugin.tweens.util.Ease.B1?7.5625*a*a/2+.5:a<j.plugin.tweens.util.Ease.B2?(7.5625*(a-j.plugin.tweens.util.Ease.B3)*(a-j.plugin.tweens.util.Ease.B3)+.75)/2+.5:a<j.plugin.tweens.util.Ease.B4?(7.5625*(a-j.plugin.tweens.util.Ease.B5)*(a-j.plugin.tweens.util.Ease.B5)+.9375)/2+.5:(7.5625*(a-j.plugin.tweens.util.Ease.B6)*(a-j.plugin.tweens.util.Ease.B6)+.984375)/2+.5)},j.plugin.tweens.util.Ease.circIn=function(a){return-(Math.sqrt(1-a*a)-1)},j.plugin.tweens.util.Ease.circOut=function(a){return Math.sqrt(1-(a-1)*(a-1))},j.plugin.tweens.util.Ease.circInOut=function(a){return.5>=a?(Math.sqrt(1-a*a*4)-1)/-2:(Math.sqrt(1-(2*a-2)*(2*a-2))+1)/2},j.plugin.tweens.util.Ease.expoIn=function(a){return Math.pow(2,10*(a-1))},j.plugin.tweens.util.Ease.expoOut=function(a){return-Math.pow(2,-10*a)+1},j.plugin.tweens.util.Ease.expoInOut=function(a){return.5>a?Math.pow(2,10*(2*a-1))/2:(-Math.pow(2,-10*(2*a-1))+2)/2},j.plugin.tweens.util.Ease.backIn=function(a){return a*a*(2.70158*a-1.70158)},j.plugin.tweens.util.Ease.backOut=function(a){return 1- --a*a*(-2.70158*a-1.70158)},j.plugin.tweens.util.Ease.backInOut=function(a){return a*=2,1>a?a*a*(2.70158*a-1.70158)/2:(a--,(1- --a*a*(-2.70158*a-1.70158))/2+.5)},j.plugin.tweens.util.Ease.PI=j.FlxU.PI,j.plugin.tweens.util.Ease.PI2=j.FlxU.HALF_PI,j.plugin.tweens.util.Ease.B1=1/2.75,j.plugin.tweens.util.Ease.B2=2/2.75,j.plugin.tweens.util.Ease.B3=1.5/2.75,j.plugin.tweens.util.Ease.B4=2.5/2.75,j.plugin.tweens.util.Ease.B5=2.25/2.75,j.plugin.tweens.util.Ease.B6=2.625/2.75,j.plugin.tweens.misc.AngleTween=function(a,b){b=void 0===b?0:b,j.plugin.tweens.misc.AngleTween.parent.constructor.apply(this,[0,b,a]),this.angle=0},b(j.plugin.tweens.misc.AngleTween,j.plugin.tweens.FlxTween),j.plugin.tweens.misc.AngleTween.prototype.angle=0,j.plugin.tweens.misc.AngleTween.prototype._start=0,j.plugin.tweens.misc.AngleTween.prototype._range=0,j.plugin.tweens.misc.AngleTween.prototype.tween=function(a,b,c,d){d=void 0===d?null:d,this._start=this.angle=a;var e=b-this.angle,f=Math.abs(e);this._range=f>181?(360-f)*(e>0?-1:1):179>f?e:j.plugin.FlxMath.randFloat(-180,180),this._target=c,this._ease=d,this.start()},j.plugin.tweens.misc.AngleTween.prototype.update=function(){j.plugin.tweens.misc.AngleTween.parent.update.apply(this),this.angle=(this._start+this._range*this._t)%360,this.angle<0&&(this.angle+=360)},j.plugin.tweens.misc.NumTween=function(a,b){b=void 0===b?0:b,j.plugin.tweens.misc.AngleTween.parent.constructor.apply(this,[0,b,a]),this.value=0},j.plugin.tweens.misc.NumTween.prototype.value=0,j.plugin.tweens.misc.NumTween.prototype._start=0,j.plugin.tweens.misc.NumTween.prototype._range=0,j.plugin.tweens.misc.NumTween.prototype.tween=function(a,b,c,d){d=void 0===d?null:d,this._start=this.value=a,this._range=b-this.value,this._target=c,this._ease=d,this.start()},j.plugin.tweens.misc.NumTween.prototype.update=function(){j.plugin.tweens.misc.NumTween.parent.update.apply(this),this.value=this._start+this._range*this._t},j.plugin.tweens.misc.VarTween=function(a,b){b=void 0===b?0:b,j.plugin.tweens.misc.VarTween.parent.constructor.apply(this,[0,b,a])},b(j.plugin.tweens.misc.VarTween,j.plugin.tweens.FlxTween),j.plugin.tweens.misc.VarTween.prototype._object=null,j.plugin.tweens.misc.VarTween.prototype._property=null,j.plugin.tweens.misc.VarTween.prototype._start=0,j.plugin.tweens.misc.VarTween.prototype._range=0,j.plugin.tweens.misc.VarTween.prototype.destroy=function(){j.plugin.tweens.misc.VarTween.parent.destroy.apply(this),this._object=null},j.plugin.tweens.misc.VarTween.prototype.tween=function(a,b,c,d,e){this._object=a,this._ease=void 0===e?null:e,this._property=b;var f=0;try{f=this._object[this._property]}catch(g){throw new Error(g)}this._start=f,this._range=c-this._start,this._target=d,this.start()},j.plugin.tweens.misc.VarTween.prototype.update=function(){j.plugin.tweens.misc.VarTween.parent.update.apply(this);try{this._object[this._property]=this._start+this._range*this._t}catch(a){throw new Error(a)}};var y=[];return y.push(j),y.push("Flixel"),y.push(f),y.push("int"),y.push(g),y.push("uint"),y.push(b),y.push("extend"),y.push(d),y.push("startTimer"),y.push(e),y.push("getTimer"),y.push(c),y.push("sleep"),y.push(m),y.push("BitmapData"),y.push(n),y.push("CanvasManager"),y.push(l),y.push("ColorTransform"),y.push(k),y.push("Matrix"),y.push(u),y.push("ScaleManager"),y.push(p),y.push("Cache"),y.push(o),y.push("Device"),y.push(r),y.push("Loader"),y.push(q),y.push("Resource"),y.push(s),y.push("LocalStorage"),y.push(t),y.push("StorageManager"),y.push(v),y.push("SoundChannel"),y.push(w),y.push("SoundManager"),y.push(x),y.push("SoundTransform"),y});